{"version":3,"file":"daffodil-order-driver-magento-2.4.0.umd.js","sources":["ng://@daffodil/order/driver/magento/2.4.0/transforms/responses/order.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-item.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-address.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-shipment-item.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-shipment-tracking.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-shipment.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-payment.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order-invoice.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/fragments/order.ts","ng://@daffodil/order/driver/magento/2.4.0/queries/get-guest-orders.ts","ng://@daffodil/order/driver/magento/2.4.0/injection-tokens/fragments/order.ts","ng://@daffodil/order/driver/magento/2.4.0/validators/get-orders.ts","ng://@daffodil/order/driver/magento/2.4.0/errors/codes.ts","ng://@daffodil/order/driver/magento/2.4.0/errors/map.ts","ng://@daffodil/order/driver/magento/2.4.0/errors/transform.ts","ng://@daffodil/order/driver/magento/2.4.0/order.service.ts","ng://@daffodil/order/driver/magento/2.4.0/order-driver.module.ts"],"sourcesContent":["import {\n  DaffOrder,\n  DaffOrderTotal,\n  DaffOrderItem,\n  DaffOrderAddress,\n  DaffOrderShipment,\n  DaffOrderShipmentItem,\n  DaffOrderShipmentTracking,\n  DaffOrderPayment,\n  DaffOrderInvoice,\n  DaffOrderTotalTypeEnum,\n  DaffOrderItemType\n} from '@daffodil/order';\n\nimport {\n  MagentoGraycoreOrder,\n  MagentoGraycoreOrderItem,\n  MagentoGraycoreOrderShipment,\n  MagentoGraycoreOrderAddress,\n  MagentoGraycoreOrderShipmentItem,\n  MagentoGraycoreOrderShipmentTracking,\n  MagentoGraycoreOrderPayment,\n  MagentoGraycoreOrderInvoice\n} from '../../models/responses/public_api';\n\nfunction transformTotals(totals: {\n  grand_total: number,\n  subtotal: number,\n  shipping: number,\n  discount: number,\n  tax: number,\n}): DaffOrderTotal[] {\n  return [\n    {\n      label: 'Grand Total',\n      type: DaffOrderTotalTypeEnum.GrandTotal,\n      value: totals.grand_total,\n      sort_order: 1\n    },\n    {\n      label: 'Subtotal',\n      type: DaffOrderTotalTypeEnum.Subtotal,\n      value: totals.subtotal,\n      sort_order: 0\n    },\n    {\n      label: 'Shipping',\n      type: DaffOrderTotalTypeEnum.Shipping,\n      value: totals.shipping,\n      sort_order: 2\n    },\n    {\n      label: 'Tax',\n      type: DaffOrderTotalTypeEnum.Tax,\n      value: totals.tax,\n      sort_order: 3\n    },\n    {\n      label: 'Discount',\n      type: DaffOrderTotalTypeEnum.Discount,\n      value: totals.discount,\n      sort_order: 4\n    }\n  ]\n}\n\nfunction transformItem(item: MagentoGraycoreOrderItem): DaffOrderItem {\n  return {\n    item_id: null,\n    type: DaffOrderItemType.Simple,\n    qty_ordered: item.qty_ordered,\n    qty_canceled: item.qty_canceled,\n    qty_fulfilled: item.qty_fulfilled,\n    qty: item.qty,\n    image: {\n      url: item.image,\n      id: null,\n      label: null\n    },\n    order_id: Number(item.order_id),\n    created_at: item.created_at,\n    updated_at: item.updated_at,\n    product_id: item.product_id,\n    parent_item_id: null,\n    sku: item.sku,\n    name: item.name,\n    weight: item.weight,\n    price: item.price,\n    discount_percent: item.discount_percent,\n    discount_amount: item.discount_amount,\n    tax_percent: item.tax_percent,\n    tax_amount: item.tax_amount,\n    row_total: item.row_total,\n    row_total_with_discount: item.row_total_with_discount,\n    row_weight: item.row_weight,\n    tax_before_discount: item.tax_before_discount\n  }\n}\n\nfunction transformAddress(address: MagentoGraycoreOrderAddress): DaffOrderAddress {\n  return {\n    order_id: address.order_id,\n    prefix: address.prefix,\n    suffix: address.suffix,\n    firstname: address.firstname,\n    middlename: address.middlename,\n    lastname: address.lastname,\n    telephone: address.telephone,\n    email: address.email,\n    street: address.street[0],\n    street2: address.street[1],\n    city: address.city,\n    region: address.region_id,\n    country: address.country_code,\n    postcode: address.postcode\n  }\n}\n\nfunction transformShipmentItem(shipmentItem: MagentoGraycoreOrderShipmentItem): DaffOrderShipmentItem {\n  return {\n    item: transformItem(shipmentItem.item),\n    qty: shipmentItem.qty\n  }\n}\n\nfunction transformShipmentTracking(tracking: MagentoGraycoreOrderShipmentTracking): DaffOrderShipmentTracking {\n  return {\n    tracking_number: tracking.tracking_number,\n    tracking_url: null,\n    carrier: tracking.carrier,\n    title: tracking.title,\n    carrier_logo: null,\n  }\n}\n\nfunction transformShipment(shipment: MagentoGraycoreOrderShipment): DaffOrderShipment {\n  return {\n    carrier: null,\n    carrier_title: null,\n    code: null,\n    method: null,\n    method_description: null,\n    tracking: shipment.tracking.map(transformShipmentTracking),\n    items: shipment.items.map(transformShipmentItem)\n  }\n}\n\nfunction transformPayment(payment: MagentoGraycoreOrderPayment): DaffOrderPayment {\n  return {\n    payment_id: payment.payment_id,\n    order_id: payment.order_id,\n    created_at: null,\n    updated_at: null,\n    method: payment.method,\n    cc_type: payment.cc_type,\n    cc_last4: payment.cc_last4,\n    cc_owner: payment.cc_owner,\n    cc_exp_month: payment.cc_exp_month,\n    cc_exp_year: payment.cc_exp_year\n  }\n}\n\nfunction transformInvoice(invoice: MagentoGraycoreOrderInvoice): DaffOrderInvoice {\n  return {\n    totals: transformTotals(invoice),\n    billing_address: transformAddress(invoice.billing_address),\n    shipping_address: transformAddress(invoice.shipping_address),\n    payment: transformPayment(invoice.payment),\n    items: invoice.items.map(transformShipmentItem),\n    shipping_method: null\n  }\n}\n\n/**\n * Transforms the MagentoGraycoreOrder from the magento order query into a DaffOrder.\n */\nexport function daffMagentoTransformOrder(order: MagentoGraycoreOrder): DaffOrder {\n  return {\n    extra_attributes: order,\n\n    id: order.order_number,\n    customer_id: order.customer_id,\n    created_at: order.created_at,\n    updated_at: order.updated_at,\n    status: order.status,\n\n    totals: transformTotals(order),\n    applied_codes: order.applied_codes.map(code => ({code})),\n    items: order.items.map(transformItem),\n    billing_addresses: [\n      transformAddress(order.billing_address)\n    ],\n    shipping_addresses: [\n      transformAddress(order.shipping_address)\n    ],\n    shipments: order.shipments.map(transformShipment),\n    payment: transformPayment(order.payment),\n    invoices: order.invoices.map(transformInvoice),\n    credits: order.credits.map(transformInvoice),\n  }\n}\n","import gql from 'graphql-tag';\n\nexport const orderItemFragment = gql`\n  fragment orderItem on GraycoreOrderItem {\n    qty_ordered\n    image\n    qty_canceled\n    qty_fulfilled\n    order_id\n    created_at\n    updated_at\n    product_id\n    sku\n    name\n    weight\n    qty\n    price\n    discount_percent\n    discount_amount\n    tax_percent\n    tax_amount\n    row_total\n    row_total_with_discount\n    row_weight\n    tax_before_discount\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const orderAddressFragment = gql`\n  fragment orderAddress on GraycoreOrderAddress {\n    order_id\n    prefix\n    suffix\n    firstname\n    middlename\n    lastname\n    telephone\n    email\n    street\n    city\n    region\n    region_id\n    country_code\n    postcode\n  }\n`;\n","import gql from 'graphql-tag';\n\nimport { orderItemFragment } from './order-item';\n\nexport const orderShipmentItemFragment = gql`\n  fragment orderShipmentItem on GraycoreOrderShipmentItem {\n    qty\n    item {\n      ...orderItem\n    }\n  }\n  ${orderItemFragment}\n`;\n","import gql from 'graphql-tag';\n\nexport const orderShipmentTrackingFragment = gql`\n  fragment orderShipmentTracking on GraycoreOrderShipmentTracking {\n    tracking_number\n    carrier\n    title\n  }\n`;\n","import gql from 'graphql-tag';\n\nimport { orderShipmentItemFragment } from './order-shipment-item';\nimport { orderShipmentTrackingFragment } from './order-shipment-tracking';\n\nexport const orderShipmentFragment = gql`\n  fragment orderShipment on GraycoreOrderShipment {\n    tracking {\n      ...orderShipmentTracking\n    }\n    items {\n      ...orderShipmentItem\n    }\n  }\n  ${orderShipmentItemFragment}\n  ${orderShipmentTrackingFragment}\n`;\n","import gql from 'graphql-tag';\n\nexport const orderPaymentFragment = gql`\n  fragment orderPayment on GraycoreOrderPayment {\n    payment_id\n    order_id\n    method\n    cc_type\n    cc_last4\n    cc_owner\n    cc_exp_month\n    cc_exp_year\n  }\n`;\n","import gql from 'graphql-tag';\n\nimport { orderShipmentItemFragment } from './order-shipment-item';\nimport { orderAddressFragment } from './order-address';\nimport { orderPaymentFragment } from './order-payment';\n\nexport const orderInvoiceFragment = gql`\n  fragment orderInvoice on GraycoreOrderInvoice {\n    items {\n      ...orderShipmentItem\n    }\n    grand_total\n    subtotal\n    shipping\n    discount\n    tax\n    billing_address {\n      ...orderAddress\n    }\n    shipping_address {\n      ...orderAddress\n\t\t}\n\t\tpayment {\n\t\t\t...orderPayment\n\t\t}\n  }\n  ${orderShipmentItemFragment}\n  ${orderAddressFragment}\n  ${orderPaymentFragment}\n`;\n","import gql from 'graphql-tag';\nimport { orderItemFragment } from './order-item';\nimport { orderAddressFragment } from './order-address';\nimport { orderShipmentFragment } from './order-shipment';\nimport { orderPaymentFragment } from './order-payment';\nimport { orderInvoiceFragment } from './order-invoice';\n\nexport const orderFragment = gql`\n  fragment order on GraycoreOrder {\n    id\n    order_number\n    customer_id\n    created_at\n    updated_at\n    grand_total\n    subtotal\n    shipping\n    discount\n    tax\n    status\n    applied_codes\n    items {\n      ...orderItem\n    }\n    billing_address {\n      ...orderAddress\n    }\n    shipping_address {\n      ...orderAddress\n    }\n    shipments {\n      ...orderShipment\n    }\n    payment {\n      ...orderPayment\n    }\n    invoices {\n      ...orderInvoice\n    }\n    credits {\n      ...orderInvoice\n    }\n  }\n  ${orderItemFragment}\n  ${orderShipmentFragment}\n  ${orderPaymentFragment}\n  ${orderInvoiceFragment}\n  ${orderAddressFragment}\n`;\n","import { DocumentNode } from 'graphql';\nimport gql from 'graphql-tag';\n\nimport { daffBuildFragmentNameSpread, daffBuildFragmentDefinition } from '@daffodil/core/graphql';\n\nimport { orderFragment } from './fragments/public_api';\n\nexport const getGuestOrders = (extraOrderFragments: DocumentNode[] = []) => gql`\n  query GetGuestOrders($cartId: String!) {\n    graycoreGuestOrders(cartId: $cartId) {\n      orders {\n        ...order\n        ${daffBuildFragmentNameSpread(...extraOrderFragments)}\n      }\n    }\n  }\n  ${orderFragment}\n  ${daffBuildFragmentDefinition(...extraOrderFragments)}\n`;\n","import { InjectionToken } from '@angular/core';\nimport { DocumentNode } from 'graphql';\n\n/**\n * An multi-provider injection token for providing extra GraphQL fragments that will be spread into order queries.\n * This can be used to retrieve additional data that is not covered by the standard Daffodil interfaces.\n * The data will appear in DaffOrder#extra_attributes.\n *\n * Fragment structure is platform-specific and this feature should be used with care.\n */\nexport const DaffMagentoExtraOrderFragments = new InjectionToken<DocumentNode[]>('DaffMagentoExtraOrderFragments', {factory: () => []});\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { DaffOrderInvalidAPIResponseError } from '@daffodil/order/driver';\n\nimport { MagentoGetGuestOrdersResponse } from '../queries/public_api';\n\nexport const validateGetOrdersResponse = (response: ApolloQueryResult<MagentoGetGuestOrdersResponse>) => {\n  if (response.data.graycoreGuestOrders.orders) {\n    if (response.data.graycoreGuestOrders.orders.reduce((acc, order) => acc && !!(\n      order.billing_address\n        && order.shipping_address\n        && order.payment\n    ), true)) {\n      return response\n    } else {\n      throw new DaffOrderInvalidAPIResponseError('One of the orders does not contain required fields.')\n    }\n  } else {\n    throw new DaffOrderInvalidAPIResponseError('Get orders response does not contain a valid list of orders.')\n  }\n}\n","export enum MagentoOrderGraphQlErrorCode {\n\tCART_NOT_FOUND = 'graphql-no-such-entity',\n}\n","import { DaffErrorCodeMap } from '@daffodil/core';\nimport { DaffCartNotFoundError } from '@daffodil/cart/driver';\n\nimport { MagentoOrderGraphQlErrorCode } from './codes';\n\nexport const DaffOrderMagentoErrorMap: DaffErrorCodeMap = {\n\t[MagentoOrderGraphQlErrorCode.CART_NOT_FOUND]: DaffCartNotFoundError,\n};\n","import { daffTransformMagentoError } from '@daffodil/driver/magento';\n\nimport { DaffOrderMagentoErrorMap } from './map';\n\nexport function transformMagentoOrderError(error: any) {\n  return daffTransformMagentoError(error, DaffOrderMagentoErrorMap)\n}\n","import { DocumentNode } from 'graphql';\nimport { Inject, Injectable } from '@angular/core';\nimport { Apollo } from 'apollo-angular';\n\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nimport { DaffCart } from '@daffodil/cart';\nimport {\n  DaffOrder,\n} from '@daffodil/order';\nimport {\n  DaffOrderServiceInterface,\n  DaffOrderNotFoundError\n} from '@daffodil/order/driver';\n\nimport { getGuestOrders, MagentoGetGuestOrdersResponse } from './queries/public_api';\nimport { validateGetOrdersResponse } from './validators/public_api';\nimport { transformMagentoOrderError } from './errors/transform';\nimport { daffMagentoTransformOrder } from './transforms/responses/order';\nimport { DaffMagentoExtraOrderFragments } from './injection-tokens/public_api';\n\n/**\n * A service for making Magento GraphQL queries for orders.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffOrderMagentoService implements DaffOrderServiceInterface {\n  constructor(\n    private apollo: Apollo,\n    @Inject(DaffMagentoExtraOrderFragments) public extraOrderFragments: DocumentNode[],\n  ) {}\n\n  list(cartId?: DaffCart['id']): Observable<DaffOrder[]> {\n    return this.apollo.query<MagentoGetGuestOrdersResponse>({\n      query: getGuestOrders(this.extraOrderFragments),\n      variables: {\n        cartId\n      }\n    }).pipe(\n      map(validateGetOrdersResponse),\n      map(result => result.data.graycoreGuestOrders.orders.map(daffMagentoTransformOrder)),\n      catchError(err => throwError(transformMagentoOrderError(err)))\n    );\n  }\n\n  get(orderId: DaffOrder['id'], cartId?: DaffCart['id']): Observable<DaffOrder> {\n    return this.list(cartId).pipe(\n      map(orders => {\n        for (const order of orders) {\n          if (String(order.id) === String(orderId)) {\n            return order\n          }\n        }\n\n        // order not found\n        throw new DaffOrderNotFoundError(`Could not find an order with ID ${orderId}`);\n      }),\n    );\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffOrderDriver } from '@daffodil/order/driver';\n\nimport { DaffOrderMagentoService } from './order.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n  ]\n})\nexport class DaffOrderMagentoDriverModule {\n  static forRoot(): ModuleWithProviders<DaffOrderMagentoDriverModule> {\n    return {\n      ngModule: DaffOrderMagentoDriverModule,\n      providers: [\n        {\n          provide: DaffOrderDriver,\n          useExisting: DaffOrderMagentoService\n        },\n      ]\n    };\n  }\n}\n"],"names":["DaffOrderTotalTypeEnum","DaffOrderItemType","daffBuildFragmentNameSpread","daffBuildFragmentDefinition","InjectionToken","DaffOrderInvalidAPIResponseError","DaffCartNotFoundError","daffTransformMagentoError","map","catchError","throwError","DaffOrderNotFoundError","Injectable","Apollo","Inject","DaffOrderDriver","NgModule","CommonModule"],"mappings":";;;;;;;;;;;;IAAA;;;;IAyBA,SAAS,eAAe,CAAC,MAMxB;QACC,OAAO;YACL;gBACE,KAAK,EAAE,aAAa;gBACpB,IAAI,EAAEA,4BAAsB,CAAC,UAAU;gBACvC,KAAK,EAAE,MAAM,CAAC,WAAW;gBACzB,UAAU,EAAE,CAAC;aACd;YACD;gBACE,KAAK,EAAE,UAAU;gBACjB,IAAI,EAAEA,4BAAsB,CAAC,QAAQ;gBACrC,KAAK,EAAE,MAAM,CAAC,QAAQ;gBACtB,UAAU,EAAE,CAAC;aACd;YACD;gBACE,KAAK,EAAE,UAAU;gBACjB,IAAI,EAAEA,4BAAsB,CAAC,QAAQ;gBACrC,KAAK,EAAE,MAAM,CAAC,QAAQ;gBACtB,UAAU,EAAE,CAAC;aACd;YACD;gBACE,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAEA,4BAAsB,CAAC,GAAG;gBAChC,KAAK,EAAE,MAAM,CAAC,GAAG;gBACjB,UAAU,EAAE,CAAC;aACd;YACD;gBACE,KAAK,EAAE,UAAU;gBACjB,IAAI,EAAEA,4BAAsB,CAAC,QAAQ;gBACrC,KAAK,EAAE,MAAM,CAAC,QAAQ;gBACtB,UAAU,EAAE,CAAC;aACd;SACF,CAAA;KACF;;;;;IAED,SAAS,aAAa,CAAC,IAA8B;QACnD,OAAO;YACL,OAAO,EAAE,IAAI;YACb,IAAI,EAAEC,uBAAiB,CAAC,MAAM;YAC9B,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,KAAK,EAAE;gBACL,GAAG,EAAE,IAAI,CAAC,KAAK;gBACf,EAAE,EAAE,IAAI;gBACR,KAAK,EAAE,IAAI;aACZ;YACD,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC/B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,cAAc,EAAE,IAAI;YACpB,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YACvC,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,uBAAuB,EAAE,IAAI,CAAC,uBAAuB;YACrD,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,mBAAmB,EAAE,IAAI,CAAC,mBAAmB;SAC9C,CAAA;KACF;;;;;IAED,SAAS,gBAAgB,CAAC,OAAoC;QAC5D,OAAO;YACL,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACzB,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YAC1B,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,MAAM,EAAE,OAAO,CAAC,SAAS;YACzB,OAAO,EAAE,OAAO,CAAC,YAAY;YAC7B,QAAQ,EAAE,OAAO,CAAC,QAAQ;SAC3B,CAAA;KACF;;;;;IAED,SAAS,qBAAqB,CAAC,YAA8C;QAC3E,OAAO;YACL,IAAI,EAAE,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC;YACtC,GAAG,EAAE,YAAY,CAAC,GAAG;SACtB,CAAA;KACF;;;;;IAED,SAAS,yBAAyB,CAAC,QAA8C;QAC/E,OAAO;YACL,eAAe,EAAE,QAAQ,CAAC,eAAe;YACzC,YAAY,EAAE,IAAI;YAClB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,KAAK,EAAE,QAAQ,CAAC,KAAK;YACrB,YAAY,EAAE,IAAI;SACnB,CAAA;KACF;;;;;IAED,SAAS,iBAAiB,CAAC,QAAsC;QAC/D,OAAO;YACL,OAAO,EAAE,IAAI;YACb,aAAa,EAAE,IAAI;YACnB,IAAI,EAAE,IAAI;YACV,MAAM,EAAE,IAAI;YACZ,kBAAkB,EAAE,IAAI;YACxB,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,yBAAyB,CAAC;YAC1D,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC;SACjD,CAAA;KACF;;;;;IAED,SAAS,gBAAgB,CAAC,OAAoC;QAC5D,OAAO;YACL,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,UAAU,EAAE,IAAI;YAChB,UAAU,EAAE,IAAI;YAChB,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,OAAO,EAAE,OAAO,CAAC,OAAO;YACxB,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,YAAY,EAAE,OAAO,CAAC,YAAY;YAClC,WAAW,EAAE,OAAO,CAAC,WAAW;SACjC,CAAA;KACF;;;;;IAED,SAAS,gBAAgB,CAAC,OAAoC;QAC5D,OAAO;YACL,MAAM,EAAE,eAAe,CAAC,OAAO,CAAC;YAChC,eAAe,EAAE,gBAAgB,CAAC,OAAO,CAAC,eAAe,CAAC;YAC1D,gBAAgB,EAAE,gBAAgB,CAAC,OAAO,CAAC,gBAAgB,CAAC;YAC5D,OAAO,EAAE,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC;YAC1C,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC;YAC/C,eAAe,EAAE,IAAI;SACtB,CAAA;KACF;;;;;;IAKD,SAAgB,yBAAyB,CAAC,KAA2B;QACnE,OAAO;YACL,gBAAgB,EAAE,KAAK;YAEvB,EAAE,EAAE,KAAK,CAAC,YAAY;YACtB,WAAW,EAAE,KAAK,CAAC,WAAW;YAC9B,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,MAAM,EAAE,KAAK,CAAC,MAAM;YAEpB,MAAM,EAAE,eAAe,CAAC,KAAK,CAAC;YAC9B,aAAa,EAAE,KAAK,CAAC,aAAa,CAAC,GAAG;;;;YAAC,UAAA,IAAI,IAAI,QAAC,EAAC,IAAI,MAAA,EAAC,IAAC,EAAC;YACxD,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC;YACrC,iBAAiB,EAAE;gBACjB,gBAAgB,CAAC,KAAK,CAAC,eAAe,CAAC;aACxC;YACD,kBAAkB,EAAE;gBAClB,gBAAgB,CAAC,KAAK,CAAC,gBAAgB,CAAC;aACzC;YACD,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC;YACjD,OAAO,EAAE,gBAAgB,CAAC,KAAK,CAAC,OAAO,CAAC;YACxC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAC;YAC9C,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC;SAC7C,CAAA;KACF;;;;;;;;;;;;ACtMD,QAAa,iBAAiB,GAAG,GAAG,4cAAA,yYAwBnC,IAAA;;;;;;;;ACxBD,QAAa,oBAAoB,GAAG,GAAG,mUAAA,0PAiBtC,IAAA;;;;;;;;ACfD,QAAa,yBAAyB,GAAG,GAAG,uMAAA,wHAOxC,EAAiB,IACpB,KADG,iBAAiB,CACpB;;;;;;;;ACVD,QAAa,6BAA6B,GAAG,GAAG,oMAAA,2HAM/C,IAAA;;;;;;;;ACHD,QAAa,qBAAqB,GAAG,GAAG,8PAAA,uKASpC,EAAyB,MACzB,EAA6B,IAChC,KAFG,yBAAyB,EACzB,6BAA6B,CAChC;;;;;;;;ACdD,QAAa,oBAAoB,GAAG,GAAG,2PAAA,kLAWtC,IAAA;;;;;;;;ACPD,QAAa,oBAAoB,GAAG,GAAG,yaAAA,0UAoBnC,EAAyB,MACzB,EAAoB,MACpB,EAAoB,IACvB,KAHG,yBAAyB,EACzB,oBAAoB,EACpB,oBAAoB,CACvB;;;;;;;;ACtBD,QAAa,aAAa,GAAG,GAAG,wpBAAA,yiBAoC5B,EAAiB,MACjB,EAAqB,MACrB,EAAoB,MACpB,EAAoB,MACpB,EAAoB,IACvB,KALG,iBAAiB,EACjB,qBAAqB,EACrB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,CACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzCD,QAAa,cAAc;;;;IAAG,UAAC,mBAAwC;QAAxC,oCAAA,EAAA,wBAAwC;QAAK,OAAA,GAAG,0PAAA,sIAKrE,EAAmD,2BAIzD,EAAa,MACb,EAAmD,IACtD,KANSC,mCAA2B,wBAAI,mBAAmB,IAIxD,aAAa,EACbC,mCAA2B,wBAAI,mBAAmB;KACrD,CAAA;;;;;;;;;;;;IClBD;;;;;;;;AAUA,QAAa,8BAA8B,GAAG,IAAIC,mBAAc,CAAiB,gCAAgC,EAAE,EAAC,OAAO;;;QAAE,cAAM,OAAA,EAAE,GAAA,CAAA,EAAC,CAAC;;;;;;;;;;;ICRvI;IAIA,IAAa,yBAAyB;;;;IAAG,UAAC,QAA0D;QAClG,IAAI,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE;YAC5C,IAAI,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,MAAM;;;;;YAAC,UAAC,GAAG,EAAE,KAAK,IAAK,OAAA,GAAG,IAAI,CAAC,EAC1E,KAAK,CAAC,eAAe;mBAChB,KAAK,CAAC,gBAAgB;mBACtB,KAAK,CAAC,OAAO,CACnB,GAAA,GAAE,IAAI,CAAC,EAAE;gBACR,OAAO,QAAQ,CAAA;aAChB;iBAAM;gBACL,MAAM,IAAIC,uCAAgC,CAAC,qDAAqD,CAAC,CAAA;aAClG;SACF;aAAM;YACL,MAAM,IAAIA,uCAAgC,CAAC,8DAA8D,CAAC,CAAA;SAC3G;KACF,CAAA;;;;;;;;;;;;;QCnBA,gBAAiB,wBAAwB;;;;;ICI1C,IAAa,wBAAwB;QACpC,GAAC,4BAA4B,CAAC,cAAc,IAAGC,8BAAqB;WACpE;;;;;;ICPD;;;;IAIA,SAAgB,0BAA0B,CAAC,KAAU;QACnD,OAAOC,iCAAyB,CAAC,KAAK,EAAE,wBAAwB,CAAC,CAAA;KAClE;;;;;;;;;;;;;;;ACmBD;QAIE,iCACU,MAAc,EACyB,mBAAmC;YAD1E,WAAM,GAAN,MAAM,CAAQ;YACyB,wBAAmB,GAAnB,mBAAmB,CAAgB;SAChF;;;;;QAEJ,sCAAI;;;;QAAJ,UAAK,MAAuB;YAC1B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAgC;gBACtD,KAAK,EAAE,cAAc,CAAC,IAAI,CAAC,mBAAmB,CAAC;gBAC/C,SAAS,EAAE;oBACT,MAAM,QAAA;iBACP;aACF,CAAC,CAAC,IAAI,CACLC,aAAG,CAAC,yBAAyB,CAAC,EAC9BA,aAAG;;;;YAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,GAAA,EAAC,EACpFC,oBAAU;;;;YAAC,UAAA,GAAG,IAAI,OAAAC,eAAU,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC,GAAA,EAAC,CAC/D,CAAC;SACH;;;;;;QAED,qCAAG;;;;;QAAH,UAAI,OAAwB,EAAE,MAAuB;YACnD,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAC3BF,aAAG;;;;YAAC,UAAA,MAAM;;;oBACR,KAAoB,IAAA,WAAA,SAAA,MAAM,CAAA,8BAAA,kDAAE;wBAAvB,IAAM,KAAK,mBAAA;wBACd,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,MAAM,CAAC,OAAO,CAAC,EAAE;4BACxC,OAAO,KAAK,CAAA;yBACb;qBACF;;;;;;;;;;gBAGD,MAAM,IAAIG,6BAAsB,CAAC,qCAAmC,OAAS,CAAC,CAAC;aAChF,EAAC,CACH,CAAC;SACH;;oBAnCFC,eAAU,SAAC;wBACV,UAAU,EAAE,MAAM;qBACnB;;;;oBAzBQC,oBAAM;gDA6BVC,WAAM,SAAC,8BAA8B;;;sCA/B1C;KAyBA,IAoCC;;;;;;QA/BG,yCAAsB;;QACtB,sDAAkF;;;;;;;AC/BtF;QAOA;SAiBC;;;;QAXQ,oCAAO;;;QAAd;YACE,OAAO;gBACL,QAAQ,EAAE,4BAA4B;gBACtC,SAAS,EAAE;oBACT;wBACE,OAAO,EAAEC,sBAAe;wBACxB,WAAW,EAAE,uBAAuB;qBACrC;iBACF;aACF,CAAC;SACH;;oBAhBFC,aAAQ,SAAC;wBACR,OAAO,EAAE;4BACPC,mBAAY;yBACb;qBACF;;QAaD,mCAAC;KAjBD;;;;;;;;;;;;;;;;;;;;;;;;"}