{"version":3,"file":"daffodil-product.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://@daffodil/product/models/product.ts","ng://@daffodil/product/actions/product.actions.ts","ng://@daffodil/product/actions/product-grid.actions.ts","ng://@daffodil/product/actions/best-sellers.actions.ts","ng://@daffodil/product/actions/configurable-product.actions.ts","ng://@daffodil/product/actions/composite-product.actions.ts","ng://@daffodil/product/models/composite-product.ts","ng://@daffodil/product/models/composite-product-item.ts","ng://@daffodil/product/models/configurable-product.ts","ng://@daffodil/product/models/prices.ts","ng://@daffodil/product/models/composite-configuration-item.ts","ng://@daffodil/product/resolvers/product-page/product-page.resolver.ts","ng://@daffodil/product/reducers/product-grid/product-grid.reducer.ts","ng://@daffodil/product/reducers/product/product.reducer.ts","ng://@daffodil/product/reducers/best-sellers/best-sellers.reducer.ts","ng://@daffodil/product/reducers/product-entities/product-entities-reducer-adapter.ts","ng://@daffodil/product/reducers/product-entities/product-entities.reducer.ts","ng://@daffodil/product/reducers/configurable-product-entities/configurable-product-entities-reducer-adapter.ts","ng://@daffodil/product/reducers/configurable-product-entities/configurable-product-entities.reducer.ts","ng://@daffodil/product/reducers/composite-product-entities/composite-product-entities-reducer-adapter.ts","ng://@daffodil/product/reducers/composite-product-entities/composite-product-entities.reducer.ts","ng://@daffodil/product/reducers/product-reducers.ts","ng://@daffodil/product/reducers/composite-product-entities/composite-product-entity.ts","ng://@daffodil/product/selectors/product-feature.selector.ts","ng://@daffodil/product/selectors/product/product.selectors.ts","ng://@daffodil/product/selectors/product-entities/product-entities.selectors.ts","ng://@daffodil/product/selectors/best-sellers/best-sellers.selectors.ts","ng://@daffodil/product/selectors/product-grid/product-grid.selectors.ts","ng://@daffodil/product/selectors/configurable-product-entities/configurable-product-entities.selectors.ts","ng://@daffodil/product/selectors/configurable-product/configurable-product.selectors.ts","ng://@daffodil/product/selectors/composite-product-entities/composite-product-entities.selectors.ts","ng://@daffodil/product/selectors/composite-product/composite-product.selectors.ts","ng://@daffodil/product/selectors/all-selectors.selectors.ts","ng://@daffodil/product/drivers/injection-tokens/product-driver.token.ts","ng://@daffodil/product/effects/product-grid.effects.ts","ng://@daffodil/product/effects/product.effects.ts","ng://@daffodil/product/effects/best-seller.effects.ts","ng://@daffodil/product/product-state.module.ts","ng://@daffodil/product/product.module.ts","ng://@daffodil/product/drivers/shopify/product.service.ts","ng://@daffodil/product/drivers/shopify/product-driver.module.ts","ng://@daffodil/product/facades/product-grid/product-grid.facade.ts","ng://@daffodil/product/facades/product/product.facade.ts","ng://@daffodil/product/facades/configurable-product/configurable-product.facade.ts","ng://@daffodil/product/facades/helpers.ts","ng://@daffodil/product/facades/composite-product/composite-product.facade.ts","ng://@daffodil/product/facades/best-sellers/best-sellers.facade.ts","ng://@daffodil/product/drivers/magento/models/magento-product.ts","ng://@daffodil/product/drivers/magento/models/bundled-product.ts","ng://@daffodil/product/drivers/magento/models/configurable-product.ts","ng://@daffodil/product/drivers/magento/queries/fragments/bundled-product.ts","ng://@daffodil/product/drivers/magento/queries/fragments/simple-product.ts","ng://@daffodil/product/drivers/magento/queries/fragments/configurable-product.ts","ng://@daffodil/product/drivers/magento/queries/fragments/product.ts","ng://@daffodil/product/drivers/magento/queries/get-product.ts","ng://@daffodil/product/drivers/magento/queries/get-all-products.ts","ng://@daffodil/product/drivers/magento/transforms/simple-product-transformers.ts","ng://@daffodil/product/drivers/magento/transforms/bundled-product-transformers.ts","ng://@daffodil/product/drivers/magento/transforms/configurable-product-transformers.ts","ng://@daffodil/product/drivers/magento/transforms/product-transformers.ts","ng://@daffodil/product/drivers/magento/product.service.ts","ng://@daffodil/product/drivers/magento/product-driver.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { DaffProductImage } from './product-image';\n\nexport enum DaffProductTypeEnum {\n\tSimple = 'simple',\n\tComposite = 'composite',\n\tConfigurable = 'configurable'\n}\n\n/**\n * An interface for a product usable by the @daffodil/product library.\n */\nexport interface DaffProduct {\n\tid: string;\n\ttype?: DaffProductTypeEnum;\n\turl?: string;\n\tprice?: number;\n\tdiscount?: DaffProductDiscount;\n  name?: string;\n  brand?: string;\n  description?: string;\n\timages: DaffProductImage[];\n\tin_stock?: boolean;\n}\n\n/**\n * The discount for a product.\n */\nexport interface DaffProductDiscount {\n\tamount: number;\n\tpercent: number;\n}\n","import { Action } from '@ngrx/store';\nimport { DaffProduct } from '../models/product';\n\n/**\n * Action types for Product Actions.\n */\nexport enum DaffProductActionTypes {\n    ProductLoadAction = '[Product] Load Action',\n    ProductLoadSuccessAction = '[Product] Load Success Action',\n    ProductLoadFailureAction = '[Product] Load Failure Action',\n    UpdateQtyAction = '[Product] Update Qty Action',\n    ProductModifyAction = '[Product] Product Modify Action'\n}\n\n/**\n * Triggers a request for a Product.\n * \n * @param payload - Id of requested Product\n */\nexport class DaffProductLoad implements Action {\n  readonly type = DaffProductActionTypes.ProductLoadAction;\n\n  constructor(public payload: string) {}\n}\n\n/**\n * An action called when a request for a Product succeeded.\n * \n * @param payload - A Product\n */\nexport class DaffProductLoadSuccess<T extends DaffProduct = DaffProduct> implements Action {\n    readonly type = DaffProductActionTypes.ProductLoadSuccessAction;\n\n    constructor(public payload: T) {}\n}\n\n/**\n * An action called when a request for a Product failed.\n * \n * @param payload - An error message\n */\nexport class DaffProductLoadFailure implements Action {\n  readonly type = DaffProductActionTypes.ProductLoadFailureAction;\n\n  constructor(public payload: string) {}\n}\n\n/**\n * Update the qty of a product in an redux store.\n * \n * @param payload - The qty of the product.\n */\nexport class DaffProductUpdateQty implements Action {\n    readonly type = DaffProductActionTypes.UpdateQtyAction;\n\n    constructor(public payload: number) {}\n}\n\nexport type DaffProductActions<T extends DaffProduct = DaffProduct> = \n    | DaffProductLoad \n    | DaffProductLoadSuccess<T>\n    | DaffProductLoadFailure\n    | DaffProductUpdateQty;","import { Action } from '@ngrx/store';\n\nimport { DaffProduct } from '../models/product';\n\n/** \n * Action types for Product Grid Actions.\n*/\nexport enum DaffProductGridActionTypes {\n    ProductGridLoadAction = '[ProductGrid] Load Action',\n    ProductGridLoadSuccessAction = '[ProductGrid] Load Success Action',\n    ProductGridLoadFailureAction = '[ProductGrid] Load Failure Action',\n    ProductGridResetAction = '[ProductGrid] Reset Action'\n}\n\n/**\n * Triggers a request for an array of products.\n */\nexport class DaffProductGridLoad implements Action {\n  readonly type = DaffProductGridActionTypes.ProductGridLoadAction;\n\n  constructor() {}\n}\n\n/**\n * An action called when a request for of an array of products succeeded.\n * \n * @param payload - An array of Products\n */\nexport class DaffProductGridLoadSuccess<T extends DaffProduct = DaffProduct> implements Action {\n    readonly type = DaffProductGridActionTypes.ProductGridLoadSuccessAction;\n\n    constructor(public payload: T[]) {}\n}\n\n/**\n * An action called when a request for an array of products failed.\n * \n * @param payload - An error message\n */\nexport class DaffProductGridLoadFailure implements Action {\n  readonly type = DaffProductGridActionTypes.ProductGridLoadFailureAction;\n\n  constructor(public payload: string) {}\n}\n\n/**\n * Resets the state of the product grid redux store to its initial state.\n */\nexport class DaffProductGridReset implements Action {\n    readonly type = DaffProductGridActionTypes.ProductGridResetAction;\n\n    constructor() {}\n}\n\nexport type DaffProductGridActions<T extends DaffProduct = DaffProduct> = \n    | DaffProductGridLoad \n    | DaffProductGridLoadSuccess<T>\n    | DaffProductGridLoadFailure\n    | DaffProductGridReset;","import { Action } from '@ngrx/store';\n\nimport { DaffProduct } from '../models/product';\n\n/**\n * Action types for Best Seller Actions.\n */\nexport enum DaffBestSellersActionTypes {\n  BestSellersLoadAction = '[BestSellers] Load Action',\n  BestSellersLoadSuccessAction = '[BestSellers] Load Success Action',\n  BestSellersLoadFailureAction = '[BestSellers] Load Failure Action',\n  BestSellersResetAction = '[BestSellers] Reset Action'\n}\n\n/**\n * Triggers a request for best selling products.\n */\nexport class DaffBestSellersLoad implements Action {\n  readonly type = DaffBestSellersActionTypes.BestSellersLoadAction;\n\n  constructor() {}\n}\n\n/**\n * An action called when a request for best selling products succeeded.\n * \n * @param payload - An array of Products\n */\nexport class DaffBestSellersLoadSuccess<T extends DaffProduct = DaffProduct> implements Action {\n  readonly type = DaffBestSellersActionTypes.BestSellersLoadSuccessAction;\n\n  constructor(public payload: T[]) {}\n}\n\n/**\n * An action called when a request for best selling products failed.\n * \n * @param payload - An error message\n */\nexport class DaffBestSellersLoadFailure implements Action {\n  readonly type = DaffBestSellersActionTypes.BestSellersLoadFailureAction;\n\n  constructor(public payload: string) {}\n}\n\n/**\n * Resets the state of the best sellers redux store to its initial state.\n */\nexport class DaffBestSellersReset implements Action {\n  readonly type = DaffBestSellersActionTypes.BestSellersResetAction;\n\n  constructor() {}\n}\n\nexport type DaffBestSellersActions<T extends DaffProduct = DaffProduct> = \n    | DaffBestSellersLoad \n    | DaffBestSellersLoadSuccess<T>\n    | DaffBestSellersLoadFailure\n    | DaffBestSellersReset;\n    ","import { Action } from '@ngrx/store';\n\nimport { DaffConfigurableProduct } from '../models/configurable-product';\n\n/**\n * Action types for Configurable Product Actions.\n */\nexport enum DaffConfigurableProductActionTypes {\n\tConfigurableProductApplyAttributeAction = '[Configurable Product] Configurable Product Apply Attribute Action',\n\tConfigurableProductRemoveAttributeAction = '[Configurable Product] Configurable Product Remove Attribute Action',\n\tConfigurableProductToggleAttributeAction = '[Configurable Product] Configurable Product Toggle Attribute Action',\n}\n\n/**\n * Applies an attribute to a particular configurable product.\n * \n * @param id - Id of the Configurable Product\n * @param attributeId - Id of the attribute to be applied\n * @param attributeValue - Value of the attribute to be applied\n */\nexport class DaffConfigurableProductApplyAttribute<T extends DaffConfigurableProduct> implements Action {\n  readonly type = DaffConfigurableProductActionTypes.ConfigurableProductApplyAttributeAction;\n\n  constructor(public id: T['id'], public attributeId: string, public attributeValue: string) {}\n}\n\n/**\n * Removes an applied attribute from a particular configurable product.\n * \n * @param id - Id of the Configurable Product\n * @param attributeId - Id of the attribute to be removed\n */\nexport class DaffConfigurableProductRemoveAttribute<T extends DaffConfigurableProduct> implements Action {\n  readonly type = DaffConfigurableProductActionTypes.ConfigurableProductRemoveAttributeAction;\n\n  constructor(public id: T['id'], public attributeId: string) {}\n}\n\n/**\n * Toggles an attribute of a particular configurable product. If the attribute type of the configurable product already has \n * a different value than the one provided in the action, the attribute value in state will be overwritten by the value provided \n * in the action.\n * \n * @param id - Id of the Configurable Product\n * @param attributeId - Id of the attribute to be toggled\n * @param attributeValue - Value of the attribute to be toggled\n */\nexport class DaffConfigurableProductToggleAttribute<T extends DaffConfigurableProduct> implements Action {\n  readonly type = DaffConfigurableProductActionTypes.ConfigurableProductToggleAttributeAction;\n\n  constructor(public id: T['id'], public attributeId: string, public attributeValue: string) {}\n}\n\nexport type DaffConfigurableProductActions<T extends DaffConfigurableProduct = DaffConfigurableProduct> = \n    | DaffConfigurableProductApplyAttribute<T>\n    | DaffConfigurableProductRemoveAttribute<T>\n    | DaffConfigurableProductToggleAttribute<T>;","import { Action } from '@ngrx/store';\n\nimport { DaffCompositeProduct } from '../models/composite-product';\nimport { DaffCompositeProductItem, DaffCompositeProductItemOption } from '../models/composite-product-item';\n\n/**\n * Action types for Composite Product Actions.\n */\nexport enum DaffCompositeProductActionTypes {\n\tCompositeProductApplyOptionAction = '[Composite Product] Composite Product Apply Option Action'\n}\n\n/**\n * Applies a product option to a particular composite product.\n * \n * @param id - Id of the Composite Product\n * @param itemId - Id of the product item.\n * @param optionId - Id of the option of the product item that is chosen.\n */\nexport class DaffCompositeProductApplyOption<T extends DaffCompositeProduct> implements Action {\n  readonly type = DaffCompositeProductActionTypes.CompositeProductApplyOptionAction;\n\n  constructor(public id: T['id'], public itemId: DaffCompositeProductItem['id'], public optionId: DaffCompositeProductItemOption['id'], public qty?: number) {}\n}\n\nexport type DaffCompositeProductActions<T extends DaffCompositeProduct = DaffCompositeProduct> = \n\t| DaffCompositeProductApplyOption<T>;\n","import { DaffProduct } from './product';\nimport { DaffCompositeProductItem } from './composite-product-item';\n\n/**\n * A composite product is a group of products sold together. It includes one primary product and many accessory \"items\". \n * The composite product items are additional products the customer might want to purchase with the primary product, \n * and each item has a number of options from which the user can choose. Composite product items can be optional or required.\n * For example, a toolbox bundle might have a primary product of the toolbox. The items could be a hammer and a screw driver, \n * and the options for these items could be two different hammers and two different screwdrivers between which the customer could choose. \n * All of these items could have different prices/discounts/etc which would cause the composite products to have ranged prices.\n */\nexport interface DaffCompositeProduct extends DaffProduct {\n\titems: DaffCompositeProductItem[];\n}\n","import { DaffProduct } from './product';\n\n/**\n * An enum for whether a composite product item should be displayed as a radio or select input.\n */\nexport enum DaffCompositeProductItemInputEnum {\n\tselect = 'select',\n\tradio = 'radio'\n}\n\n/**\n * The composite product item describes one set of product options that the user can add to the composite product.\n * A composite product item can be required or optional. If it is required, an option _must_ be chosen in order to add the product to the cart.\n * If the item is optional, the product can be added to the cart without an option having been chosen.\n * For example, if a composite product is a toolbox bundle, a composite product item might be a screw driver, and the options contained in that\n * item might be a phillips head and a flathead. The customer could choose to add either a phillips head or a flathead to the\n * composite product, or neither if the item is optional.\n */\nexport interface DaffCompositeProductItem {\n\tid: number | string;\n\trequired: boolean;\n\ttitle: string;\n\tinput_type: DaffCompositeProductItemInputEnum;\n\toptions: DaffCompositeProductItemOption[];\n}\n\n/**\n * The composite product item option is a DaffProduct that can be added to a composite product.\n */\nexport interface DaffCompositeProductItemOption extends DaffProduct {\n\tid: string;\n\tname: string;\n\tprice: number;\n\tis_default: boolean;\n\tquantity: number;\n}\n","import { DaffSortable } from '@daffodil/core';\n\nimport { DaffProduct, DaffProductDiscount } from './product';\nimport { DaffProductImage } from './product-image';\n\n/**\n * A configurable product is a product with configurable attributes. The price of a configurable product may change based on \n * the attributes chosen, so a configurable product can have a price range. An example of a configurable product is a T-shirt.\n */\nexport interface DaffConfigurableProduct extends DaffProduct {\n\tconfigurableAttributes: DaffConfigurableProductAttribute[];\n\tvariants: DaffConfigurableProductVariant[];\n}\n\n/**\n * An attribute of the configurable product that the customer must choose to add the configurable product to the cart. \n * An example of an attribute would be size for clothing.\n */\nexport interface DaffConfigurableProductAttribute extends DaffSortable {\n\tcode:\tstring;\n\tlabel: string;\n\tvalues:\tDaffConfigurableProductOptionValue[];\n}\n\n/**\n * A variant is one version of the configurable product with all attributes chosen. Variants exist because not all versions of every configuration of \n * the product might be in stock. For example, a shirt might have a medium, red shirt and a small,\n * green shirt in stock, but no small, red shirts. In this case there would be two variants (mediumRed, smallGreen) rather than the maximum 4 variants \n * (smallRed, mediumRed, smallGreen, mediumGreen). This ensures the customer can't add a configurable product to the cart that is not\n * in stock. However, variants don't usually need to be considered by the frontend dev, because daffodil abstacts away the concept of variants into \n * an \"available attributes\" selector.\n */\nexport interface DaffConfigurableProductVariant {\n\tappliedAttributes: DaffProductVariantAttributesDictionary;\n\tid: string;\n\tprice: number;\n\tdiscount: DaffProductDiscount;\n\timage?: DaffProductImage;\n\tin_stock: boolean;\n}\n\n/**\n * The applied attributes for a particular product variant.\n */\nexport interface DaffProductVariantAttributesDictionary {\n\t[x: string]:  DaffConfigurableProductOptionValue['value'];\n}\n\n/**\n * The configurable option of a configurable product attribute. For example, this could be \"blue\" for the attribute \"color\" for a T-shirt.\n */\nexport interface DaffConfigurableProductOptionValue {\n\tvalue: string;\n\tlabel: string;\n\tswatch?: DaffSwatchOption;\n}\n\n/**\n * An optional field for the hex color code for DaffConfigurableProductOptionValues that need it.\n */\nexport interface DaffSwatchOption {\n\tvalue: string;\n\tthumbnail?: string;\n}\n","import { DaffProductDiscount } from './product';\n\nexport interface DaffProductPrices {\n\tdiscountedPrice: number;\n\tdiscount: DaffProductDiscount;\n\toriginalPrice: number;\n}\n\nexport interface DaffPriceRange {\n\tmaxPrice: DaffProductPrices;\n\tminPrice: DaffProductPrices;\n}\n","export interface DaffCompositeConfigurationItem {\n\tqty?: number;\n\tvalue?: string;\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core'\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router'\nimport { ofType } from '@ngrx/effects';\nimport { ActionsSubject, Store } from '@ngrx/store';\nimport { Observable, of } from 'rxjs'\nimport { mapTo, take } from 'rxjs/operators';\n\nimport { DaffProductActionTypes, DaffProductLoad } from '../../actions/product.actions';\nimport { DaffProductReducersState } from '../../reducers/public_api';\n\n/**\n * Resolves product data for product pages, and will only resolve the url after a product request succeeds or fails. This resolver expects a url\n * of the form `some/url/{id}` where `{id}` is the product id.\n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DaffProductPageResolver implements Resolve<Observable<boolean>> {\n  constructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate store: Store<DaffProductReducersState>,\n    private dispatcher: ActionsSubject,\n\t) {}\n\t\n\tresolve(route: ActivatedRouteSnapshot): Observable<boolean> {\n\t\tthis.store.dispatch(new DaffProductLoad(route.paramMap.get('id')));\n\n\t\treturn isPlatformBrowser(this.platformId) ? of(true) : this.dispatcher.pipe(\n\t\t\tofType(DaffProductActionTypes.ProductLoadSuccessAction, DaffProductActionTypes.ProductLoadFailureAction),\n\t\t\tmapTo(true),\n\t\t\ttake(1)\n\t\t);\n\t}\n}\n","import { DaffProductGridActionTypes, DaffProductGridActions } from '../../actions/product-grid.actions';\nimport { DaffProductGridReducerState } from './product-grid-reducer-state.interface';\nimport { DaffProduct } from '../../models/product';\n\n/**\n * Initial values of the product grid state.\n */\nexport const initialState: DaffProductGridReducerState<any> = {\n  products: [],\n  loading: false,\n  errors: []\n};\n\n/**\n * Reducer function that catches actions and changes/overwrites product grid state.\n * \n * @param state current State of the redux store\n * @param action a product grid action\n * @returns Product grid state\n */\nexport function daffProductGridReducer<T extends DaffProduct>(state = initialState, action: DaffProductGridActions<T>): DaffProductGridReducerState<T> {\n  switch (action.type) {\n    case DaffProductGridActionTypes.ProductGridLoadAction:\n      return {...state, loading: true};\n    case DaffProductGridActionTypes.ProductGridLoadSuccessAction:\n      return {...state, loading: false};\n    case DaffProductGridActionTypes.ProductGridLoadFailureAction:\n      return {...state, \n        loading: false, \n        errors: state.errors.concat(new Array(action.payload))\n      };\n    default:\n      return state;\n  }\n}\n","import { DaffProductReducerState } from './product-reducer-state.interface';\nimport { DaffProductActionTypes, DaffProductActions } from '../../actions/product.actions';\nimport { DaffProduct } from '../../models/product';\n\n/**\n * Initial values of the product state.\n */\nexport const initialState: DaffProductReducerState = {\n  selectedProductId: null,\n  qty: 1,\n  loading: false,\n  errors: []\n};\n\n/**\n * Reducer function that catches actions and changes/overwrites product state.\n * \n * @param state current State of the redux store\n * @param action a product action\n * @returns product state\n */\nexport function daffProductReducer<T extends DaffProduct>(state = initialState, action: DaffProductActions<T>): DaffProductReducerState {\n  switch (action.type) {\n    case DaffProductActionTypes.ProductLoadAction:\n      return {...state, loading: true, selectedProductId: action.payload};\n    case DaffProductActionTypes.ProductLoadSuccessAction:\n      return {...state, loading: false};\n    case DaffProductActionTypes.ProductLoadFailureAction:\n      return {...state, \n        loading: false, \n        errors: state.errors.concat(new Array(action.payload))\n      };\n    case DaffProductActionTypes.UpdateQtyAction:\n      return {...state, qty: action.payload}\n    default:\n      return state;\n  }\n}\n","import { DaffBestSellersActionTypes, DaffBestSellersActions } from '../../actions/best-sellers.actions';\nimport { DaffProduct } from '../../models/product';\nimport { DaffBestSellersReducerState } from './best-sellers-reducer-state.interface';\n\nexport const initialState: DaffBestSellersReducerState = {\n  productIds: [],\n  loading: false,\n  errors: []\n};\n\nexport const resetState: DaffBestSellersReducerState = Object.assign({}, initialState);\n\nexport function daffBestSellersReducer<T extends DaffProduct>(state = initialState, action: DaffBestSellersActions<T>): DaffBestSellersReducerState {\n  switch (action.type) {\n    case DaffBestSellersActionTypes.BestSellersLoadAction:\n      return {...state, loading: true};\n    case DaffBestSellersActionTypes.BestSellersLoadSuccessAction:\n      return {...state, loading: false, productIds: getIds<T>(action.payload)};\n    case DaffBestSellersActionTypes.BestSellersLoadFailureAction:\n      return {...state, \n        loading: false, \n        errors: state.errors.concat(new Array(action.payload))\n      };\n    case DaffBestSellersActionTypes.BestSellersResetAction:\n      return {\n        ...resetState\n      }\n    default:\n      return state;\n  }\n}\n\nfunction getIds<T extends DaffProduct>(products: T[]): string[] {\n  const ids: string[] = new Array();\n\n  products.forEach(product => {\n    ids.push(product.id)\n  });\n\n  return ids;\n}\n","import { EntityAdapter, createEntityAdapter } from '@ngrx/entity';\n\nimport { DaffProduct } from '../../models/product';\n\n/**\n * Product Adapter for changing/overwriting entity state.\n */\nexport const daffProductEntitiesAdapter = (() => {\n\tlet cache;\n  return <T extends DaffProduct>(): EntityAdapter<T> =>\n    cache = cache || createEntityAdapter<T>();\n})();","import { EntityState } from '@ngrx/entity';\n\nimport { DaffProductGridActionTypes, DaffProductGridActions } from '../../actions/product-grid.actions';\nimport { DaffProductActionTypes, DaffProductActions } from '../../actions/product.actions';\nimport { DaffBestSellersActionTypes, DaffBestSellersActions } from '../../actions/best-sellers.actions';\nimport { daffProductEntitiesAdapter } from './product-entities-reducer-adapter';\nimport { DaffProduct } from '../../models/product';\n\n/**\n * Reducer function that catches actions and changes/overwrites product entities state.\n * \n * @param state current State of the redux store\n * @param action ProductGrid, BestSellers, or Product actions\n * @returns Product entities state\n */\nexport function daffProductEntitiesReducer<T extends DaffProduct>(\n  state = daffProductEntitiesAdapter<T>().getInitialState(), \n  action: DaffProductGridActions<T> | DaffBestSellersActions<T> | DaffProductActions<T>): EntityState<T> {\n\tconst adapter = daffProductEntitiesAdapter<T>();\n  switch (action.type) {\n    case DaffProductGridActionTypes.ProductGridLoadSuccessAction:\n      return adapter.upsertMany(action.payload, state);\n    case DaffBestSellersActionTypes.BestSellersLoadSuccessAction:\n      return adapter.upsertMany(action.payload, state);\n    case DaffProductActionTypes.ProductLoadSuccessAction:\n      return adapter.upsertOne(\n        { \n          id: action.payload.id, \n          ...action.payload\n        },\n        state\n      );\n    case DaffProductGridActionTypes.ProductGridResetAction:\n      return adapter.removeAll(state);\n    default:\n      return state;\n  }\n}\n","import { EntityAdapter, createEntityAdapter } from '@ngrx/entity';\n\nimport { DaffConfigurableProductEntity } from './configurable-product-entity';\n\n/**\n * Configurable Product Applied Attributes Adapter for changing/overwriting entity state.\n */\nexport const daffConfigurableProductAppliedAttributesEntitiesAdapter = (() => {\n\tlet cache;\n  return (): EntityAdapter<DaffConfigurableProductEntity> =>\n    cache = cache || createEntityAdapter<DaffConfigurableProductEntity>();\n})();","import { EntityState } from '@ngrx/entity';\n\nimport { DaffProductGridActionTypes, DaffProductGridActions } from '../../actions/product-grid.actions';\nimport { DaffProductActionTypes, DaffProductActions } from '../../actions/product.actions';\nimport { DaffBestSellersActionTypes, DaffBestSellersActions } from '../../actions/best-sellers.actions';\nimport { daffConfigurableProductAppliedAttributesEntitiesAdapter } from './configurable-product-entities-reducer-adapter';\nimport { DaffProduct, DaffProductTypeEnum } from '../../models/product';\nimport { DaffConfigurableProductActions, DaffConfigurableProductActionTypes } from '../../actions/configurable-product.actions';\nimport { DaffConfigurableProduct } from '../../models/configurable-product';\nimport { DaffConfigurableProductEntity, DaffConfigurableProductEntityAttribute } from './configurable-product-entity';\n\n/**\n * Reducer function that catches actions and changes/overwrites product entities state.\n * \n * @param state current State of the redux store\n * @param action ProductGrid, BestSellers, Product, or Configurable Product actions\n * @returns Product entities state\n */\nexport function daffConfigurableProductEntitiesReducer<T extends DaffProduct, V extends DaffConfigurableProduct>(\n  state = daffConfigurableProductAppliedAttributesEntitiesAdapter().getInitialState(), \n  action: DaffProductGridActions<T> | DaffBestSellersActions<T> | DaffProductActions<T> | DaffConfigurableProductActions<V>): EntityState<DaffConfigurableProductEntity> {\n\tconst adapter = daffConfigurableProductAppliedAttributesEntitiesAdapter();\n  switch (action.type) {\n    case DaffProductGridActionTypes.ProductGridLoadSuccessAction:\n\t\tcase DaffBestSellersActionTypes.BestSellersLoadSuccessAction:\n\t\t\treturn adapter.upsertMany(\n\t\t\t\taction.payload\n\t\t\t\t\t.filter(product => product.type === DaffProductTypeEnum.Configurable)\n\t\t\t\t\t.map(buildConfigurableProductAppliedAttributesEntity), \n\t\t\t\tstate\n\t\t\t);\n    case DaffProductActionTypes.ProductLoadSuccessAction:\n\t\t\tif(action.payload.type === DaffProductTypeEnum.Configurable) {\n\t\t\t\treturn adapter.upsertOne(\n\t\t\t\t\tbuildConfigurableProductAppliedAttributesEntity(action.payload),\n\t\t\t\t\tstate\n\t\t\t\t);\n\t\t\t};\n\t\t\treturn state;\n\t\tcase DaffConfigurableProductActionTypes.ConfigurableProductApplyAttributeAction:\n\t\t\treturn adapter.upsertOne(\n\t\t\t\t{\n\t\t\t\t\tid: action.id,\n\t\t\t\t\tattributes: applyAttribute(state.entities[action.id].attributes, action.attributeId, action.attributeValue),\n\t\t\t\t},\n\t\t\t\tstate\n\t\t\t);\n\t\tcase DaffConfigurableProductActionTypes.ConfigurableProductRemoveAttributeAction:\n\t\t\treturn adapter.upsertOne(\n\t\t\t\t{\n\t\t\t\t\tid: action.id,\n\t\t\t\t\tattributes: removeAttribute(state.entities[action.id].attributes, action.attributeId)\n\t\t\t\t},\n\t\t\t\tstate\n\t\t\t);\n\t\tcase DaffConfigurableProductActionTypes.ConfigurableProductToggleAttributeAction:\n\t\t\treturn adapter.upsertOne(\n\t\t\t\t{\n\t\t\t\t\tid: action.id,\n\t\t\t\t\tattributes: isAttributeSelected(state.entities[action.id].attributes, action.attributeId, action.attributeValue) ?\n\t\t\t\t\t\tremoveAttribute(state.entities[action.id].attributes, action.attributeId) :\n\t\t\t\t\t\tapplyAttribute(state.entities[action.id].attributes, action.attributeId, action.attributeValue)\n\t\t\t\t},\n\t\t\t\tstate\n\t\t\t);\n    default:\n      return state;\n  }\n}\n\nfunction buildConfigurableProductAppliedAttributesEntity(product: DaffProduct): DaffConfigurableProductEntity {\n\treturn {\n\t\tid: product.id,\n\t\tattributes: []\n\t}\n}\n\nfunction applyAttribute(currentAttributes: DaffConfigurableProductEntityAttribute[], appliedAttributeCode: string, appliedAttributeValue: string): DaffConfigurableProductEntityAttribute[] {\n\tconst attributeIndex = currentAttributes.findIndex(attribute => attribute.code === appliedAttributeCode);\n\tconst retainedAttributes = attributeIndex > -1 ? currentAttributes.slice(0, attributeIndex) : currentAttributes;\n\n\treturn [\n\t\t...retainedAttributes,\n\t\t{\n\t\t\tcode: appliedAttributeCode,\n\t\t\tvalue: appliedAttributeValue\n\t\t}\n\t]\n}\n\nfunction removeAttribute(currentAttributes: DaffConfigurableProductEntityAttribute[], appliedAttributeCode: string): DaffConfigurableProductEntityAttribute[] {\n\tconst index = currentAttributes.findIndex(attribute => attribute.code === appliedAttributeCode);\n\n\treturn index > -1 ? currentAttributes.slice(0, index) : currentAttributes;\n}\n\nfunction isAttributeSelected(currentAttributes: DaffConfigurableProductEntityAttribute[], attributeCode: string, attributeValue: string): boolean {\n\tconst index = currentAttributes.findIndex(attribute => attribute.code === attributeCode);\n\n\treturn index > -1 && currentAttributes[index].value === attributeValue;\n}\n","import { EntityAdapter, createEntityAdapter } from '@ngrx/entity';\n\nimport { DaffCompositeProductEntity } from './composite-product-entity';\n\n/**\n * Composite Product Item Options Adapter for changing/overwriting entity state.\n */\nexport const daffCompositeProductAppliedOptionsEntitiesAdapter = (() => {\n\tlet cache;\n  return (): EntityAdapter<DaffCompositeProductEntity> =>\n    cache = cache || createEntityAdapter<DaffCompositeProductEntity>();\n})();\n","import { EntityState } from '@ngrx/entity';\n\nimport { DaffProductGridActionTypes, DaffProductGridActions } from '../../actions/product-grid.actions';\nimport { DaffProductActionTypes, DaffProductActions } from '../../actions/product.actions';\nimport { DaffBestSellersActionTypes, DaffBestSellersActions } from '../../actions/best-sellers.actions';\nimport { daffCompositeProductAppliedOptionsEntitiesAdapter } from './composite-product-entities-reducer-adapter';\nimport { DaffProduct, DaffProductTypeEnum } from '../../models/product';\nimport { DaffCompositeProductActions, DaffCompositeProductActionTypes } from '../../actions/composite-product.actions';\nimport { DaffCompositeProduct } from '../../models/composite-product';\nimport { DaffCompositeProductEntity } from './composite-product-entity';\nimport { DaffCompositeProductItem } from '../../models/composite-product-item';\nimport { DaffCompositeConfigurationItem } from '../../models/composite-configuration-item';\n\n/**\n * Reducer function that catches actions and changes/overwrites composite product entities state.\n * \n * @param state current State of the redux store\n * @param action ProductGrid, BestSellers, Product, or Composite Product actions\n * @returns Product entities state\n */\nexport function daffCompositeProductEntitiesReducer<T extends DaffProduct, V extends DaffCompositeProduct>(\n  state = daffCompositeProductAppliedOptionsEntitiesAdapter().getInitialState(), \n  action: DaffProductGridActions<T> | DaffBestSellersActions<T> | DaffProductActions<T> | DaffCompositeProductActions<V>): EntityState<DaffCompositeProductEntity> {\n\tconst adapter = daffCompositeProductAppliedOptionsEntitiesAdapter();\n  switch (action.type) {\n    case DaffProductGridActionTypes.ProductGridLoadSuccessAction:\n\t\tcase DaffBestSellersActionTypes.BestSellersLoadSuccessAction:\n\t\t\treturn adapter.upsertMany(\n\t\t\t\taction.payload\n\t\t\t\t\t.filter(product => product.type === DaffProductTypeEnum.Composite)\n\t\t\t\t\t.map(product => buildCompositeProductAppliedOptionsEntity(<V><unknown>product)), \n\t\t\t\tstate\n\t\t\t);\n    case DaffProductActionTypes.ProductLoadSuccessAction:\n\t\t\tif(action.payload.type === DaffProductTypeEnum.Composite) {\n\t\t\t\treturn adapter.upsertOne(\n\t\t\t\t\tbuildCompositeProductAppliedOptionsEntity(<V><unknown>action.payload),\n\t\t\t\t\tstate\n\t\t\t\t);\n\t\t\t};\n\t\t\treturn state;\n\t\tcase DaffCompositeProductActionTypes.CompositeProductApplyOptionAction:\n\t\t\treturn adapter.upsertOne(\n\t\t\t\t{\n\t\t\t\t\tid: action.id,\n\t\t\t\t\titems: {\n\t\t\t\t\t\t...state.entities[action.id].items,\n\t\t\t\t\t\t[action.itemId]: {\n\t\t\t\t\t\t\tvalue: action.optionId,\n\t\t\t\t\t\t\tqty: action.qty ? action.qty : 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstate\n\t\t\t);\n    default:\n      return state;\n  }\n}\n\nfunction buildCompositeProductAppliedOptionsEntity(product: DaffCompositeProduct): DaffCompositeProductEntity {\n\treturn {\n\t\tid: product.id,\n\t\titems: product.items.reduce((acc, item) => ({\n\t\t\t...acc,\n\t\t\t[item.id]: getDefaultOption(item)\n\t\t}), {})\n\t}\n}\n\n/**\n * Sets the default item option to the specified default option if it is in stock.\n * Does not set a default option if a default is not specified.\n * Does not set a default option but does set a default qty if the default is out of stock.\n * @param item a DaffCompositeProductItem\n */\nfunction getDefaultOption(item: DaffCompositeProductItem): DaffCompositeConfigurationItem {\n\tconst defaultOptionIndex = item.options.findIndex(option => option.is_default);\n\n\tif(defaultOptionIndex > -1) {\n\t\treturn {\n\t\t\tvalue: item.options[defaultOptionIndex].in_stock ? item.options[defaultOptionIndex].id : null,\n\t\t\tqty: item.options[defaultOptionIndex].quantity\n\t\t}\n\t} else {\n\t\treturn { value: null, qty: null };\n\t}\n}\n","import { daffProductGridReducer } from './product-grid/product-grid.reducer';\nimport { daffProductReducer } from './product/product.reducer';\nimport { daffBestSellersReducer } from './best-sellers/best-sellers.reducer';\nimport { daffProductEntitiesReducer } from './product-entities/product-entities.reducer';\nimport { daffConfigurableProductEntitiesReducer } from './configurable-product-entities/configurable-product-entities.reducer';\nimport { daffCompositeProductEntitiesReducer } from './composite-product-entities/composite-product-entities.reducer';\n\n/**\n * Returns state values from all product related reducers.\n */\nexport const daffProductReducers = {\n\tproducts: daffProductEntitiesReducer,\n\tproductGrid: daffProductGridReducer,\n\tproduct: daffProductReducer,\n\tbestSellers: daffBestSellersReducer,\n\tconfigurableProductAttributes: daffConfigurableProductEntitiesReducer,\n\tcompositeProductOptions: daffCompositeProductEntitiesReducer\n}\n","import { Dictionary } from '@ngrx/entity';\nimport { DaffCompositeConfigurationItem } from '../../models/composite-configuration-item';\n\nexport interface DaffCompositeProductEntity {\n\tid: string;\n\titems: Dictionary<DaffCompositeConfigurationItem>;\n}\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffProductReducersState } from '../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../models/product';\n\nexport interface DaffProductFeatureMemoizedSelector<T extends DaffProduct = DaffProduct> {\n\tselectProductState: MemoizedSelector<object, DaffProductReducersState<T>>;\n}\n\nexport const getDaffProductFeatureSelector = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffProductFeatureMemoizedSelector<T> => cache = cache \n\t\t? cache \n\t\t: { selectProductState: createFeatureSelector<DaffProductReducersState<T>>('product') };\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProductReducerState } from '../../reducers/product/product-reducer-state.interface';\nimport { DaffProduct } from '../../models/product';\n\nexport interface DaffProductPageMemoizedSelectors<T extends DaffProduct = DaffProduct> {\n\tselectSelectedProductState: MemoizedSelector<object, DaffProductReducerState>;\n\tselectSelectedProductId: MemoizedSelector<object, string>;\n\tselectSelectedProductQty: MemoizedSelector<object, number>;\n\tselectSelectedProductLoadingState: MemoizedSelector<object, boolean>;\n\tselectSelectedProduct: MemoizedSelector<object, T>;\n}\n\nconst createProductPageSelectors = <T extends DaffProduct>(): DaffProductPageMemoizedSelectors<T> => {\n\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\n\t/**\n\t * Selector for product state.\n\t */\n\tconst selectSelectedProductState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.product\n\t);\n\n\t/**\n\t * Selector for the selected product's ID.\n\t * @deprecated\n\t */\n\tconst selectSelectedProductId = createSelector(\n\t\tselectSelectedProductState,\n\t\t(state: DaffProductReducerState) => state.selectedProductId\n\t);\n\n\t/**\n\t * Selector for the quantity of the product.\n\t * @deprecated\n\t */\n\tconst selectSelectedProductQty = createSelector(\n\t\tselectSelectedProductState,\n\t\t(state: DaffProductReducerState) => state.qty\n\t);\n\n\t/**\n\t * Selector for the loading state of the selected product.\n\t */\n\tconst selectSelectedProductLoadingState = createSelector(\n\t\tselectSelectedProductState,\n\t\t(state: DaffProductReducerState) => state.loading\n\t);\n\n\t/**\n\t * Selects the selected product from product state and the selected product ID.\n\t * @deprecated use selectProduct entities selector instead.\n\t */\n\tconst selectSelectedProduct = createSelector(\n\t\tselectProductState,\n\t\tselectSelectedProductId,\n\t\t(state: DaffProductReducersState<T>, id: string) => state.products.entities[id]\n\t);\n\n\treturn { \n\t\tselectSelectedProductState,\n\t\tselectSelectedProductId,\n\t\tselectSelectedProductQty,\n\t\tselectSelectedProductLoadingState,\n\t\tselectSelectedProduct\n\t}\n}\n\nexport const getDaffProductPageSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffProductPageMemoizedSelectors<T> => cache = cache \n\t\t? cache \n\t\t: createProductPageSelectors<T>();\n})();\n","import { createSelector, MemoizedSelector, MemoizedSelectorWithProps } from '@ngrx/store';\nimport { EntityState } from '@ngrx/entity';\nimport { daffSubtract } from '@daffodil/core';\n\nimport { daffProductEntitiesAdapter } from '../../reducers/product-entities/product-entities-reducer-adapter';\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\n\nexport interface DaffProductEntitiesMemoizedSelectors<T extends DaffProduct = DaffProduct> {\n\tselectProductEntitiesState: MemoizedSelector<object, EntityState<T>>;\n\tselectProductIds: MemoizedSelector<object, EntityState<T>['ids']>;\n\tselectProductEntities: MemoizedSelector<object, EntityState<T>['entities']>;\n\tselectAllProducts: MemoizedSelector<object, T[]>;\n\tselectProductTotal: MemoizedSelector<object, number>;\n\tselectProduct: MemoizedSelectorWithProps<object, object, T>;\n\tselectProductPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectProductDiscountAmount: MemoizedSelectorWithProps<object, object, number>;\n\tselectProductDiscountedPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectProductDiscountPercent: MemoizedSelectorWithProps<object, object, number>;\n\tselectProductHasDiscount: MemoizedSelectorWithProps<object, object, boolean>;\n\tselectIsProductOutOfStock: MemoizedSelectorWithProps<object, object, boolean>;\n}\n\nconst createProductEntitiesSelectors = <T extends DaffProduct>(): DaffProductEntitiesMemoizedSelectors<T> => {\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\tconst adapterSelectors = daffProductEntitiesAdapter<T>().getSelectors();\n\t/**\n\t * Product Entities State\n\t */\n\tconst selectProductEntitiesState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.products\n\t);\n\n\t/**\n\t * Adapters created with @ngrx/entity generate\n\t * commonly used selector functions including\n\t * getting all ids in the record set, a dictionary\n\t * of the records by id, an array of records and\n\t * the total number of records. This reduces boilerplate\n\t * in selecting records from the entity state.\n\t */\n\t/**\n\t * Selector for product IDs.\n\t */\n\tconst selectProductIds = createSelector(\n\t\tselectProductEntitiesState,\n\t\tadapterSelectors.selectIds\n\t);\n\n\t/**\n\t * Selector for all product entities (see ngrx/entity).\n\t */\n\tconst selectProductEntities = createSelector(\n\t\tselectProductEntitiesState,\n\t\tadapterSelectors.selectEntities\n\t);\n\n\t/**\n\t * Selector for all products on state.\n\t */\n\tconst selectAllProducts = createSelector(\n\t\tselectProductEntitiesState,\n\t\tadapterSelectors.selectAll\n\t);\n\n\t/**\n\t * Selector for the total number of products.\n\t */\n\tconst selectProductTotal = createSelector(\n\t\tselectProductEntitiesState,\n\t\tadapterSelectors.selectTotal\n\t);\n\n\tconst selectProduct = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => products[props.id]\n\t);\n\n\tconst selectProductPrice = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\n\t\t\t//todo: use optional chaining when possible\n\t\t\treturn product && product.price || null;\n\t\t}\n\t)\n\n\tconst selectProductDiscountAmount = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\n\t\t\t//todo: use optional chaining when possible\n\t\t\treturn (product.discount && product.discount.amount) || 0;\n\t\t}\n\t);\n\n\tconst selectProductDiscountedPrice = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst price = selectProductPrice.projector(products, { id: props.id });\n\t\t\tconst discountAmount = selectProductDiscountAmount.projector(products, { id: props.id });\n\n\t\t\treturn daffSubtract(price, discountAmount);\n\t\t}\n\t)\n\n\t//todo use optional chaining when possible.\n\tconst selectProductDiscountPercent = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\n\t\t\treturn (product.discount && product.discount.percent) || 0;\n\t\t}\n\t);\n\n\tconst selectProductHasDiscount = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst discountAmount = selectProductDiscountAmount.projector(products, { id: props.id });\n\n\t\t\treturn !!discountAmount;\n\t\t}\n\t);\n\n\tconst selectIsProductOutOfStock = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\t\t\t\n\t\t\treturn product ? !product.in_stock : null;\n\t\t}\n\t);\n\n\treturn { \n\t\tselectProductEntitiesState,\n\t\tselectProductIds,\n\t\tselectProductEntities,\n\t\tselectAllProducts,\n\t\tselectProductTotal,\n\t\tselectProduct,\n\t\tselectProductPrice,\n\t\tselectProductDiscountAmount,\n\t\tselectProductDiscountedPrice,\n\t\tselectProductDiscountPercent,\n\t\tselectProductHasDiscount,\n\t\tselectIsProductOutOfStock\n\t}\n}\n\nexport const getDaffProductEntitiesSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffProductEntitiesMemoizedSelectors<T> => cache = cache \n\t\t? cache \n\t\t: createProductEntitiesSelectors<T>();\n})()\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffBestSellersReducerState } from '../../reducers/best-sellers/best-sellers-reducer-state.interface';\nimport { getDaffProductEntitiesSelectors } from '../product-entities/product-entities.selectors';\nimport { DaffProduct } from '../../models/product';\n\nexport interface DaffBestSellersMemoizedSelectors<T extends DaffProduct = DaffProduct> {\n\tselectBestSellersState: MemoizedSelector<object, DaffBestSellersReducerState>;\n\tselectBestSellersLoadingState: MemoizedSelector<object, boolean>;\n\tselectBestSellersIdsState: MemoizedSelector<object, string[]>;\n\tselectBestSellersProducts: MemoizedSelector<object, T[]>;\n}\n\nconst createBestSellersSelectors = <T extends DaffProduct>(): DaffBestSellersMemoizedSelectors<T> => {\n\tconst {\n\t\tselectAllProducts\n\t} = getDaffProductEntitiesSelectors<T>();\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\t/**\n\t * Selector for Best Seller State\n\t */\n\tconst selectBestSellersState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.bestSellers\n\t);\n\n\t/**\n\t * Selector for the loading state of best selling products.\n\t */\n\tconst selectBestSellersLoadingState = createSelector(\n\t\tselectBestSellersState,\n\t\t(state: DaffBestSellersReducerState) => state.loading\n\t);\n\n\t/**\n\t * Selector for the IDs of best selling products.\n\t */\n\tconst selectBestSellersIdsState = createSelector(\n\t\tselectBestSellersState,\n\t\t(state: DaffBestSellersReducerState) => state.productIds\n\t);\n\n\t/**\n\t * Selector for the best selling products.\n\t */\n\tconst selectBestSellersProducts = createSelector(\n\t\tselectBestSellersIdsState,\n\t\tselectAllProducts,\n\t\t(ids: string[], products: T[]) => products.filter(product => ids.indexOf(product.id) > -1)\n\t)\n\n\treturn { \n\t\tselectBestSellersState,\n\t\tselectBestSellersLoadingState,\n\t\tselectBestSellersIdsState,\n\t\tselectBestSellersProducts\n\t}\n}\n\nexport const getDaffBestSellersSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffBestSellersMemoizedSelectors<T> => cache = cache \n\t\t? cache \n\t\t: createBestSellersSelectors<T>();\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffProductGridReducerState } from '../../reducers/product-grid/product-grid-reducer-state.interface';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProduct } from '../../models/product';\n\nexport interface DaffProductGridMemoizedSelectors<T extends DaffProduct = DaffProduct> {\n\tselectProductGridState: MemoizedSelector<object, DaffProductGridReducerState<T>>;\n\tselectProductGridLoadingState: MemoizedSelector<object, boolean>;\n}\n\nconst createProductGridSelectors = <T extends DaffProduct>(): DaffProductGridMemoizedSelectors<T> => {\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\t/**\n\t * Selector for Product Grid state.\n\t */\n\tconst selectProductGridState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.productGrid\n\t);\n\n\t/**\n\t * Selector for product grid loading state.\n\t */\n\tconst selectProductGridLoadingState = createSelector(\n\t\tselectProductGridState,\n\t\t(state: DaffProductGridReducerState<T>) => state.loading\n\t);\n\n\treturn { \n\t\tselectProductGridState,\n\t\tselectProductGridLoadingState\n\t}\n}\n\nexport const getDaffProductGridSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffProductGridMemoizedSelectors<T> => cache = cache \n\t\t? cache \n\t\t: createProductGridSelectors<T>();\n})();\n","import { createSelector, MemoizedSelector, MemoizedSelectorWithProps } from '@ngrx/store';\nimport { EntityState, Dictionary } from '@ngrx/entity';\n\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\nimport { daffConfigurableProductAppliedAttributesEntitiesAdapter } from '../../reducers/configurable-product-entities/configurable-product-entities-reducer-adapter';\nimport { DaffConfigurableProductEntity, DaffConfigurableProductEntityAttribute } from '../../reducers/configurable-product-entities/configurable-product-entity';\n\nexport interface DaffConfigurableProductEntitiesMemoizedSelectors {\n\tselectConfigurableProductAppliedAttributesEntitiesState: MemoizedSelector<object, EntityState<DaffConfigurableProductEntity>>;\n\tselectConfigurableProductIds: MemoizedSelector<object, EntityState<DaffConfigurableProductEntity>['ids']>;\n\tselectConfigurableProductAppliedAttributesEntities: MemoizedSelector<object, EntityState<DaffConfigurableProductEntity>['entities']>;\n\tselectConfigurableProductTotal: MemoizedSelector<object, number>;\n\tselectConfigurableProductAppliedAttributes: MemoizedSelectorWithProps<object, object, DaffConfigurableProductEntityAttribute[]>;\n\tselectConfigurableProductAppliedAttributesAsDictionary: MemoizedSelectorWithProps<object, object, Dictionary<string>>;\n}\n\nconst createConfigurableProductAppliedAttributesEntitiesSelectors = <T extends DaffProduct>(): DaffConfigurableProductEntitiesMemoizedSelectors => {\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\tconst adapterSelectors = daffConfigurableProductAppliedAttributesEntitiesAdapter().getSelectors();\n\t/**\n\t * Configurable Product Entities State\n\t */\n\tconst selectConfigurableProductAppliedAttributesEntitiesState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.configurableProductAttributes\n\t);\n\n\t/**\n\t * Selector for configurable product IDs.\n\t */\n\tconst selectConfigurableProductIds = createSelector(\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\tadapterSelectors.selectIds\n\t);\n\n\t/**\n\t * Selector for all configurable product applied attributes as entities (see ngrx/entity).\n\t */\n\tconst selectConfigurableProductAppliedAttributesEntities = createSelector(\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\tadapterSelectors.selectEntities\n\t);\n\n\t/**\n\t * Selector for the total number of configurable products.\n\t */\n\tconst selectConfigurableProductTotal = createSelector(\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\tadapterSelectors.selectTotal\n\t);\n\n\t/**\n\t * Selector for the applied attributes of a particular configurable product.\n\t */\n\tconst selectConfigurableProductAppliedAttributes = createSelector(\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, props) => products.entities[props.id].attributes\n\t);\n\n\tconst selectConfigurableProductAppliedAttributesAsDictionary = createSelector(\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, props) => selectConfigurableProductAppliedAttributes.projector(products, { id: props.id }).reduce((acc, attribute) => ({\n\t\t\t...acc,\n\t\t\t[attribute.code]: attribute.value\n\t\t}), {})\n\t)\n\n\treturn { \n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\tselectConfigurableProductIds,\n\t\tselectConfigurableProductAppliedAttributesEntities,\n\t\tselectConfigurableProductTotal,\n\t\tselectConfigurableProductAppliedAttributes,\n\t\tselectConfigurableProductAppliedAttributesAsDictionary\n\t}\n}\n\nexport const getDaffConfigurableProductEntitiesSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffConfigurableProductEntitiesMemoizedSelectors => cache = cache \n\t\t? cache \n\t\t: createConfigurableProductAppliedAttributesEntitiesSelectors<T>();\n})()\n","import { createSelector, MemoizedSelectorWithProps } from '@ngrx/store';\n\nimport { daffSubtract } from '@daffodil/core';\n\nimport { DaffProductTypeEnum } from '../../models/product';\nimport { Dictionary } from '@ngrx/entity';\nimport { getDaffConfigurableProductEntitiesSelectors } from '../configurable-product-entities/configurable-product-entities.selectors';\nimport { getDaffProductEntitiesSelectors } from '../product-entities/product-entities.selectors';\nimport { DaffConfigurableProductVariant, DaffConfigurableProduct, DaffConfigurableProductAttribute } from '../../models/configurable-product';\nimport { DaffConfigurableProductEntityAttribute } from '../../reducers/configurable-product-entities/configurable-product-entity';\n\nexport interface DaffConfigurableProductMemoizedSelectors {\n\tselectAllConfigurableProductAttributes: MemoizedSelectorWithProps<object, object, Dictionary<string[]>>;\n\tselectAllConfigurableProductVariants: MemoizedSelectorWithProps<object, object, DaffConfigurableProductVariant[]>;\n\tselectMatchingConfigurableProductVariants: MemoizedSelectorWithProps<object, object, DaffConfigurableProductVariant[]>;\n\tselectConfigurableProductPrices: MemoizedSelectorWithProps<object, object, number[]>;\n\tselectConfigurableProductDiscountedPrices: MemoizedSelectorWithProps<object, object, number[]>;\n\tselectConfigurableProductPercentDiscounts: MemoizedSelectorWithProps<object, object, number[]>;\n\tselectConfigurableProductHasDiscount: MemoizedSelectorWithProps<object, object, boolean>;\n\tselectConfigurableProductMinimumPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectConfigurableProductMaximumPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectConfigurableProductMinimumDiscountedPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectConfigurableProductMaximumDiscountedPrice: MemoizedSelectorWithProps<object, object, number>;\n\tselectConfigurableProductMinimumPercentDiscount: MemoizedSelectorWithProps<object, object, number>;\n\tselectConfigurableProductMaximumPercentDiscount: MemoizedSelectorWithProps<object, object, number>;\n\tisConfigurablePriceRanged: MemoizedSelectorWithProps<object, object, boolean>;\n\tselectSelectableConfigurableProductAttributes: MemoizedSelectorWithProps<object, object, Dictionary<string[]>>;\n}\n\nconst createConfigurableProductSelectors = (): DaffConfigurableProductMemoizedSelectors => {\n\n\tconst {\n\t\tselectConfigurableProductAppliedAttributes,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState\n\t} = getDaffConfigurableProductEntitiesSelectors();\n\n\tconst {\n\t\tselectProductEntities,\n\t\tselectProduct\n\t} = getDaffProductEntitiesSelectors();\n\n\t/**\n\t * Selector for all variants of the product.\n\t */\n\tconst selectAllConfigurableProductVariants = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = <DaffConfigurableProduct>selectProduct.projector(products, { id: props.id });\n\t\t\tif(!product || product.type !== DaffProductTypeEnum.Configurable) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn product.variants;\n\t\t}\n\t);\n\n\t/**\n\t * Selector for the variants of the product that match the currently applied attributes.\n\t */\n\tconst selectMatchingConfigurableProductVariants = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\tconst product = <DaffConfigurableProduct>selectProduct.projector(products, { id: props.id });\n\t\t\tif(!product || product.type !== DaffProductTypeEnum.Configurable) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst appliedAttributes = selectConfigurableProductAppliedAttributes.projector(appliedAttributesEntities, { id: props.id });\n\t\t\treturn product.variants.filter(variant => isVariantAvailable(appliedAttributes, variant))\n\t\t}\n\t);\n\n\t/**\n\t * Selector for the range of price for current configuration of the configurable product.\n\t */\n\tconst selectConfigurableProductPrices = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\treturn selectMatchingConfigurableProductVariants.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t\t\t.map(variant => variant.price);\n\t\t}\n\t);\n\n\t/**\n\t * Selector for the range of discounts for current configuration of the configurable product.\n\t */\n\tconst selectConfigurableProductDiscountedPrices = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\treturn selectMatchingConfigurableProductVariants.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t\t\t.map(variant => variant.discount ? daffSubtract(variant.price, variant.discount.amount) : variant.price);\n\t\t}\n\t);\n\n\t/**\n\t * Selector for the range of percent discounts for current configuration of the configurable product.\n\t */\n\tconst selectConfigurableProductPercentDiscounts = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\treturn selectMatchingConfigurableProductVariants.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t\t\t.map(variant => variant.discount && variant.discount.percent);\n\t\t}\n\t);\n\n\t/**\n\t * Selector that determines whether any of the variants for the current configuration of the configurable product has a discount.\n\t */\n\tconst selectConfigurableProductHasDiscount = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\treturn selectMatchingConfigurableProductVariants.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t\t\t.reduce((acc, variant) => acc || (variant.discount && variant.discount.amount > 0), false);\n\t\t}\n\t)\n\n\t/**\n\t * Selector for the minimum price in the range of configurable product variant prices.\n\t */\n\tconst selectConfigurableProductMinimumPrice = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMinimumPrice(\n\t\t\tselectConfigurableProductPrices.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for the maximum price in the range of configurable product variant prices.\n\t */\n\tconst selectConfigurableProductMaximumPrice = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMaximumPrice(\n\t\t\tselectConfigurableProductPrices.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for the minimum discounted price in the range of configurable product variants.\n\t */\n\tconst selectConfigurableProductMinimumDiscountedPrice = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMinimumPrice(\n\t\t\tselectConfigurableProductDiscountedPrices.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for the maximum discounted price in the range of configurable product variants.\n\t */\n\tconst selectConfigurableProductMaximumDiscountedPrice = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMaximumPrice(\n\t\t\tselectConfigurableProductDiscountedPrices.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for the minimum percent discount in the range of configurable product variants.\n\t */\n\tconst selectConfigurableProductMinimumPercentDiscount = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMinimumPrice(\n\t\t\tselectConfigurableProductPercentDiscounts.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for the maximum percent discount in the range of configurable product variants.\n\t */\n\tconst selectConfigurableProductMaximumPercentDiscount = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => getMaximumPrice(\n\t\t\tselectConfigurableProductPercentDiscounts.projector(products, appliedAttributesEntities, { id: props.id })\n\t\t)\n\t)\n\n\t/**\n\t * Selector for whether the configurable product variant prices have been narrowed to a single price.\n\t */\n\tconst isConfigurablePriceRanged = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\tconst minPrice = selectConfigurableProductMinimumPrice.projector(products, appliedAttributesEntities, { id: props.id });\n\t\t\tconst maxPrice = selectConfigurableProductMaximumPrice.projector(products, appliedAttributesEntities, { id: props.id });\n\t\t\treturn minPrice !== maxPrice;\n\t\t}\n\t)\n\n\tconst selectAllConfigurableProductAttributes = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = <DaffConfigurableProduct>selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Configurable) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\treturn product.configurableAttributes.reduce((acc, attribute) => ({\n\t\t\t\t...acc,\n\t\t\t\t[attribute.code]: attribute.values.map(value => value.value)\n\t\t\t}), {});\n\t\t}\n\t);\n\n\t/**\n\t * Selector for selectable configurable product attributes derived from the remaining variants and the order of currently applied attributes.\n\t * The remaining variants of the product are derived from the currently applied attributes.\n\t */\n\tconst selectSelectableConfigurableProductAttributes = createSelector(\n\t\tselectProductEntities,\n\t\tselectConfigurableProductAppliedAttributesEntitiesState,\n\t\t(products, appliedAttributesEntities, props) => {\n\t\t\tconst product = <DaffConfigurableProduct>selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Configurable) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst appliedAttributes: DaffConfigurableProductEntityAttribute[] = selectConfigurableProductAppliedAttributes.projector(appliedAttributesEntities, { id: props.id });\n\t\t\t\n\t\t\tconst selectableAttributes = initializeSelectableAttributes(product.configurableAttributes);\n\n\t\t\t// Set which values of applied attribute codes should be set as selectable based on the order that they were selected\n\t\t\tconst matchedVariants = appliedAttributes.reduce((matchingVariants, appliedAttribute, i) => {\n\t\t\t\tconst filteredVariants = matchingVariants.filter(variant => isVariantAvailable(appliedAttributes.slice(0, i), variant));\n\n\t\t\t\tselectableAttributes[appliedAttribute.code] = getSelectableAttributesFromVariants(selectableAttributes, filteredVariants, appliedAttribute.code);\n\n\t\t\t\treturn filteredVariants\n\t\t\t}, product.variants).filter(variant =>\n\t\t\t\tisVariantAvailable(appliedAttributes, variant)\n\t\t\t);\n\n\t\t\t// Set which values of the unapplied attribute codes should be set as selectable based on the matching variants of all\n\t\t\t// applied attributes.\n\t\t\tproduct.configurableAttributes.forEach(attribute => {\n\t\t\t\tif (!selectableAttributes[attribute.code].length) {\n\t\t\t\t\tselectableAttributes[attribute.code] = getSelectableAttributesFromVariants(selectableAttributes, matchedVariants, attribute.code);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn selectableAttributes;\n\t\t}\n\t);\n\n\treturn { \n\t\tselectAllConfigurableProductAttributes,\n\t\tselectAllConfigurableProductVariants,\n\t\tselectConfigurableProductPrices,\n\t\tselectConfigurableProductDiscountedPrices,\n\t\tselectConfigurableProductPercentDiscounts,\n\t\tselectConfigurableProductHasDiscount,\n\t\tselectConfigurableProductMinimumPrice,\n\t\tselectConfigurableProductMaximumPrice,\n\t\tselectConfigurableProductMinimumDiscountedPrice,\n\t\tselectConfigurableProductMaximumDiscountedPrice,\n\t\tselectConfigurableProductMinimumPercentDiscount,\n\t\tselectConfigurableProductMaximumPercentDiscount,\n\t\tisConfigurablePriceRanged,\n\t\tselectMatchingConfigurableProductVariants,\n\t\tselectSelectableConfigurableProductAttributes\n\t}\n}\n\nfunction getSelectableAttributesFromVariants(selectableAttributes: Dictionary<string[]>, variants: DaffConfigurableProductVariant[], code: string) {\n  return variants.reduce((selectedAttributes, variant) =>\n    isVariantAttributeMarkedAsSelectable(selectedAttributes, variant.appliedAttributes[code])\n      ? selectedAttributes\n      : [\n        ...selectedAttributes,\n        variant.appliedAttributes[code]\n      ],\n    selectableAttributes[code]\n  )\n}\n\nexport const getDaffConfigurableProductSelectors = (() => {\n\tlet cache;\n\treturn (): DaffConfigurableProductMemoizedSelectors => cache = cache \n\t\t? cache \n\t\t: createConfigurableProductSelectors();\n})();\n\nfunction isVariantAvailable(\n\tappliedAttributes: DaffConfigurableProductEntityAttribute[], \n\tvariant: DaffConfigurableProductVariant\n): boolean {\n\treturn variant.in_stock && \n\t\tappliedAttributes.reduce((acc, attribute) => \n\t\t\tacc && attribute.value === variant.appliedAttributes[attribute.code],\n\t\t\ttrue\n\t\t)\n}\n\nfunction getMinimumPrice(prices: number[]): number {\n\treturn prices.reduce(\n\t\t(acc, price) => price < acc ? price : acc,\n\t\tprices[0]\n\t);\n}\n\nfunction getMaximumPrice(prices: number[]): number {\n\treturn prices.reduce(\n\t\t(acc, price) => price > acc ? price : acc,\n\t\tprices[0]\n\t);\n}\n\nfunction initializeSelectableAttributes(attributes: DaffConfigurableProductAttribute[]): Dictionary<string[]> {\n\treturn attributes.reduce((acc, attribute) => ({\n\t\t...acc,\n\t\t[attribute.code]: []\n\t}), {});\n}\n\nfunction isVariantAttributeMarkedAsSelectable(attributeArray: string[], variantValue: string) {\n\treturn attributeArray.indexOf(variantValue) > -1\n}\n","import { createSelector, MemoizedSelector, MemoizedSelectorWithProps } from '@ngrx/store';\nimport { EntityState, Dictionary } from '@ngrx/entity';\n\nimport { getDaffProductFeatureSelector } from '../product-feature.selector';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct, DaffProductTypeEnum } from '../../models/product';\nimport { daffCompositeProductAppliedOptionsEntitiesAdapter } from '../../reducers/composite-product-entities/composite-product-entities-reducer-adapter';\nimport { DaffCompositeProductEntity } from '../../reducers/composite-product-entities/composite-product-entity';\nimport { getDaffProductEntitiesSelectors } from '../product-entities/product-entities.selectors';\nimport { DaffCompositeProduct } from '../../models/composite-product';\nimport { DaffCompositeProductItemOption, DaffCompositeProductItem } from '../../models/composite-product-item';\n\nexport interface DaffCompositeProductEntitiesMemoizedSelectors {\n\tselectCompositeProductAppliedOptionsEntitiesState: MemoizedSelector<object, EntityState<DaffCompositeProductEntity>>;\n\tselectCompositeProductIds: MemoizedSelector<object, EntityState<DaffCompositeProductEntity>['ids']>;\n\tselectCompositeProductAppliedOptionsEntities: MemoizedSelector<object, EntityState<DaffCompositeProductEntity>['entities']>;\n\tselectCompositeProductTotal: MemoizedSelector<object, number>;\n\tselectCompositeProductAppliedOptions: MemoizedSelectorWithProps<object, object, Dictionary<DaffCompositeProductItemOption>>;\n\tselectIsCompositeProductItemRequired: MemoizedSelectorWithProps<object, { id: DaffCompositeProduct['id'], item_id: DaffCompositeProductItem['id']}, boolean>;\n}\n\nconst createCompositeProductAppliedOptionsEntitiesSelectors = <T extends DaffProduct>(): DaffCompositeProductEntitiesMemoizedSelectors => {\n\tconst {\n\t\tselectProductState\n\t} = getDaffProductFeatureSelector<T>();\n\tconst {\n\t\tselectProductEntities,\n\t\tselectProduct,\n\t} = getDaffProductEntitiesSelectors();\n\tconst adapterSelectors = daffCompositeProductAppliedOptionsEntitiesAdapter().getSelectors();\n\t/**\n\t * Composite Product Entities State\n\t */\n\tconst selectCompositeProductAppliedOptionsEntitiesState = createSelector(\n\t\tselectProductState,\n\t\t(state: DaffProductReducersState<T>) => state.compositeProductOptions\n\t);\n\n\t/**\n\t * Selector for composite product IDs.\n\t */\n\tconst selectCompositeProductIds = createSelector(\n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\tadapterSelectors.selectIds\n\t);\n\n\t/**\n\t * Selector for all composite product applied attributes as entities (see ngrx/entity).\n\t */\n\tconst selectCompositeProductAppliedOptionsEntities = createSelector(\n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\tadapterSelectors.selectEntities\n\t);\n\n\t/**\n\t * Selector for the total number of composite products.\n\t */\n\tconst selectCompositeProductTotal = createSelector(\n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\tadapterSelectors.selectTotal\n\t);\n\n\t/**\n\t * Selector for the applied attributes of a particular composite product.\n\t */\n\tconst selectCompositeProductAppliedOptions = createSelector(\n\t\tselectProductEntities,\n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\t(products, appliedOptions, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Composite) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn (<DaffCompositeProduct>product).items.reduce((acc, item) => ({\n\t\t\t\t\t...acc,\n\t\t\t\t\t[item.id]: appliedOptions.entities[product.id].items[item.id].value ? {\n\t\t\t\t\t\t...item.options.find(option => option.id === appliedOptions.entities[product.id].items[item.id].value),\n\t\t\t\t\t\tquantity: appliedOptions.entities[product.id].items[item.id].qty\n\t\t\t\t\t} : null\n\t\t\t}), {})\n\t\t}\n\t);\n\n\tconst selectIsCompositeProductItemRequired = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Composite) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst productItem = (<DaffCompositeProduct>product).items.find(item => item.id === props.item_id);\n\n\t\t\treturn productItem ? productItem.required : null\n\t\t}\n\t)\n\n\treturn { \n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\tselectCompositeProductIds,\n\t\tselectCompositeProductAppliedOptionsEntities,\n\t\tselectCompositeProductTotal,\n\t\tselectCompositeProductAppliedOptions,\n\t\tselectIsCompositeProductItemRequired\n\t}\n}\n\nexport const getDaffCompositeProductEntitiesSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffProduct>(): DaffCompositeProductEntitiesMemoizedSelectors => cache = cache \n\t\t? cache \n\t\t: createCompositeProductAppliedOptionsEntitiesSelectors<T>();\n})()\n","import { createSelector, MemoizedSelectorWithProps } from '@ngrx/store';\nimport { Dictionary } from '@ngrx/entity';\n\nimport { daffAdd, daffMultiply, daffSubtract } from '@daffodil/core';\n\nimport { DaffProduct, DaffProductTypeEnum } from '../../models/product';\nimport { getDaffCompositeProductEntitiesSelectors } from '../composite-product-entities/composite-product-entities.selectors';\nimport { getDaffProductEntitiesSelectors } from '../product-entities/product-entities.selectors';\nimport { DaffCompositeProduct } from '../../models/composite-product';\nimport { DaffCompositeProductItem, DaffCompositeProductItemOption } from '../../models/composite-product-item';\nimport { DaffProductPrices, DaffPriceRange } from '../../models/prices';\nimport { DaffCompositeConfigurationItem } from '../../models/composite-configuration-item';\n\nexport interface DaffCompositeProductMemoizedSelectors {\n\t/**\n\t * Get a DaffPriceRange for a composite product based on the configuration provided excluding unselected, optional item prices.\n\t */\n\tselectCompositeProductRequiredItemPricesForConfiguration: MemoizedSelectorWithProps<object, { id: string, configuration?: Dictionary<DaffCompositeConfigurationItem> }, DaffPriceRange>;\n\t/**\n\t * Get the broadest possible DaffPriceRange for a composite product based on the configuration provided including optional item prices.\n\t */\n\tselectCompositeProductOptionalItemPricesForConfiguration: MemoizedSelectorWithProps<object, { id: string, configuration?: Dictionary<DaffCompositeConfigurationItem> }, DaffPriceRange>;\n\t/**\n\t * Get the DaffPriceRange for a composite product based on the current configuration of selected item options in redux state and\n\t * excluding unselected, optional item prices.\n\t */\n\tselectCompositeProductPricesAsCurrentlyConfigured: MemoizedSelectorWithProps<object, { id: string }, DaffPriceRange>;\n}\n\nconst createCompositeProductSelectors = (): DaffCompositeProductMemoizedSelectors => {\n\n\tconst {\n\t\tselectProductEntities,\n\t\tselectProduct\n\t} = getDaffProductEntitiesSelectors();\n\n\tconst {\n\t\tselectCompositeProductAppliedOptionsEntitiesState\n\t} = getDaffCompositeProductEntitiesSelectors();\n\n\tconst selectCompositeProductRequiredItemPricesForConfiguration = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Composite) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst appliedOptions = props.configuration ? getAppliedOptionsForConfiguration(<DaffCompositeProduct>product, props.configuration) : {};\n\t\t\treturn {\n\t\t\t\tminPrice: getMinPricesForConfiguration(<DaffCompositeProduct>product, appliedOptions),\n\t\t\t\tmaxPrice: getMaxPricesForConfiguration(<DaffCompositeProduct>product, appliedOptions)\n\t\t\t}\n\t\t}\n\t);\n\n\tconst selectCompositeProductOptionalItemPricesForConfiguration = createSelector(\n\t\tselectProductEntities,\n\t\t(products, props) => {\n\t\t\tconst product = selectProduct.projector(products, { id: props.id });\n\t\t\tif(product.type !== DaffProductTypeEnum.Composite) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst appliedOptions = props.configuration ? getAppliedOptionsForConfiguration(<DaffCompositeProduct>product, props.configuration) : {};\n\t\t\treturn {\n\t\t\t\tminPrice: getMinPricesForConfiguration(<DaffCompositeProduct>product, appliedOptions),\n\t\t\t\tmaxPrice: getMaxPricesForConfigurationIncludingOptionalItems(<DaffCompositeProduct>product, appliedOptions)\n\t\t\t}\n\t\t}\n\t);\n\n\tconst selectCompositeProductPricesAsCurrentlyConfigured = createSelector(\n\t\tselectProductEntities,\n\t\tselectCompositeProductAppliedOptionsEntitiesState,\n\t\t//todo use optional chaining when possible\n\t\t(products, appliedOptionsEntities, props) => selectCompositeProductRequiredItemPricesForConfiguration.projector(products, {\n\t\t\tid: props.id, \n\t\t\tconfiguration: appliedOptionsEntities.entities[props.id] ? appliedOptionsEntities.entities[props.id].items : null\n\t\t})\n\t);\n\n\treturn { \n\t\tselectCompositeProductRequiredItemPricesForConfiguration,\n\t\tselectCompositeProductOptionalItemPricesForConfiguration,\n\t\tselectCompositeProductPricesAsCurrentlyConfigured\n\t}\n}\n\nexport const getDaffCompositeProductSelectors = (() => {\n\tlet cache;\n\treturn (): DaffCompositeProductMemoizedSelectors => cache = cache \n\t\t? cache \n\t\t: createCompositeProductSelectors();\n})();\n\n/**\n * The minimum price of an item is zero if the item is optional.\n * @param item DaffCompositeProductItem\n */\nfunction getMinimumRequiredCompositeItemPrice(item: DaffCompositeProductItem, qty: number): number {\n\treturn item.required ? daffMultiply(Math.min(...item.options.map(option => option.price)), qty) : 0;\n}\n\n/**\n * The maximum price for an item is zero if the item is optional.\n * @param item DaffCompositeProductItem\n */\nfunction getMaximumRequiredCompositeItemPrice(item: DaffCompositeProductItem, qty: number): number {\n\treturn item.required ? daffMultiply(Math.max(...item.options.map(option => option.price)), qty) : 0;\n}\n\n/**\n * The minimum discounted price of an item is zero if the item is optional.\n * @param item DaffCompositeProductItem\n */\n//todo use optional chaining when possible\nfunction getMinimumRequiredCompositeItemDiscountedPrice(item: DaffCompositeProductItem, qty: number): number {\n\treturn item.required ? daffMultiply(Math.min(...item.options.map(getDiscountedPrice)), qty) : 0;\n}\n/**\n * The maximum discounted price of an item is zero if the item is optional.\n * @param item DaffCompositeProductItem\n */\n//todo use optional chaining when possible\nfunction getMaximumRequiredCompositeItemDiscountedPrice(item: DaffCompositeProductItem, qty: number): number {\n\treturn item.required ? daffMultiply(Math.max(...item.options.map(getDiscountedPrice)), qty) : 0;\n}\n\n/**\n * Gets the minimum prices of a composite product for the configuration provided excluding unselected, optional item prices.\n * @param product a DaffCompositeProduct\n * @param appliedOptions a Dictionary<DaffCompositeProductItemOption> that determines the current configuration of the composite product.\n */\nfunction getMinPricesForConfiguration(product: DaffCompositeProduct, appliedOptions: Dictionary<DaffCompositeProductItemOption>): DaffProductPrices {\n\treturn {\n\t\tdiscountedPrice: product.items.reduce((acc, item) => daffAdd(\n\t\t\tacc, \n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(getDiscountedPrice(appliedOptions[item.id]), appliedOptions[item.id].quantity) : \n\t\t\t\tgetMinimumRequiredCompositeItemDiscountedPrice(item, getOptionQty(appliedOptions[item.id]))\n\t\t), getDiscountedPrice(product)),\n\t\tdiscount: { amount: null, percent: null },\n\t\toriginalPrice: product.items.reduce((acc, item) => daffAdd(\n\t\t\tacc, \n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(appliedOptions[item.id].price, appliedOptions[item.id].quantity) : \n\t\t\t\tgetMinimumRequiredCompositeItemPrice(item, getOptionQty(appliedOptions[item.id]))\n\t\t), product.price)\n\t}\n}\n\n/**\n * Gets the maximum prices of a composite product for the configuration provided excluding unselected, optional item prices.\n * @param product a DaffCompositeProduct\n * @param appliedOptions a Dictionary<DaffCompositeProductItemOption> that determines the current configuration of the composite product.\n */\nfunction getMaxPricesForConfiguration(product: DaffCompositeProduct, appliedOptions: Dictionary<DaffCompositeProductItemOption>): DaffProductPrices {\n\treturn {\n\t\tdiscountedPrice: product.items.reduce((acc, item) => daffAdd(\n\t\t\tacc, \n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(getDiscountedPrice(appliedOptions[item.id]), appliedOptions[item.id].quantity) : \n\t\t\t\tgetMaximumRequiredCompositeItemDiscountedPrice(item, getOptionQty(appliedOptions[item.id]))\n\t\t), getDiscountedPrice(product)),\n\t\tdiscount: { amount: null, percent: null },\n\t\toriginalPrice: product.items.reduce((acc, item) => daffAdd(\n\t\t\tacc,\n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(appliedOptions[item.id].price, appliedOptions[item.id].quantity) : \n\t\t\t\tgetMaximumRequiredCompositeItemPrice(item, getOptionQty(appliedOptions[item.id]))\n\t\t), product.price)\n\t}\n}\n\nfunction getDiscountedPrice(product: DaffProduct): number {\n  return product.discount ? daffSubtract(product.price, product.discount.amount) : product.price\n}\n\n/**\n * Gets the maximum prices of a composite product including optional item prices.\n * @param product a DaffCompositeProduct\n */\nfunction getMaxPricesForConfigurationIncludingOptionalItems(product: DaffCompositeProduct, appliedOptions: Dictionary<DaffCompositeProductItemOption>): DaffProductPrices {\n\treturn {\n\t\tdiscountedPrice: (<DaffCompositeProduct>product).items.reduce((acc, item) => daffAdd(\n\t\t\tacc, \n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(getDiscountedPrice(appliedOptions[item.id]), appliedOptions[item.id].quantity) :\n\t\t\t\tappliedOptionHasQty(appliedOptions[item.id]) ?\n\t\t\t\t\tdaffMultiply(Math.max(...item.options.map(getDiscountedPrice)), appliedOptions[item.id].quantity) : \n\t\t\t\t\tMath.max(...item.options.map(getDiscountedPrice))\n\t\t), getDiscountedPrice(product)),\n\t\tdiscount: { amount: null, percent: null },\n\t\toriginalPrice: (<DaffCompositeProduct>product).items.reduce((acc, item) => daffAdd(\n\t\t\tacc,\n\t\t\tappliedOptionHasId(appliedOptions[item.id]) ? \n\t\t\t\tdaffMultiply(appliedOptions[item.id].price, appliedOptions[item.id].quantity) : \n\t\t\t\tappliedOptionHasQty(appliedOptions[item.id]) ?\n\t\t\t\t\tdaffMultiply(Math.max(...item.options.map(option => option.price)), appliedOptions[item.id].quantity) : \n\t\t\t\t\tMath.max(...item.options.map(option => option.price))\n\t\t), product.price)\n\t}\n}\n\n/**\n * Takes a product and a set of option configurations and convert it into a dictionary of the full option objects.\n * @param product a DaffCompositeProduct\n * @param configuration a Dictionary<DaffCompositeConfigurationItem> used to build the appliedOptions object.\n */\nfunction getAppliedOptionsForConfiguration(product: DaffCompositeProduct, configuration: Dictionary<DaffCompositeConfigurationItem>): Dictionary<DaffCompositeProductItemOption> {\n\treturn (<DaffCompositeProduct>product).items.reduce((acc, item) => ({\n\t\t...acc,\n\t\t[item.id]: configuration[item.id] ? {\n\t\t\t...item.options.find(option => option.id === configuration[item.id].value),\n\t\t\tquantity: (configuration[item.id].qty === null || configuration[item.id].qty === undefined) ? 1 : configuration[item.id].qty\n\t\t} : null\n}), {})\n}\n\n//todo: use optional chaining when possible\nfunction appliedOptionHasId(appliedOption: DaffCompositeProductItemOption): boolean {\n\treturn appliedOption && !!appliedOption.id;\n}\n\nfunction getOptionQty(appliedOption: DaffCompositeProductItemOption): number {\n\treturn appliedOptionHasQty(appliedOption) ? appliedOption.quantity : 1;\n}\n\n//todo: use optional chaining when possible\nfunction appliedOptionHasQty(appliedOption: DaffCompositeProductItemOption): boolean {\n\treturn appliedOption && appliedOption.quantity !== null;\n}\n","import { DaffProduct } from '../models/product';\nimport { DaffProductPageMemoizedSelectors, getDaffProductPageSelectors } from './product/product.selectors';\nimport { DaffBestSellersMemoizedSelectors, getDaffBestSellersSelectors } from './best-sellers/best-sellers.selectors';\nimport { DaffProductEntitiesMemoizedSelectors, getDaffProductEntitiesSelectors } from './product-entities/product-entities.selectors';\nimport { DaffProductGridMemoizedSelectors, getDaffProductGridSelectors } from './product-grid/product-grid.selectors';\nimport { DaffProductFeatureMemoizedSelector, getDaffProductFeatureSelector } from './product-feature.selector';\nimport { DaffConfigurableProductEntitiesMemoizedSelectors, getDaffConfigurableProductEntitiesSelectors } from './configurable-product-entities/configurable-product-entities.selectors';\nimport { DaffConfigurableProductMemoizedSelectors, getDaffConfigurableProductSelectors } from './configurable-product/configurable-product.selectors';\nimport { DaffCompositeProductEntitiesMemoizedSelectors, getDaffCompositeProductEntitiesSelectors } from './composite-product-entities/composite-product-entities.selectors';\nimport { DaffCompositeProductMemoizedSelectors, getDaffCompositeProductSelectors } from './composite-product/composite-product.selectors';\n\nexport interface DaffProductAllSelectors<T extends DaffProduct = DaffProduct> extends \n\tDaffProductPageMemoizedSelectors<T>, \n\tDaffBestSellersMemoizedSelectors<T>, \n\tDaffProductEntitiesMemoizedSelectors<T>, \n\tDaffProductGridMemoizedSelectors<T>,\n\tDaffProductFeatureMemoizedSelector<T>,\n\tDaffConfigurableProductEntitiesMemoizedSelectors,\n\tDaffConfigurableProductMemoizedSelectors,\n\tDaffCompositeProductEntitiesMemoizedSelectors,\n\tDaffCompositeProductMemoizedSelectors { }\n\nexport const getDaffProductSelectors = <T extends DaffProduct = DaffProduct>(): DaffProductAllSelectors<T> => {\n\treturn {\n\t\t...getDaffBestSellersSelectors<T>(),\n\t\t...getDaffProductPageSelectors<T>(),\n\t\t...getDaffProductGridSelectors<T>(),\n\t\t...getDaffProductEntitiesSelectors<T>(),\n\t\t...getDaffProductFeatureSelector<T>(),\n\t\t...getDaffConfigurableProductEntitiesSelectors(),\n\t\t...getDaffConfigurableProductSelectors(),\n\t\t...getDaffCompositeProductEntitiesSelectors(),\n\t\t...getDaffCompositeProductSelectors()\n\t}\n};","import { InjectionToken } from '@angular/core';\nimport { DaffProductServiceInterface } from '../interfaces/product-service.interface';\n\n/**\n * Injection token that serves as a placeholder for any service that implements the DaffProductServiceInterface.\n */\nexport const DaffProductDriver = \n    new InjectionToken<DaffProductServiceInterface<any>>('DaffProductDriver');\n","import { Injectable, Inject } from '@angular/core';\nimport { switchMap, map, catchError } from 'rxjs/operators';\nimport { of ,  Observable } from 'rxjs';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { \n  DaffProductGridActionTypes, \n  DaffProductGridLoad, \n  DaffProductGridLoadSuccess, \n  DaffProductGridLoadFailure } from '../actions/product-grid.actions';\nimport { DaffProductServiceInterface } from '../drivers/interfaces/product-service.interface';\nimport { DaffProductDriver } from '../drivers/injection-tokens/product-driver.token';\n\nimport { DaffProduct } from '../models/product';\n\n/**\n * Effects for handling product grid actions and for triggering corresponding service requests.\n * \n * @param action$ - Redux action object\n * @param driver - A product service driver\n */\n@Injectable()\nexport class DaffProductGridEffects<T extends DaffProduct> {\n\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffProductDriver) private driver: DaffProductServiceInterface<T>){}\n  \n  /**\n   * Handles ProductGridLoadAction by making a service call for products and returning a success or failure action\n   * to the action stream.\n   * \n   * @returns An Observable of a DaffProductGridAction\n   */\n  @Effect()\n  loadAll$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffProductGridActionTypes.ProductGridLoadAction),\n    switchMap((action: DaffProductGridLoad) =>\n      this.driver.getAll()\n        .pipe(\n          map((resp) => {\n            return new DaffProductGridLoadSuccess(resp);\n          }),\n          catchError(error => {\n            return of(new DaffProductGridLoadFailure('Failed to load product grid'));\n          })\n        )\n    )\n  )\n}\n","import { Injectable, Inject } from '@angular/core';\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\n\nimport { switchMap, map, catchError } from 'rxjs/operators';\nimport { of ,  Observable } from 'rxjs';\n\nimport { \n  DaffProductActionTypes, \n  DaffProductLoad, \n  DaffProductLoadSuccess, \n  DaffProductLoadFailure } from '../actions/product.actions';\nimport { DaffProductDriver } from '../drivers/injection-tokens/product-driver.token';\nimport { DaffProductServiceInterface } from '../drivers/interfaces/product-service.interface';\nimport { DaffProduct } from '../models/product';\n\n/**\n * Effects for handling product actions and for triggering corresponding service requests.\n * \n * @param action$ - Redux action object\n * @param driver - A product service driver\n */\n@Injectable()\nexport class DaffProductEffects<T extends DaffProduct> {\n\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffProductDriver) private driver: DaffProductServiceInterface<T>){}\n\n  /**\n  * Handles ProductLoadAction by making a service call for a product and returning a success or \n  * failure action to the action stream.\n  * \n  * @returns An Observable of a ProductLoadAction\n  */\n  @Effect()\n  load$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffProductActionTypes.ProductLoadAction),\n    switchMap((action: DaffProductLoad) =>\n      this.driver.get(action.payload)\n        .pipe(\n          map((resp) => {\n            return new DaffProductLoadSuccess(resp);\n          }),\n          catchError(error => {\n            return of(new DaffProductLoadFailure('Failed to load product'));\n          })\n        )\n    )\n  )\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Observable ,  of } from 'rxjs';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, map, catchError } from 'rxjs/operators';\n\nimport { \n  DaffBestSellersActionTypes, \n  DaffBestSellersLoad, \n  DaffBestSellersLoadSuccess, \n  DaffBestSellersLoadFailure } from '../actions/best-sellers.actions';\nimport { DaffProductDriver } from '../drivers/injection-tokens/product-driver.token';\nimport { DaffProductServiceInterface } from '../drivers/interfaces/product-service.interface';\nimport { DaffProduct } from '../models/product';\n\n/**\n * Effects for handling best seller actions and best seller service requests.\n * \n * @param action$ - Redux action object\n * @param driver - A product service driver\n */\n@Injectable()\nexport class DaffBestSellersEffects<T extends DaffProduct> {\n\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffProductDriver) private driver: DaffProductServiceInterface<T>){}\n\n  /**\n   * Handles BestSellersLoadAction by making a service call for best selling products and returning a success or failure action\n   * to the action stream.\n   * \n   * @returns An Observable of a BestSellersLoad action\n   */\n  @Effect()\n  loadBestSellers$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffBestSellersActionTypes.BestSellersLoadAction),\n    switchMap((action: DaffBestSellersLoad) =>\n      this.driver.getBestSellers()\n        .pipe(\n          map((resp) => {\n            return new DaffBestSellersLoadSuccess(resp);\n          }),\n          catchError(error => {\n            return of(new DaffBestSellersLoadFailure('Failed to load best selling products'));\n          })\n        )\n    )\n  )\n}\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { DaffProductGridEffects } from './effects/product-grid.effects';\nimport { DaffProductEffects } from './effects/product.effects';\nimport { DaffBestSellersEffects } from './effects/best-seller.effects';\nimport { daffProductReducers } from './reducers/product-reducers';\n\n@NgModule({\n  imports: [\n      StoreModule.forFeature('product', daffProductReducers),\n      EffectsModule.forFeature([\n        DaffProductGridEffects,\n        DaffProductEffects,\n        DaffBestSellersEffects\n      ]),\n  ]\n})\nexport class DaffProductStateModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffProductStateModule } from './product-state.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    /**\n     * Ngrx/store\n     */\n    DaffProductStateModule,\n  ]\n})\nexport class DaffProductModule { }\n","import { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { Apollo } from 'apollo-angular';\nimport gql from 'graphql-tag';\n\nimport { DaffProduct } from '../../models/product';\nimport { DaffProductServiceInterface } from '../interfaces/product-service.interface';\n\ninterface GetAllProductsResponse {\n  shop?: ShopGraph\n}\n\ninterface GetAProductResponse {\n  node: ProductNode\n}\n\ninterface ShopGraph {\n  products?: ProductGraph\n}\n\ninterface ProductGraph {\n  edges: ProductEdge[]\n}\n\ninterface ProductEdge {\n  node: ProductNode\n}\n\ninterface ProductNode {\n  id: string;\n  title?: string;\n  price?: string;\n}\n\ninterface Variables {\n  first: number\n};\n\n\n/**\n * GraphQL query object for getting all products.\n */\nexport const GetAllProductsQuery = gql`\n  query GetAllProducts($length: Int) {\n    shop {\n      products(first: $length)  {\n        edges {\n          node {\n            id\n            title\n          }\n        }\n      }\n    }\n  }\n`;\n\n/**\n * GraphQL query object for getting a product by ID.\n */\nexport const GetAProduct = gql`\n  query GetAProduct($id: ID!){\n    node(id: $id) {\n      id\n      ... on Product {\n        title\n      }\n    }\n  }\n`;\n\n/**\n * Transforms a ProductNode into a different object.\n * \n * @param node - ProductNode object\n * @returns A Product object\n */\nexport const DaffShopifyProductTransformer = (node: ProductNode) : DaffProduct => {\n  return {\n    id: node.id,\n\t\tname: node.title,\n\t\timages: []\n  }\n}\n\n/**\n * A service for getting DaffProducts from apollo shopify product requests.\n * \n * @Param apollo\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffShopifyProductService implements DaffProductServiceInterface {\n\n  defaultLength = 20;\n  \n  constructor(private apollo: Apollo) {}\n\n  /**\n   * A query for retrieving all Products as an Observable<DaffProduct[]>.\n   * \n   * @returns Observable<Product[]>\n   */\n  getAll(): Observable<DaffProduct[]> {\n    return this.apollo.query<GetAllProductsResponse>({\n      query: GetAllProductsQuery,\n      variables: {\n        length: this.defaultLength\n      }\n    }).pipe(\n      map(result => {\n        return result.data.shop.products.edges.map(edge => DaffShopifyProductTransformer(edge.node))\n      })\n    );\n  }\n\n  //todo: add actual getBestSellers apollo call. Right now, it just makes the getAll() call\n  getBestSellers(): Observable<DaffProduct[]> {\n    return this.apollo.query<GetAllProductsResponse>({\n      query: GetAllProductsQuery,\n      variables: {\n        length: this.defaultLength\n      }\n    }).pipe(\n      map(result => {\n        return result.data.shop.products.edges.map(edge => DaffShopifyProductTransformer(edge.node))\n      })\n    );\n  }\n\n  /**\n   * A query for retrieving a particular product as an Observable<DaffProduct>.\n   * \n   * @param productId - A product ID\n   * @returns Observable<Product>\n   */\n  get(productId: string): Observable<DaffProduct> {\n    return this.apollo.query<GetAProductResponse>({\n      query: GetAProduct,\n      variables: {\n        id: productId\n      }\n    }).pipe(\n      map(result => DaffShopifyProductTransformer(result.data.node))\n    );\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffProductDriver } from '../injection-tokens/product-driver.token';\nimport { DaffShopifyProductService } from './product.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ]\n})\nexport class DaffProductShopifyDriverModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: DaffProductShopifyDriverModule,\n      providers: [\n        {\n          provide: DaffProductDriver,\n          useExisting: DaffShopifyProductService\n        }\n      ]\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Store, select, Action } from '@ngrx/store';\n\nimport { DaffProductModule } from '../../product.module';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\nimport { getDaffProductSelectors } from '../../selectors/public_api';\nimport { DaffProductGridFacadeInterface } from './product-grid-facade.interface';\n\n/**\n * A facade for accessing state for a list of products from an application component.\n */\n@Injectable({\n  providedIn: DaffProductModule\n})\nexport class DaffProductGridFacade<T extends DaffProduct = DaffProduct> implements DaffProductGridFacadeInterface<T> {\n  /**\n   * The loading state for retrieving a list of products.\n   */\n  loading$: Observable<boolean>;\n  /**\n   * The state for a list of products.\n   */\n  products$: Observable<T[]>;\n\n  constructor(private store: Store<DaffProductReducersState<T>>) {\n\t\tconst {\n\t\t\tselectProductGridLoadingState,\n\t\t\tselectAllProducts\n\t\t} = getDaffProductSelectors<T>();\n\n    this.loading$ = this.store.pipe(select(selectProductGridLoadingState));\n    this.products$ = this.store.pipe(select(selectAllProducts));\n  }\n\n  /**\n   * Dispatches an action to the rxjs action stream.\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Store, select, Action } from '@ngrx/store';\n\nimport { DaffProductModule } from '../../product.module';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\nimport { getDaffProductSelectors } from '../../selectors/public_api';\nimport { DaffProductFacadeInterface } from './product-facade.interface';\n\n/**\n * A facade for getting state about a particular product.\n * \n * See the <a href=\"docs/api/product/DaffProductFacadeInterface\">DaffProductFacadeInterface docs</a> for more details.\n */\n@Injectable({\n  providedIn: DaffProductModule\n})\nexport class DaffProductFacade<T extends DaffProduct = DaffProduct> implements DaffProductFacadeInterface<T> {\n  loading$: Observable<boolean>;\n  product$: Observable<T>;\n\n\tprivate selectors = getDaffProductSelectors<T>();\n\n  constructor(private store: Store<DaffProductReducersState<T>>) {\n    this.loading$ = this.store.pipe(select(this.selectors.selectSelectedProductLoadingState));\n\t\tthis.product$ = this.store.pipe(select(this.selectors.selectSelectedProduct));\n\t}\n\n\tgetProduct(id: string): Observable<T> {\n\t\treturn this.store.pipe(select(this.selectors.selectProduct, { id }));\n\t}\n\n\tgetPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectProductPrice, { id }));\n\t}\n\n\thasDiscount(id: string): Observable<boolean> {\n\t\treturn this.store.pipe(select(this.selectors.selectProductHasDiscount, { id }));\n\t}\n\n\tgetDiscountAmount(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectProductDiscountAmount, { id }));\n\t}\n\n\tgetDiscountedPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectProductDiscountedPrice, { id }));\n\t}\n\n\tgetDiscountPercent(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectProductDiscountPercent, { id }));\n\t}\n\n\tisOutOfStock(id: string): Observable<boolean> {\n\t\treturn this.store.pipe(select(this.selectors.selectIsProductOutOfStock, { id }));\n\t}\n\n  /**\n   * Dispatches an action to the rxjs action stream.\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Store, select, Action } from '@ngrx/store';\nimport { Dictionary } from '@ngrx/entity';\n\nimport { DaffProductModule } from '../../product.module';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\nimport { getDaffProductSelectors } from '../../selectors/public_api';\nimport { DaffConfigurableProductFacadeInterface } from './configurable-product-facade.interface';\nimport { DaffConfigurableProductVariant } from '../../models/configurable-product';\n\n/**\n * A facade for interacting with the configurable product state.\n * Exposes many parts of the state for easy access and allows dispatching of actions.\n * \n * See the <a href=\"docs/api/product/DaffConfigurableProductFacadeInterface\">DaffConfigurableProductFacadeInterface docs</a> for more details.\n */\n@Injectable({\n  providedIn: DaffProductModule\n})\nexport class DaffConfigurableProductFacade<T extends DaffProduct = DaffProduct> implements DaffConfigurableProductFacadeInterface {\n\n\tselectors = getDaffProductSelectors<T>();\n\t\n\tconstructor(private store: Store<DaffProductReducersState<T>>) {}\n\t\n\tgetAllAttributes(id: string): Observable<Dictionary<string[]>> {\n\t\treturn this.store.pipe(select(this.selectors.selectAllConfigurableProductAttributes, { id }));\n\t}\n\t\n\tgetAllVariants(id: string): Observable<DaffConfigurableProductVariant[]> {\n\t\treturn this.store.pipe(select(this.selectors.selectAllConfigurableProductVariants, { id }));\n\t}\n\t\n\tgetAppliedAttributes(id: string): Observable<Dictionary<string>> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductAppliedAttributesAsDictionary, { id }));\n\t}\n\n\tgetMinimumPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMinimumPrice, { id }));\n\t}\n\n\tgetMaximumPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMaximumPrice, { id }));\n\t}\n\n\tgetMinimumDiscountedPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMinimumDiscountedPrice, { id }));\n\t}\n\n\tgetMaximumDiscountedPrice(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMaximumDiscountedPrice, { id }));\n\t}\n\n\tgetMinimumPercentDiscount(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMinimumPercentDiscount, { id }));\n\t}\n\n\tgetMaximumPercentDiscount(id: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductMaximumPercentDiscount, { id }));\n\t}\n\n\tisPriceRanged(id: string): Observable<boolean> {\n\t\treturn this.store.pipe(select(this.selectors.isConfigurablePriceRanged, { id }));\n\t}\n\n\thasDiscount(id: string): Observable<boolean> {\n\t\treturn this.store.pipe(select(this.selectors.selectConfigurableProductHasDiscount, { id }));\n\t}\n\n\tgetSelectableAttributes(id: string): Observable<Dictionary<string[]>> {\n\t\treturn this.store.pipe(select(this.selectors.selectSelectableConfigurableProductAttributes, { id }));\n\t}\n\n\tgetMatchingVariants(id: string): Observable<DaffConfigurableProductVariant[]> {\n\t\treturn this.store.pipe(select(this.selectors.selectMatchingConfigurableProductVariants, { id }));\n\t}\n\n  /**\n   * Dispatches an action to the rxjs action stream.\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { DaffPriceRange } from '../models/prices';\n\n/**\n * Returns whether a DaffPriceRange has a discount.\n * @param priceRange a DaffPriceRange\n */\nexport const productPriceRangeHasDiscount = (priceRange: DaffPriceRange): boolean => {\n\treturn priceRange.minPrice.originalPrice !== priceRange.minPrice.discountedPrice ||\n\t\tpriceRange.maxPrice.originalPrice !== priceRange.maxPrice.discountedPrice;\n}\n\n/**\n * Returns whether the min and max prices of a DaffPriceRange are different.\n * @param priceRange a DaffPriceRange\n */\nexport const productPriceRangeHasPriceRange = (priceRange: DaffPriceRange): boolean => {\n\treturn priceRange.minPrice.originalPrice !== priceRange.maxPrice.originalPrice ||\n\t\tpriceRange.minPrice.discountedPrice !== priceRange.maxPrice.discountedPrice;\n}","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Store, select, Action } from '@ngrx/store';\nimport { Dictionary } from '@ngrx/entity';\n\nimport { DaffProductModule } from '../../product.module';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { DaffProduct } from '../../models/product';\nimport { getDaffProductSelectors } from '../../selectors/public_api';\nimport { DaffCompositeProductFacadeInterface } from './composite-product-facade.interface';\nimport { DaffCompositeProductItemOption, DaffCompositeProductItem } from '../../models/composite-product-item';\nimport { DaffCompositeProduct } from '../../models/composite-product';\nimport { DaffPriceRange } from '../../models/prices';\nimport { DaffCompositeConfigurationItem } from '../../models/composite-configuration-item';\nimport { productPriceRangeHasDiscount, productPriceRangeHasPriceRange } from '../helpers';\n\n/**\n * A facade for interacting with the composite product state.\n * Exposes many parts of the state for easy access and allows dispatching of actions.\n * \n * See the <a href=\"docs/api/product/DaffCompositeProductFacadeInterface\">DaffCompositeProductFacadeInterface docs</a> for more details.\n */\n@Injectable({\n  providedIn: DaffProductModule\n})\nexport class DaffCompositeProductFacade<T extends DaffProduct = DaffProduct> implements DaffCompositeProductFacadeInterface {\n\t\n\tconstructor(private store: Store<DaffProductReducersState<T>>) {}\n\n\tselectors = getDaffProductSelectors<T>();\n\n\t/**\n\t * Returns whether a DaffPriceRange has a discount.\n\t * @param priceRange a DaffPriceRange\n\t */\n\thasDiscount = productPriceRangeHasDiscount;\n\n\t/**\n\t * Returns whether the min and max prices of a DaffPriceRange are different.\n\t * @param priceRange a DaffPriceRange\n\t */\n\thasPriceRange = productPriceRangeHasPriceRange;\n\n\tgetRequiredItemPricesForConfiguration(id: string, configuration?: Dictionary<DaffCompositeConfigurationItem>): Observable<DaffPriceRange> {\n\t\treturn this.store.pipe(select(this.selectors.selectCompositeProductRequiredItemPricesForConfiguration, { id, configuration }));\n\t}\n\n\tgetOptionalItemPricesForConfiguration(id: string, configuration?: Dictionary<DaffCompositeConfigurationItem>): Observable<DaffPriceRange> {\n\t\treturn this.store.pipe(select(this.selectors.selectCompositeProductOptionalItemPricesForConfiguration, { id, configuration }));\n\t}\n\n\tgetPricesAsCurrentlyConfigured(id: string): Observable<DaffPriceRange> {\n\t\treturn this.store.pipe(select(this.selectors.selectCompositeProductPricesAsCurrentlyConfigured, { id }));\n\t}\n\n\tgetAppliedOptions(id: string): Observable<Dictionary<DaffCompositeProductItemOption>> {\n\t\treturn this.store.pipe(select(this.selectors.selectCompositeProductAppliedOptions, { id }));\n\t}\n\n\tisItemRequired(id: DaffCompositeProduct['id'], item_id: DaffCompositeProductItem['id']) {\n\t\treturn this.store.pipe(select(this.selectors.selectIsCompositeProductItemRequired, { id, item_id }));\n\t}\n\n  /**\n   * Dispatches an action to the rxjs action stream.\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Store, select, Action } from '@ngrx/store';\nimport { Observable } from 'rxjs';\n\nimport { DaffStoreFacade } from '@daffodil/core/state';\n\nimport { DaffProduct } from '../../models/product';\nimport { DaffProductModule } from '../../product.module';\nimport { DaffProductReducersState } from '../../reducers/product-reducers-state.interface';\nimport { getDaffProductSelectors } from '../../selectors/public_api';\n\n/**\n * A facade for accessing best sellers state from an application component.\n */\n@Injectable({\n  providedIn: DaffProductModule\n})\nexport class DaffBestSellersFacade<T extends DaffProduct = DaffProduct> implements DaffStoreFacade<Action> {\n  /**\n   * The loading state for getting best selling products.\n   */\n  loading$: Observable<boolean>;\n  /**\n   * Best selling products.\n   */\n  bestSellers$: Observable<DaffProduct[]>;\n\n  constructor(private store: Store<DaffProductReducersState<T>>) {\n\t\tconst {\n\t\t\tselectBestSellersProducts,\n\t\t\tselectBestSellersLoadingState\n\t\t} = getDaffProductSelectors<T>();\n\n    this.loading$ = this.store.pipe(select(selectBestSellersLoadingState));\n    this.bestSellers$ = this.store.pipe(select(selectBestSellersProducts));\n  }\n\n  /**\n   * Dispatches an action to the rxjs action stream.\n   * @param action\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","export enum MagentoProductTypeEnum {\n\tBundledProduct = 'BundleProduct',\n\tConfigurableProduct = 'ConfigurableProduct',\n\tSimpleProduct = 'SimpleProduct'\n}\n\nexport enum MagentoProductStockStatusEnum {\n\tInStock = 'IN_STOCK',\n\tOutOfStock = 'OUT_OF_STOCK'\n}\n\n/**\n * An object for defining what the product service requests and retrieves from a magento backend.\n */\nexport interface MagentoProduct {\n\t__typename: string;\n  id: number;\n  name: string;\n  sku: string;\n  url_key: string;\n  image: {\n\t\turl: string,\n\t\tlabel: string\n  };\n  thumbnail: {\n\t\turl: string,\n\t\tlabel: string\n\t};\n  price_range: {\n\t\tmaximum_price: {\n\t\t\tregular_price: {\n\t\t\t\tvalue: number,\n\t\t\t\tcurrency: any\n\t\t\t}\n\t\t\tdiscount: {\n\t\t\t\tamount_off: number,\n\t\t\t\tpercent_off: number\n\t\t\t}\n\t\t}\n\t};\n\tstock_status?: MagentoProductStockStatusEnum;\n  media_gallery_entries?: {\n\t\tlabel: string,\n\t\tfile: string,\n\t\tposition: number,\n\t\tdisabled: boolean,\n\t\tid: number\n\t}[];\n  short_description?: {\n\t\thtml: string;\n\t};\n  description?: {\n\t\thtml: string;\n\t};\n}\n","import { MagentoProduct } from './magento-product';\nimport { MagentoSimpleProduct } from './simple-product';\n\nexport enum MagentoPriceTypeEnum {\n\tfixed = 'FIXED',\n\tpercent = 'PERCENT',\n\tdynamic = 'DYNAMIC'\n}\n\nexport interface MagentoBundledProduct extends MagentoProduct {\n\titems: MagentoBundledProductItem[];\n}\n\nexport interface MagentoBundledProductItem {\n\trequired: boolean;\n\tsku: string;\n\ttitle: string;\n\ttype: string;\n\toptions: MagentoBundledProductItemOption[];\n\toption_id?: number;\n\tposition?: number;\n}\n\nexport interface MagentoBundledProductItemOption {\n\tid: number;\n\tlabel: string;\n\tprice: number;\n\tquantity: number;\n\tcan_change_quantity?: boolean;\n\tis_default: boolean;\n\tposition?: number;\n\tprice_type?: MagentoPriceTypeEnum;\n\tproduct?: MagentoSimpleProduct;\n}\n","import { MagentoProduct } from './magento-product';\nimport { MagentoSimpleProduct } from './simple-product';\n\nexport interface MagentoConfigurableProduct extends MagentoProduct {\n\tconfigurable_options: MagentoConfigurableProductOption[];\n\tvariants: MagentoConfigurableProductVariant[];\n}\n\nexport interface MagentoConfigurableProductOption {\n\tattribute_code:\tstring;\n\tattribute_id:\tstring;\n\tid:\tnumber;\n\tlabel: string;\n\tposition:\tnumber;\n\tproduct_id:\tnumber;\n\tvalues:\tMagentoConfigurableProductOptionsValue[];\n}\n\nexport interface MagentoConfigurableProductOptionsValue {\n\tlabel: string;\n\tswatch_data?: MagentoSwatchDataInterface;\n\tvalue_index: number;\n}\n\nexport interface MagentoSwatchDataInterface {\n\tvalue: string;\n\tthumbnail: string;\n}\n\nexport interface MagentoConfigurableProductVariant {\n\tattributes: MagentoConfigurableAttributeOption[];\n\tproduct: MagentoSimpleProduct;\n}\n\nexport interface MagentoConfigurableAttributeOption {\n\tcode:\tstring;\n\tlabel: string;\n\tvalue_index: number;\n}\n","import gql from 'graphql-tag';\n\nexport const magentoBundledProductFragment = gql`\n  fragment magentoBundledProduct on BundleProduct {\n\t\titems {\n\t\t\toption_id\n\t\t\tposition\n\t\t\trequired\n\t\t\tsku\n\t\t\ttitle\n\t\t\ttype\n\t\t\toptions {\n\t\t\t\tcan_change_quantity\n\t\t\t\tid\n\t\t\t\tis_default\n\t\t\t\tlabel\n\t\t\t\tposition\n\t\t\t\tprice_type\n\t\t\t\tprice\n\t\t\t\tquantity\n\t\t\t\tproduct {\n\t\t\t\t\tid\n\t\t\t\t\tname\n\t\t\t\t\tsku\n\t\t\t\t\tstock_status\n\t\t\t\t\tprice_range {\n\t\t\t\t\t\tmaximum_price {\n\t\t\t\t\t\t\tregular_price {\n\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\tcurrency\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiscount {\n\t\t\t\t\t\t\t\tamount_off\n\t\t\t\t\t\t\t\tpercent_off\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const magentoSimpleProductFragment = gql`\n  fragment magentoSimpleProduct on SimpleProduct {\n    name\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const magentoConfigurableProductFragment = gql`\n  fragment magentoConfigurableProduct on ConfigurableProduct {\n\t\tconfigurable_options {\n\t\t\tattribute_code\n\t\t\tattribute_id\n\t\t\tid\n\t\t\tlabel\n\t\t\tposition\n\t\t\tproduct_id\n\t\t\tvalues {\n\t\t\t\tlabel\n\t\t\t\tvalue_index\n\t\t\t}\n\t\t}\n\t\tvariants {\n\t\t\tattributes {\n\t\t\t\tcode\n\t\t\t\tlabel\n\t\t\t\tvalue_index\n\t\t\t}\n\t\t\tproduct {\n\t\t\t\tsku\n\t\t\t\tprice_range {\n\t\t\t\t\tmaximum_price {\n\t\t\t\t\t\tregular_price {\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\tcurrency\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiscount {\n\t\t\t\t\t\t\tamount_off\n\t\t\t\t\t\t\tpercent_off\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstock_status\n\t\t\t\timage {\n\t\t\t\t\turl\n\t\t\t\t\tlabel\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }\n`;\n","import gql from 'graphql-tag';\nimport { magentoBundledProductFragment } from './bundled-product';\nimport { magentoSimpleProductFragment } from './simple-product';\nimport { magentoConfigurableProductFragment } from './configurable-product';\n\nexport const magentoProductFragment = gql`\n  fragment product on ProductInterface {\n\t\t__typename\n\t\tid\n\t\turl_key\n\t\tname\n\t\tsku\n\t\tstock_status\n\t\tprice_range {\n\t\t\tmaximum_price {\n\t\t\t\tregular_price {\n\t\t\t\t\tvalue\n\t\t\t\t\tcurrency\n\t\t\t\t}\n\t\t\t\tdiscount {\n\t\t\t\t\tamount_off\n\t\t\t\t\tpercent_off\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\timage {\n\t\t\turl\n\t\t\tlabel\n\t\t}\n    thumbnail {\n\t\t\turl\n\t\t\tlabel\n\t\t}\n\t\tmedia_gallery_entries {\n\t\t\tlabel\n\t\t\tfile\n\t\t\tposition\n\t\t\tdisabled\n\t\t\tid\n\t\t}\n\t\tshort_description {\n\t\t\thtml\n\t\t}\n\t\tdescription {\n\t\t\thtml\n\t\t}\n\t\t...magentoBundledProduct\n\t\t...magentoSimpleProduct\n\t\t...magentoConfigurableProduct\n\t}\n\t${magentoBundledProductFragment}\n\t${magentoSimpleProductFragment}\n\t${magentoConfigurableProductFragment}\n`;\n","import gql from 'graphql-tag';\nimport { magentoProductFragment } from './fragments/product';\n\nexport const GetProductQuery = gql`\nquery GetAProduct($sku: String!){\n\tstoreConfig {\n\t\tsecure_base_media_url\n\t}\n\tproducts(filter: {\n\t\tsku: {\n\t\t\teq: $sku\n\t\t}\n\t}){\n\t\titems {\n\t\t\t...product\n\t\t}\n\t}\n}\n${magentoProductFragment}\n`\n","import gql from 'graphql-tag';\nimport { magentoProductFragment } from './fragments/product';\n\nexport const GetAllProductsQuery = gql`\nquery GetAllProducts($pageSize: Int)\n{\n\tproducts(search: \"Shirt\", pageSize: $pageSize)\n\t{\n\t\ttotal_count\n\t\titems {\n\t\t\t...product\n\t\t}\n\t\tpage_info {\n\t\t\tpage_size\n\t\t\tcurrent_page\n\t\t}\n\t}\n}\n${magentoProductFragment}\n`\n","import { DaffProduct, DaffProductTypeEnum, DaffProductDiscount } from '../../../models/product';\nimport { MagentoProduct, MagentoProductStockStatusEnum } from '../models/magento-product';\n\n/**\n * Transforms the magento MagentoProduct from the magento product query into a DaffProduct. \n * @param product a magento product\n */\nexport function transformMagentoSimpleProduct(product: MagentoProduct, mediaUrl: string): DaffProduct {\n\treturn {\n\t\ttype: DaffProductTypeEnum.Simple,\n\t\tid: product.sku,\n\t\turl: product.url_key,\n\t\tname: product.name,\n\t\tprice: getPrice(product),\n\t\tdiscount: getDiscount(product),\n\t\tin_stock: product.stock_status === MagentoProductStockStatusEnum.InStock,\n\t\timages: [\n\t\t\t{ url: product.image.url, id: '0', label: product.image.label},\n\t\t\t...transformMediaGalleryEntries(product, mediaUrl)\n\t\t],\n\t\tdescription: product.description.html\n\t}\n}\n\n/**\n * A function for null checking an object.\n */\nfunction getPrice(product: MagentoProduct): number {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.regular_price && \n\t\tproduct.price_range.maximum_price.regular_price.value !== null\n\t? product.price_range.maximum_price.regular_price.value : null;\n}\n\nfunction getDiscount(product: MagentoProduct): DaffProductDiscount {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.discount \n\t\t? { \n\t\t\tamount: product.price_range.maximum_price.discount.amount_off,\n\t\t\tpercent: product.price_range.maximum_price.discount.percent_off\n\t\t} : { amount: null, percent: null }\n}\n\nfunction transformMediaGalleryEntries(product: MagentoProduct, mediaUrl: string) {\n\treturn product.media_gallery_entries ? product.media_gallery_entries.map(image => {\n\t\treturn {\n\t\t\turl: mediaUrl + 'catalog/product' + image.file,\n\t\t\tlabel: image.label,\n\t\t\tid: image.id.toString()\n\t\t}\n\t}) : []\n}\n","import { MagentoBundledProduct, MagentoBundledProductItem, MagentoBundledProductItemOption } from '../models/bundled-product';\nimport { DaffProductDiscount, DaffProductTypeEnum } from '../../../models/product';\nimport { DaffCompositeProduct } from '../../../models/composite-product';\nimport { \n\tDaffCompositeProductItemOption, \n\tDaffCompositeProductItem, \n\tDaffCompositeProductItemInputEnum \n} from '../../../models/composite-product-item';\nimport { transformMagentoSimpleProduct } from './simple-product-transformers';\nimport { MagentoProduct, MagentoProductStockStatusEnum } from '../models/magento-product';\n\n/**\n * Transforms the magento MagentoProduct from the magento product query into a DaffProduct. \n * @param response the response from a magento product query.\n */\nexport function transformMagentoBundledProduct(product: MagentoBundledProduct, mediaUrl: string): DaffCompositeProduct {\n\treturn {\n\t\t...transformMagentoSimpleProduct(product, mediaUrl),\n\t\tprice: 0,\n\t\tdiscount: {\n\t\t\tamount: 0,\n\t\t\tpercent: 0\n\t\t},\n\t\ttype: DaffProductTypeEnum.Composite,\n\t\titems: product.items.map(transformMagentoBundledProductItem)\n\t}\n}\n\nfunction transformMagentoBundledProductItem(item: MagentoBundledProductItem): DaffCompositeProductItem {\n\treturn {\n\t\tid: item.option_id.toString(),\n\t\trequired: item.required,\n\t\ttitle: item.title,\n\t\tinput_type: <DaffCompositeProductItemInputEnum>item.type,\n\t\toptions: item.options.map(transformMagentoBundledProductItemOption)\n\t}\n}\n\nfunction transformMagentoBundledProductItemOption(option: MagentoBundledProductItemOption): DaffCompositeProductItemOption {\n\treturn {\n\t\tid: option.id.toString(),\n\t\tname: option.label,\n\t\tprice: getPrice(option.product),\n\t\timages: [],\n\t\tdiscount: getDiscount(option.product),\n\t\tquantity: option.quantity,\n\t\tis_default: option.is_default,\n\t\tin_stock: option.product.stock_status === MagentoProductStockStatusEnum.InStock\n\t}\n}\n\n/**\n * A function for null checking an object.\n */\n//TODO: use optional chaining after angular 9 and Typescript 3.7\nfunction getPrice(product: MagentoProduct): number {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.regular_price && \n\t\tproduct.price_range.maximum_price.regular_price.value !== null\n\t? product.price_range.maximum_price.regular_price.value : null;\n}\n\n//TODO: use optional chaining after angular 9 and Typescript 3.7\nfunction getDiscount(product: MagentoProduct): DaffProductDiscount {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.discount \n\t\t? { \n\t\t\tamount: product.price_range.maximum_price.discount.amount_off,\n\t\t\tpercent: product.price_range.maximum_price.discount.percent_off\n\t\t} : { amount: null, percent: null }\n}\n","import { DaffProductTypeEnum, DaffProductDiscount } from '../../../models/product';\nimport { transformMagentoSimpleProduct } from './simple-product-transformers';\nimport { \n\tMagentoConfigurableProduct, \n\tMagentoConfigurableProductOption, \n\tMagentoConfigurableProductOptionsValue, \n\tMagentoConfigurableProductVariant, \n\tMagentoConfigurableAttributeOption\n} from '../models/configurable-product';\nimport { \n\tDaffConfigurableProduct,\n\tDaffConfigurableProductAttribute,\n\tDaffConfigurableProductOptionValue,\n\tDaffConfigurableProductVariant,\n\tDaffProductVariantAttributesDictionary\n} from '../../../models/configurable-product';\nimport { MagentoProduct, MagentoProductStockStatusEnum } from '../models/magento-product';\n\n/**\n * Transforms the magento MagentoProduct from the magento product query into a DaffProduct. \n * @param response the response from a magento product query.\n */\nexport function transformMagentoConfigurableProduct(product: MagentoConfigurableProduct, mediaUrl: string): DaffConfigurableProduct {\n\treturn {\n\t\t...transformMagentoSimpleProduct(product, mediaUrl),\n\t\ttype: DaffProductTypeEnum.Configurable,\n\t\tconfigurableAttributes: product.configurable_options.map(transformOption),\n\t\tvariants: product.variants.map(transformVariant)\n\t}\n}\n\nexport function transformOption(option: MagentoConfigurableProductOption): DaffConfigurableProductAttribute {\n\treturn {\n\t\torder: option.position,\n\t\tcode: option.attribute_code,\n\t\tlabel: option.label,\n\t\tvalues: option.values.map(transformOptionValue)\n\t}\n}\n\nexport function transformOptionValue(value: MagentoConfigurableProductOptionsValue): DaffConfigurableProductOptionValue {\n\treturn {\n\t\tvalue: value.value_index.toString(),\n\t\tlabel: value.label\n\t}\n}\n\nexport function transformVariant(variant: MagentoConfigurableProductVariant): DaffConfigurableProductVariant {\n\treturn {\n\t\tid: variant.product.sku,\n\t\tappliedAttributes: transformVariantAttributes(variant.attributes),\n\t\tprice: getPrice(variant.product),\n\t\tdiscount: getDiscount(variant.product),\n\t\timage: {\n\t\t\tid: '0',\n\t\t\turl: variant.product.image.url,\n\t\t\tlabel: variant.product.image.label\n\t\t},\n\t\tin_stock: variant.product.stock_status === MagentoProductStockStatusEnum.InStock\n\t}\n}\n\nexport function transformVariantAttributes(attributes: MagentoConfigurableAttributeOption[]): DaffProductVariantAttributesDictionary {\n\tlet appliedAttributes: DaffProductVariantAttributesDictionary = {};\n\tattributes.forEach(attribute => {\n\t\tappliedAttributes = {\n\t\t\t...appliedAttributes,\n\t\t\t[attribute.code]: attribute.value_index.toString()\n\t\t}\n\t});\n\n\treturn appliedAttributes;\n}\n\n/**\n * A function for null checking an object.\n */\nfunction getPrice(product: MagentoProduct): number {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.regular_price && \n\t\tproduct.price_range.maximum_price.regular_price.value !== null\n\t? product.price_range.maximum_price.regular_price.value : null;\n}\n\nfunction getDiscount(product: MagentoProduct): DaffProductDiscount {\n\treturn product.price_range && \n\t\tproduct.price_range.maximum_price && \n\t\tproduct.price_range.maximum_price.discount \n\t\t? { \n\t\t\tamount: product.price_range.maximum_price.discount.amount_off,\n\t\t\tpercent: product.price_range.maximum_price.discount.percent_off\n\t\t} : { amount: null, percent: null }\n}\n","import { DaffProduct } from '../../../models/product';\nimport { MagentoProduct, MagentoProductTypeEnum } from '../models/magento-product';\nimport { MagentoBundledProduct } from '../models/bundled-product';\nimport { transformMagentoBundledProduct } from './bundled-product-transformers';\nimport { transformMagentoSimpleProduct } from './simple-product-transformers';\nimport { transformMagentoConfigurableProduct } from './configurable-product-transformers';\nimport { MagentoConfigurableProduct } from '../models/configurable-product';\n\n/**\n * Transforms the magento MagentoProduct from the magento product query into a DaffProduct. \n * @param product a magento product\n */\nexport function transformMagentoProduct(product: MagentoProduct, mediaUrl?: string): DaffProduct {\n\tswitch(product.__typename) {\n\t\tcase MagentoProductTypeEnum.BundledProduct:\n\t\t\treturn transformMagentoBundledProduct(<MagentoBundledProduct>product, mediaUrl);\n\t\tcase MagentoProductTypeEnum.ConfigurableProduct:\n\t\t\treturn transformMagentoConfigurableProduct(<MagentoConfigurableProduct>product, mediaUrl);\n\t\tdefault:\n\t\t\treturn transformMagentoSimpleProduct(product, mediaUrl);\n\t}\n}\n\n/**\n * Transforms many magento MagentoProducts from the magento product query into DaffProducts.\n */\nexport function transformManyMagentoProducts(products: MagentoProduct[], mediaUrl?: string): DaffProduct[] {\n\treturn products.map(product => transformMagentoProduct(product, mediaUrl));\n}\n","import { Injectable } from '@angular/core';\n\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffProductServiceInterface } from '../interfaces/product-service.interface';\nimport { GetAllProductsQuery } from './queries/get-all-products';\nimport { GetProductQuery } from './queries/get-product';\nimport { transformMagentoProduct, transformManyMagentoProducts } from './transforms/product-transformers';\nimport { DaffProduct } from '../../models/product';\n\n/**\n * A service for making magento apollo queries for products of type, DaffProduct.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoProductService implements DaffProductServiceInterface {  \n  constructor(private apollo: Apollo) {}\n\n  /**\n   * Get an Observable of a DaffProduct by id.\n   * @param productId a product Id\n   */\n  get(productId: string): Observable<DaffProduct> {\n    return this.apollo.query<any>({\n\t\t\tquery: GetProductQuery,\n\t\t\tvariables: {\n\t\t\t\tsku: productId\n\t\t\t}\n\t\t}).pipe(\n      map(result => transformMagentoProduct(result.data.products.items[0], result.data.storeConfig.secure_base_media_url))\n    );\n  }\n\n  /**\n   * Get an Observable of an array of DaffProducts.\n   */\n  getAll(): Observable<DaffProduct[]> {\n    return this.apollo.query<any>({\n\t\t\tquery: GetAllProductsQuery\n\t\t}).pipe(\n      map(result => transformManyMagentoProducts(result.data.products.items, result.data.storeConfig.secure_base_media_url))\n    );\n  }\n\n  //todo: add actual getBestSellers apollo call for Magento.\n  //todo: move to a different bestsellers module.\n  getBestSellers(): Observable<DaffProduct[]> {\n    return of(null);\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffProductDriver } from '../injection-tokens/product-driver.token';\nimport { DaffMagentoProductService } from './product.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ]\n})\nexport class DaffProductMagentoDriverModule {\n  static forRoot(): ModuleWithProviders<DaffProductMagentoDriverModule> {\n    return {\n      ngModule: DaffProductMagentoDriverModule,\n      providers: [\n        {\n          provide: DaffProductDriver,\n          useExisting: DaffMagentoProductService\n\t\t\t\t}\n      ]\n    };\n  }\n}\n"],"names":["isPlatformBrowser","of","ofType","mapTo","take","Injectable","Inject","PLATFORM_ID","Store","ActionsSubject","initialState","createEntityAdapter","createFeatureSelector","createSelector","daffSubtract","daffMultiply","daffAdd","InjectionToken","switchMap","map","catchError","Actions","tslib_1.__decorate","Effect","Observable","NgModule","StoreModule","EffectsModule","CommonModule","Apollo","store","select","GetAllProductsQuery","getPrice","getDiscount"],"mappings":"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"}