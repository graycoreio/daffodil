{"version":3,"file":"daffodil-auth.js","sources":["ng://@daffodil/auth/actions/auth.actions.ts","ng://@daffodil/auth/reducers/auth/auth-initial-state.ts","ng://@daffodil/auth/reducers/auth/auth.reducer.ts","ng://@daffodil/auth/reducers/login/login-initial-state.ts","ng://@daffodil/auth/reducers/login/login.reducer.ts","ng://@daffodil/auth/reducers/register/register-initial-state.ts","ng://@daffodil/auth/reducers/register/register.reducer.ts","ng://@daffodil/auth/reducers/auth-store-feature-key.ts","ng://@daffodil/auth/reducers/auth-reducers.ts","ng://@daffodil/auth/selectors/auth-feature.selector.ts","ng://@daffodil/auth/selectors/auth/auth.selector.ts","ng://@daffodil/auth/selectors/login/login.selector.ts","ng://@daffodil/auth/selectors/register/register.selector.ts","ng://@daffodil/auth/selectors/auth-all.selector.ts","ng://@daffodil/auth/facades/auth.facade.ts","ng://@daffodil/auth/drivers/interfaces/register-service.interface.ts","ng://@daffodil/auth/drivers/interfaces/login-service.interface.ts","ng://@daffodil/auth/drivers/interfaces/auth-service.interface.ts","ng://@daffodil/auth/storage/auth-storage.service.ts","ng://@daffodil/auth/effects/auth.effects.ts","ng://@daffodil/auth/auth-state.module.ts","ng://@daffodil/auth/auth.module.ts","ng://@daffodil/auth/drivers/magento/transforms/login-info-transformer.service.ts","ng://@daffodil/auth/drivers/magento/queries/check-token.ts","ng://@daffodil/auth/drivers/magento/queries/create-customer.ts","ng://@daffodil/auth/drivers/magento/queries/generate-token.ts","ng://@daffodil/auth/drivers/magento/queries/revoke-customer-token.ts","ng://@daffodil/auth/drivers/magento/errors/codes.ts","ng://@daffodil/auth/errors/unauthorized.ts","ng://@daffodil/auth/errors/authentication-failed.ts","ng://@daffodil/auth/errors/invalid-api-response.ts","ng://@daffodil/auth/drivers/magento/errors/map.ts","ng://@daffodil/auth/drivers/magento/errors/transform.ts","ng://@daffodil/auth/drivers/magento/register.service.ts","ng://@daffodil/auth/drivers/magento/transforms/auth-transformer.service.ts","ng://@daffodil/auth/drivers/magento/validators/check-token.ts","ng://@daffodil/auth/drivers/magento/validators/generate-token.ts","ng://@daffodil/auth/drivers/magento/validators/revoke-token.ts","ng://@daffodil/auth/drivers/magento/login.service.ts","ng://@daffodil/auth/drivers/magento/auth.service.ts","ng://@daffodil/auth/drivers/magento/auth-driver.module.ts","ng://@daffodil/auth/guards/member-only.guard.ts","ng://@daffodil/auth/guards/guest-only.guard.ts"],"sourcesContent":["import { Action } from '@ngrx/store';\n\nimport { DaffLoginInfo } from '../models/login-info';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAccountRegistration } from '../models/account-registration';\n\nexport enum DaffAuthActionTypes {\n  AuthGuardCheckAction = '[Daff-Auth] Auth Guard Check Action',\n  AuthGuardCheckCompletionAction = '[Daff-Auth] Auth Guard Check Completion Action',\n  AuthStorageFailureAction = '[Daff-Auth] Auth Storage Failure Action',\n  AuthLoginAction = '[Daff-Auth] Auth Login Action',\n  AuthLoginSuccessAction = '[Daff-Auth] Auth Login Success Action',\n  AuthLoginFailureAction = '[Daff-Auth] Auth Login Failure Action',\n  AuthLogoutAction = '[Daff-Auth] Auth Logout Action',\n  AuthLogoutSuccessAction = '[Daff-Auth] Auth Logout Success Action',\n  AuthLogoutFailureAction = '[Daff-Auth] Auth Logout Failure Action',\n  AuthCheckAction = '[Daff-Auth] Auth Check Action',\n  AuthCheckSuccessAction = '[Daff-Auth] Auth Check Success Action',\n  AuthCheckFailureAction = '[Daff-Auth] Auth Check Failure Action',\n  AuthRegisterAction = '[Daff-Auth] Auth Register Action',\n  AuthRegisterSuccessAction = '[Daff-Auth] Auth Register Success Action',\n  AuthRegisterFailureAction = '[Daff-Auth] Auth Register Failure Action',\n}\n\n/**\n * An action triggered by guards to initialize an auth check request.\n */\nexport class DaffAuthGuardCheck implements Action {\n  readonly type = DaffAuthActionTypes.AuthGuardCheckAction;\n}\n\n/**\n * An action triggered on the completion of a guard token check.\n */\nexport class DaffAuthGuardCheckCompletion implements Action {\n  readonly type = DaffAuthActionTypes.AuthGuardCheckCompletionAction;\n\n  constructor(public result: boolean) {}\n}\n\n/*\n * An action triggered upon a failed auth storage operation.\n */\nexport class DaffAuthStorageFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthStorageFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a auth login request.\n */\nexport class DaffAuthLogin<T extends DaffLoginInfo> implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginAction;\n\n  constructor(public loginInfo: T) {}\n}\n\n/**\n * An action triggered upon a successful auth login.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthLoginSuccess<T extends DaffAuthToken> implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginSuccessAction;\n\n  constructor(public auth: T) {}\n}\n\n/**\n * An action triggered upon a failed auth login request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthLoginFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a logout request.\n */\nexport class DaffAuthLogout implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutAction;\n}\n\n/**\n * An action triggered upon a successful logout.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthLogoutSuccess implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutSuccessAction;\n}\n\n/**\n * An action triggered upon a failed logout request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthLogoutFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n\n/**\n * An action triggered to initialize an auth check request.\n */\nexport class DaffAuthCheck implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckAction;\n}\n\n/**\n * An action triggered upon a successful auth check.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthCheckSuccess implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckSuccessAction;\n}\n\n/**\n * An action triggered upon a failed auth check request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthCheckFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a auth register request.\n *\n * @param registration\n */\nexport class DaffAuthRegister<T extends DaffAccountRegistration> implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterAction;\n\n  constructor(public registration: T) {}\n}\n\n/**\n * An action triggered upon a successful auth register request.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthRegisterSuccess<T extends DaffLoginInfo> implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterSuccessAction;\n\n  constructor(public loginInfo: T) {}\n}\n\n/**\n * An action triggered upon a failed auth request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthRegisterFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\nexport type DaffAuthActions<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n> =\n  | DaffAuthGuardCheckCompletion\n  | DaffAuthGuardCheck\n  | DaffAuthStorageFailure\n  | DaffAuthLogin<T>\n  | DaffAuthLoginSuccess<U>\n  | DaffAuthLoginFailure\n  | DaffAuthLogout\n  | DaffAuthLogoutSuccess\n  | DaffAuthLogoutFailure\n  | DaffAuthCheck\n  | DaffAuthCheckSuccess\n  | DaffAuthCheckFailure\n  | DaffAuthRegister<S>\n  | DaffAuthRegisterSuccess<T>\n  | DaffAuthRegisterFailure\n","import { DaffAuthReducerState } from './auth-reducer-state.interface';\n\nexport const daffAuthInitialState: DaffAuthReducerState = {\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthReducerState } from './auth-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthInitialState } from './auth-initial-state';\n\nexport function daffAuthReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthReducerState {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthCheckAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthCheckSuccessAction:\n      return {\n        ...state,\n        loading: false\n      };\n\n    case DaffAuthActionTypes.AuthCheckFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","import { DaffAuthLoginReducerState } from './login-reducer-state.interface';\n\nexport const daffAuthLoginInitialState: DaffAuthLoginReducerState<any> = {\n  auth: null,\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthLoginReducerState } from './login-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthLoginInitialState } from './login-initial-state';\n\nexport function daffAuthLoginReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthLoginInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthLoginReducerState<U> {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthLoginAction:\n    case DaffAuthActionTypes.AuthLogoutAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthLoginSuccessAction:\n      return {\n        ...state,\n        loading: false,\n        auth: action.auth\n      };\n\n    case DaffAuthActionTypes.AuthLogoutSuccessAction:\n      return {\n        ...state,\n        auth: null,\n        loading: false,\n      };\n\n    case DaffAuthActionTypes.AuthLoginFailureAction:\n    case DaffAuthActionTypes.AuthLogoutFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","import { DaffAuthRegisterReducerState } from './register-reducer-state.interface';\n\nexport const daffAuthRegisterInitialState: DaffAuthRegisterReducerState = {\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthRegisterReducerState } from './register-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthRegisterInitialState } from './register-initial-state';\n\nexport function daffAuthRegisterReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthRegisterInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthRegisterReducerState {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthRegisterAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthRegisterSuccessAction:\n      return {\n        ...state,\n        loading: false\n      };\n\n    case DaffAuthActionTypes.AuthRegisterFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","export const DAFF_AUTH_STORE_FEATURE_KEY = 'daffAuth';\n","import { daffAuthReducer } from './auth/public_api';\nimport { daffAuthLoginReducer } from './login/public_api';\nimport { daffAuthRegisterReducer } from './register/public_api';\n\nexport const daffAuthReducers = {\n  auth: daffAuthReducer,\n  login: daffAuthLoginReducer,\n  register: daffAuthRegisterReducer\n}\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffAuthFeatureState, DAFF_AUTH_STORE_FEATURE_KEY } from '../reducers/public_api';\nimport { DaffAuthToken } from '../models/auth-token';\n\n/**\n * Feature State Selector\n */\nexport const getDaffAuthFeatureStateSelector = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): MemoizedSelector<object, DaffAuthFeatureState<T>> =>\n    cache = cache || createFeatureSelector<DaffAuthFeatureState<T>>(DAFF_AUTH_STORE_FEATURE_KEY)\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  DaffAuthReducerState\n} from '../../reducers/public_api';\n\n\nexport interface AuthSelectors {\n  selectAuthState: MemoizedSelector<object, DaffAuthReducerState>;\n  selectAuthLoading: MemoizedSelector<object, boolean>;\n  selectAuthErrors: MemoizedSelector<object, string[]>;\n}\n\nconst createAuthSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.auth\n  )\n\n  const selectAuthLoading = createSelector(\n    selectAuthState,\n    state => state.loading\n  );\n\n  const selectAuthErrors = createSelector(\n    selectAuthState,\n    state => state.errors\n  );\n\n  return {\n    selectAuthState,\n    selectAuthLoading,\n    selectAuthErrors,\n  }\n};\n\nexport const getAuthSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): AuthSelectors =>\n    cache = cache || createAuthSelectors<T>()\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffAuthFeatureState } from '../../reducers/auth-feature-state.interface';\nimport { DaffAuthLoginReducerState } from '../../reducers/public_api';\n\nexport interface DaffAuthLoginSelectors<T extends DaffAuthToken> {\n  selectAuthLoginState: MemoizedSelector<object, DaffAuthLoginReducerState<T>>;\n  selectAuthLoginLoading: MemoizedSelector<object, boolean>;\n  selectAuthLoginErrors: MemoizedSelector<object, string[]>;\n  selectAuthLoginToken: MemoizedSelector<object, T>;\n  selectAuthLoginTokenValue: MemoizedSelector<object, T['token']>;\n}\n\nconst createLoginSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthLoginState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.login\n  )\n\n  const selectAuthLoginLoading = createSelector(\n    selectAuthLoginState,\n    state => state.loading\n  );\n\n  const selectAuthLoginErrors = createSelector(\n    selectAuthLoginState,\n    state => state.errors\n  );\n\n  const selectAuthLoginToken = createSelector(\n    selectAuthLoginState,\n    state => state.auth\n  );\n\n  const selectAuthLoginTokenValue = createSelector(\n    selectAuthLoginToken,\n    state => state ? state.token : null\n  );\n\n  return {\n    selectAuthLoginState,\n    selectAuthLoginLoading,\n    selectAuthLoginErrors,\n    selectAuthLoginToken,\n    selectAuthLoginTokenValue\n  }\n};\n\nexport const getDaffAuthLoginSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthLoginSelectors<T> =>\n    cache = cache || createLoginSelectors<T>()\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  DaffAuthRegisterReducerState,\n} from '../../reducers/public_api';\n\nexport interface DaffAuthRegisterSelectors {\n  selectAuthRegisterState: MemoizedSelector<object, DaffAuthRegisterReducerState>;\n  selectAuthRegisterLoading: MemoizedSelector<object, boolean>;\n  selectAuthRegisterErrors: MemoizedSelector<object, string[]>;\n}\n\nconst createRegisterSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthRegisterState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.register\n  )\n\n  const selectAuthRegisterLoading = createSelector(\n    selectAuthRegisterState,\n    state => state.loading\n  );\n\n  const selectAuthRegisterErrors = createSelector(\n    selectAuthRegisterState,\n    state => state.errors\n  );\n\n  return {\n    selectAuthRegisterState,\n    selectAuthRegisterLoading,\n    selectAuthRegisterErrors,\n  }\n};\n\nexport const getDaffAuthRegisterSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthRegisterSelectors =>\n    cache = cache || createRegisterSelectors<T>()\n})();\n","import { MemoizedSelector } from '@ngrx/store';\n\nimport { getAuthSelectors, AuthSelectors } from './auth/auth.selector';\nimport { getDaffAuthLoginSelectors, DaffAuthLoginSelectors } from './login/login.selector';\nimport { getDaffAuthRegisterSelectors, DaffAuthRegisterSelectors } from './register/register.selector';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAuthFeatureState } from '../reducers/public_api';\nimport { getDaffAuthFeatureStateSelector } from './auth-feature.selector';\n\nexport interface DaffAuthSelectors<T extends DaffAuthToken> extends\n  DaffAuthRegisterSelectors,\n  DaffAuthLoginSelectors<T>,\n  AuthSelectors {\n  selectAuthFeatureState: MemoizedSelector<object, DaffAuthFeatureState<T>>;\n}\n\nexport const getDaffAuthSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthSelectors<T> =>\n    cache = cache || {\n      ...getAuthSelectors<T>(),\n      ...getDaffAuthLoginSelectors<T>(),\n      ...getDaffAuthRegisterSelectors<T>(),\n      selectAuthFeatureState: getDaffAuthFeatureStateSelector<T>()\n    }\n})();\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Action, Store, select } from '@ngrx/store';\n\nimport { DaffAuthFeatureState } from '../reducers/public_api';\nimport {\n  getDaffAuthSelectors\n} from '../selectors/public_api';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAuthFacadeInterface } from '../interfaces/auth-facade.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffAuthFacade<T extends DaffAuthToken = DaffAuthToken> implements DaffAuthFacadeInterface<T> {\n  auth$: Observable<T>;\n  token$: Observable<T['token']>\n\n  authLoading$: Observable<boolean>;\n  authErrors$: Observable<string[]>;\n\n  loginLoading$: Observable<boolean>;\n  loginErrors$: Observable<string[]>;\n\n  registerLoading$: Observable<boolean>;\n  registerErrors$: Observable<string[]>;\n\n  constructor(private store: Store<DaffAuthFeatureState<T>>) {\n    const {\n      selectAuthLoginToken,\n      selectAuthLoading,\n      selectAuthErrors,\n      selectAuthLoginLoading,\n      selectAuthLoginErrors,\n      selectAuthRegisterLoading,\n      selectAuthRegisterErrors,\n      selectAuthLoginTokenValue\n    } = getDaffAuthSelectors<T>();\n\n    this.auth$ = this.store.pipe(select(selectAuthLoginToken));\n    this.token$ = this.store.pipe(select(selectAuthLoginTokenValue));\n\n    this.authLoading$ = this.store.pipe(select(selectAuthLoading));\n    this.authErrors$ = this.store.pipe(select(selectAuthErrors));\n\n    this.loginLoading$ = this.store.pipe(select(selectAuthLoginLoading));\n    this.loginErrors$ = this.store.pipe(select(selectAuthLoginErrors));\n\n    this.registerLoading$ = this.store.pipe(select(selectAuthRegisterLoading));\n    this.registerErrors$ = this.store.pipe(select(selectAuthRegisterErrors));\n  }\n\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { DaffLoginInfo } from '../../models/login-info';\n\nexport interface DaffRegisterServiceInterface<\n  TRequest extends DaffAccountRegistration,\n  TResponse extends DaffLoginInfo\n> {\n\n  /**\n   * Registers an account for the specified customer.\n   *\n   * @param registration The account registration info.\n   * @returns Login info.\n   */\n  register(registration: TRequest): Observable<TResponse>;\n}\n\nexport const DaffRegisterDriver = new InjectionToken('DaffRegisterDriver');\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAuthToken } from '../../models/auth-token';\n\nexport interface DaffLoginServiceInterface<\n  TRequest extends DaffLoginInfo,\n  TResponse extends DaffAuthToken\n> {\n  /**\n   * Logs the user in.\n   *\n   * @returns An access token.\n   */\n  login(loginInfo: TRequest): Observable<TResponse>;\n\n  /**\n   * Logs the user out by revoking their access token.\n   */\n  logout(): Observable<void>;\n}\n\nexport const DaffLoginDriver = new InjectionToken('DaffLoginDriver');\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nexport interface DaffAuthServiceInterface {\n  /**\n   * Checks the validity of an auth token.\n   */\n  check(): Observable<void>;\n}\n\nexport const DaffAuthDriver = new InjectionToken<DaffAuthServiceInterface>('DaffAuthDriver')\n","import { Injectable, Inject } from '@angular/core';\n\nimport { DaffPersistenceService, DaffPersistenceServiceToken } from '@daffodil/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffAuthStorageService {\n  private readonly AUTH_STORAGE_TOKEN = 'DAFF_AUTH_TOKEN';\n\n  constructor(@Inject(DaffPersistenceServiceToken) private storageService: DaffPersistenceService) {}\n\n  getAuthToken(): string {\n    return this.storageService.getItem(this.AUTH_STORAGE_TOKEN);\n  }\n\n  setAuthToken(value: string): void {\n    this.storageService.setItem(this.AUTH_STORAGE_TOKEN, value);\n  }\n\n  removeAuthToken(): void {\n    this.storageService.removeItem(this.AUTH_STORAGE_TOKEN);\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, map, catchError, mapTo, tap, switchMapTo } from 'rxjs/operators';\nimport { of, Observable, EMPTY } from 'rxjs';\n\nimport {\n  DaffAuthActionTypes,\n  DaffAuthLogin,\n  DaffAuthLoginSuccess,\n  DaffAuthLoginFailure,\n  DaffAuthRegister,\n  DaffAuthRegisterSuccess,\n  DaffAuthRegisterFailure,\n  DaffAuthCheckSuccess,\n  DaffAuthCheckFailure,\n  DaffAuthCheck,\n  DaffAuthLogoutSuccess,\n  DaffAuthLogoutFailure,\n  DaffAuthLogout,\n  DaffAuthGuardCheckCompletion,\n  DaffAuthGuardCheck,\n  DaffAuthStorageFailure\n} from '../actions/auth.actions';\nimport { DaffRegisterDriver, DaffRegisterServiceInterface } from '../drivers/interfaces/register-service.interface';\nimport { DaffLoginDriver, DaffLoginServiceInterface } from '../drivers/interfaces/login-service.interface';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAccountRegistration } from '../models/account-registration';\nimport { DaffLoginInfo } from '../models/login-info';\nimport { DaffAuthDriver, DaffAuthServiceInterface } from '../drivers/interfaces/auth-service.interface';\nimport { DaffAuthStorageService } from '../storage/auth-storage.service';\n\n@Injectable()\nexport class DaffAuthEffects<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n> {\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffRegisterDriver) private registerDriver: DaffRegisterServiceInterface<S, T>,\n    @Inject(DaffLoginDriver) private loginDriver: DaffLoginServiceInterface<T, U>,\n    @Inject(DaffAuthDriver) private authDriver: DaffAuthServiceInterface,\n    private storage: DaffAuthStorageService\n  ) {}\n\n  @Effect()\n  check$ : Observable<DaffAuthCheckSuccess | DaffAuthCheckFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthCheckAction),\n    switchMap((action: DaffAuthCheck) =>\n      this.checkToken().pipe(\n        mapTo(new DaffAuthCheckSuccess()),\n        catchError(error =>\n          of(new DaffAuthCheckFailure('Auth token is not valid'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  login$ : Observable<DaffAuthLoginSuccess<U> | DaffAuthLoginFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLoginAction),\n    switchMap((action: DaffAuthLogin<T>) =>\n      this.loginDriver.login(action.loginInfo).pipe(\n        map((resp) =>\n          new DaffAuthLoginSuccess<U>(resp)\n        ),\n        catchError(error =>\n          of(new DaffAuthLoginFailure('Failed to log in'))\n        )\n      )\n    )\n  )\n\n  @Effect({\n    dispatch: false\n  })\n  storeAuthToken$ = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLoginSuccessAction),\n    tap((action: DaffAuthLoginSuccess<U>) => {\n      this.storage.setAuthToken(action.auth.token)\n    }),\n    switchMapTo(EMPTY),\n    catchError(error => of(new DaffAuthStorageFailure('Storage of auth token has failed.')))\n  )\n\n  @Effect()\n  logout$ : Observable<DaffAuthLogoutSuccess | DaffAuthLogoutFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLogoutAction),\n    switchMap((action: DaffAuthLogout) =>\n      this.loginDriver.logout().pipe(\n        mapTo(new DaffAuthLogoutSuccess()),\n        catchError(error =>\n          of(new DaffAuthLogoutFailure('Failed to log out'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  loginAfterRegister$: Observable<DaffAuthLogin<T>> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthRegisterSuccessAction),\n    map((action: DaffAuthRegisterSuccess<T>) => new DaffAuthLogin(action.loginInfo))\n  )\n\n  @Effect()\n  register$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthRegisterAction),\n    switchMap((action: DaffAuthRegister<S>) =>\n      this.registerDriver.register(action.registration).pipe(\n        map((resp) =>\n          new DaffAuthRegisterSuccess<T>(resp)\n        ),\n        catchError(error =>\n          of(new DaffAuthRegisterFailure('Failed to register a new user'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  guardCheck$: Observable<DaffAuthGuardCheckCompletion> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthGuardCheckAction),\n    switchMap((action: DaffAuthGuardCheck) =>\n      this.checkToken().pipe(\n        mapTo(new DaffAuthGuardCheckCompletion(true)),\n        catchError(error =>\n          of(new DaffAuthGuardCheckCompletion(false))\n        )\n      )\n    )\n  )\n\n  private checkToken() {\n    return this.authDriver.check()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { DaffAuthEffects } from './effects/auth.effects';\nimport { DAFF_AUTH_STORE_FEATURE_KEY, daffAuthReducers } from './reducers/public_api';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature(DAFF_AUTH_STORE_FEATURE_KEY, daffAuthReducers),\n    EffectsModule.forFeature([DaffAuthEffects]),\n  ]\n})\nexport class DaffAuthStateModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffAuthStateModule } from './auth-state.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    DaffAuthStateModule\n  ],\n})\nexport class DaffAuthModule { }\n","import { Injectable } from '@angular/core';\n\nimport { DaffLoginInfo } from '../../../models/login-info'\nimport { DaffAccountRegistration } from '../../../models/account-registration'\n\n/**\n * Transforms magento auths into an object usable by daffodil.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoLoginInfoTransformerService {\n  transform(registration: DaffAccountRegistration): DaffLoginInfo {\n    return {\n      email: registration.customer.email,\n      password: registration.password\n    }\n  }\n}\n","import gql from 'graphql-tag';\n\nexport const checkTokenQuery = gql`\n  query CheckToken {\n    customer {\n      id\n    }\n  }\n`\n","import gql from 'graphql-tag';\n\nexport const createCustomerMutation = gql`\n  mutation CreateCustomer(\n    $email: String!,\n    $password: String!,\n    $firstname: String!,\n    $lastname: String!,\n  ) {\n    createCustomer(input: {\n      firstname: $firstname,\n      lastname: $lastname,\n      email: $email,\n      password: $password\n    })\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const generateTokenMutation = gql`\n  mutation GenerateToken($email: String!, $password: String!) {\n    generateCustomerToken(\n      email: $email,\n      password: $password\n    ) {\n      token\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const revokeCustomerTokenMutation = gql`\n  mutation revokeCustomerToken {\n    revokeCustomerToken {\n      result\n    }\n  }\n`;\n","export enum MagentoAuthGraphQlErrorCode {\n  UNAUTHORIZED = 'graphql-authorization',\n  AUTHENTICATION_FAILED = 'graphql-authentication',\n  BAD_INPUT = 'graphql-input'\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffUnauthorizedError extends DaffInheritableError implements DaffError {\n\tpublic readonly code: string = 'DAFF_AUTH_UNAUTHORIZED';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffAuthenticationFailedError extends DaffInheritableError implements DaffError {\n\tpublic readonly code: string = 'DAFF_AUTH_AUTHENTICATION_FAILED';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffAuthInvalidAPIResponseError extends DaffInheritableError implements DaffError {\n  public readonly code: string = 'DAFF_AUTH_INVALID_API_RESPONSE';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffErrorCodeMap } from '@daffodil/core';\nimport { DaffBadInputError } from '@daffodil/driver';\n\nimport { MagentoAuthGraphQlErrorCode } from './codes';\nimport {\n  DaffUnauthorizedError,\n  DaffAuthenticationFailedError,\n} from '../../../errors/public_api';\n\nexport const DaffAuthMagentoErrorMap: DaffErrorCodeMap = {\n\t[MagentoAuthGraphQlErrorCode.UNAUTHORIZED]: DaffUnauthorizedError,\n\t[MagentoAuthGraphQlErrorCode.AUTHENTICATION_FAILED]: DaffAuthenticationFailedError,\n\t[MagentoAuthGraphQlErrorCode.BAD_INPUT]: DaffBadInputError,\n};\n","import { daffTransformMagentoError } from '@daffodil/driver/magento';\n\nimport { DaffAuthMagentoErrorMap } from './map';\n\nexport const transformMagentoAuthError = (error: any): Error => {\n\treturn daffTransformMagentoError(error, DaffAuthMagentoErrorMap)\n};\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { mapTo, catchError } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffRegisterServiceInterface } from '../interfaces/register-service.interface';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { DaffMagentoLoginInfoTransformerService } from './transforms/login-info-transformer.service';\nimport { createCustomerMutation } from './queries/public_api';\nimport { transformMagentoAuthError } from './errors/transform';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoRegisterService implements DaffRegisterServiceInterface<DaffAccountRegistration, DaffLoginInfo> {\n  constructor(\n    private apollo: Apollo,\n    private loginInfoTransformer: DaffMagentoLoginInfoTransformerService\n  ) {}\n\n  register(registration: DaffAccountRegistration): Observable<DaffLoginInfo> {\n    return this.apollo.mutate({\n      mutation: createCustomerMutation,\n      variables: {\n        email: registration.customer.email,\n        password: registration.password,\n        firstname: registration.customer.firstName,\n        lastname: registration.customer.lastName\n      }\n    }).pipe(\n      mapTo(this.loginInfoTransformer.transform(registration)),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { DaffAuthToken } from '../../../models/auth-token'\nimport { MagentoAuth } from '../models/response/auth';\n\n/**\n * Transforms magento auths into an object usable by daffodil.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAuthTransformerService {\n\n  /**\n   * Transforms the magento AuthNode from the magento auth query into a DaffAuthToken.\n   * @param auth the auth from a magento auth query.\n   */\n  transform(auth: MagentoAuth): DaffAuthToken {\n    return {\n      token: auth.token\n    }\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoCheckTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateCheckTokenResponse = (response: ApolloQueryResult<MagentoCheckTokenResponse>) => {\n  if (response.data.customer.id) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Check token response does not contain a valid customer ID.')\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoGenerateTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateGenerateTokenResponse = (response: ApolloQueryResult<MagentoGenerateTokenResponse>) => {\n  if (response.data.generateCustomerToken.token) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Generate token response does not contain an auth token.')\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoRevokeCustomerTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateRevokeTokenResponse = (response: ApolloQueryResult<MagentoRevokeCustomerTokenResponse>) => {\n  if (response.data.revokeCustomerToken.result) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Revoke token response does not contain a successful result.')\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError, mapTo } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffLoginServiceInterface } from '../interfaces/login-service.interface';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  MagentoRevokeCustomerTokenResponse,\n  MagentoGenerateTokenResponse,\n  generateTokenMutation,\n  revokeCustomerTokenMutation\n} from './queries/public_api';\nimport { DaffMagentoAuthTransformerService } from './transforms/auth-transformer.service';\nimport { transformMagentoAuthError } from './errors/transform';\nimport { validateRevokeTokenResponse, validateGenerateTokenResponse } from './validators/public_api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoLoginService implements DaffLoginServiceInterface<DaffLoginInfo, DaffAuthToken> {\n  constructor(\n    private apollo: Apollo,\n    public authTransformer: DaffMagentoAuthTransformerService,\n  ) {}\n\n  login({email, password}: DaffLoginInfo): Observable<DaffAuthToken> {\n    return this.apollo.mutate<MagentoGenerateTokenResponse>({\n      mutation: generateTokenMutation,\n      variables: {\n        email,\n        password\n      }\n    }).pipe(\n      map(validateGenerateTokenResponse),\n      map(res => this.authTransformer.transform(res.data.generateCustomerToken)),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n\n  logout() {\n    return this.apollo.mutate<MagentoRevokeCustomerTokenResponse>({mutation: revokeCustomerTokenMutation}).pipe(\n      map(validateRevokeTokenResponse),\n      mapTo(undefined),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError, mapTo } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffAuthServiceInterface } from '../interfaces/auth-service.interface';\nimport {\n  checkTokenQuery,\n  MagentoCheckTokenResponse\n} from './queries/public_api';\nimport { validateCheckTokenResponse } from './validators/public_api';\nimport { transformMagentoAuthError } from './errors/transform';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAuthService implements DaffAuthServiceInterface {\n  constructor(private apollo: Apollo) {}\n\n  check(): Observable<void> {\n    return this.apollo.query<MagentoCheckTokenResponse>({query: checkTokenQuery}).pipe(\n      map(validateCheckTokenResponse),\n      mapTo(undefined),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffRegisterDriver } from '../interfaces/register-service.interface';\nimport { DaffMagentoRegisterService } from './register.service';\n\nimport { DaffLoginDriver } from '../interfaces/login-service.interface';\nimport { DaffMagentoLoginService } from './login.service';\n\nimport { DaffAuthDriver } from '../interfaces/auth-service.interface';\nimport { DaffMagentoAuthService } from './auth.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ]\n})\nexport class DaffAuthMagentoDriverModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: DaffAuthMagentoDriverModule,\n      providers: [\n        {\n          provide: DaffRegisterDriver,\n          useExisting: DaffMagentoRegisterService\n        },\n        {\n          provide: DaffLoginDriver,\n          useExisting: DaffMagentoLoginService\n        },\n        {\n          provide: DaffAuthDriver,\n          useExisting: DaffMagentoAuthService\n        }\n      ]\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Actions, ofType } from '@ngrx/effects';\n\nimport {\n  DaffAuthActionTypes,\n  DaffAuthGuardCheckCompletion,\n  DaffAuthGuardCheck\n} from '../actions/auth.actions';\nimport { DaffAuthFacade } from '../facades/auth.facade';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MemberOnlyGuard implements CanActivate {\n  constructor(\n    private facade: DaffAuthFacade,\n    private actions$: Actions,\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    const ret = this.isAuthenticated();\n\n    this.facade.dispatch(new DaffAuthGuardCheck());\n\n    return ret\n  }\n\n  isAuthenticated(): Observable<boolean> {\n    return this.actions$.pipe(\n      ofType(DaffAuthActionTypes.AuthGuardCheckCompletionAction),\n      map((action: DaffAuthGuardCheckCompletion) => action.result)\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { MemberOnlyGuard } from './member-only.guard';\nimport { DaffAuthFacade } from '../facades/auth.facade';\nimport { DaffAuthGuardCheck } from '../actions/auth.actions';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GuestOnlyGuard implements CanActivate {\n  constructor(\n    private facade: DaffAuthFacade,\n    private memberOnlyGuard: MemberOnlyGuard\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    const ret = this.isUnauthenticated();\n\n    this.facade.dispatch(new DaffAuthGuardCheck());\n\n    return ret\n  }\n\n  isUnauthenticated(): Observable<boolean> {\n    return this.memberOnlyGuard.isAuthenticated().pipe(\n      map(authenticated => !authenticated)\n    )\n  }\n}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}