{"version":3,"file":"daffodil-auth.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://@daffodil/auth/actions/auth.actions.ts","ng://@daffodil/auth/reducers/auth/auth-initial-state.ts","ng://@daffodil/auth/reducers/auth/auth.reducer.ts","ng://@daffodil/auth/reducers/login/login-initial-state.ts","ng://@daffodil/auth/reducers/login/login.reducer.ts","ng://@daffodil/auth/reducers/register/register-initial-state.ts","ng://@daffodil/auth/reducers/register/register.reducer.ts","ng://@daffodil/auth/reducers/auth-store-feature-key.ts","ng://@daffodil/auth/reducers/auth-reducers.ts","ng://@daffodil/auth/selectors/auth-feature.selector.ts","ng://@daffodil/auth/selectors/auth/auth.selector.ts","ng://@daffodil/auth/selectors/login/login.selector.ts","ng://@daffodil/auth/selectors/register/register.selector.ts","ng://@daffodil/auth/selectors/auth-all.selector.ts","ng://@daffodil/auth/facades/auth.facade.ts","ng://@daffodil/auth/drivers/interfaces/register-service.interface.ts","ng://@daffodil/auth/drivers/interfaces/login-service.interface.ts","ng://@daffodil/auth/drivers/interfaces/auth-service.interface.ts","ng://@daffodil/auth/storage/auth-storage.service.ts","ng://@daffodil/auth/effects/auth.effects.ts","ng://@daffodil/auth/auth-state.module.ts","ng://@daffodil/auth/auth.module.ts","ng://@daffodil/auth/drivers/magento/transforms/login-info-transformer.service.ts","ng://@daffodil/auth/drivers/magento/queries/check-token.ts","ng://@daffodil/auth/drivers/magento/queries/create-customer.ts","ng://@daffodil/auth/drivers/magento/queries/generate-token.ts","ng://@daffodil/auth/drivers/magento/queries/revoke-customer-token.ts","ng://@daffodil/auth/drivers/magento/errors/codes.ts","ng://@daffodil/auth/errors/unauthorized.ts","ng://@daffodil/auth/errors/authentication-failed.ts","ng://@daffodil/auth/errors/invalid-api-response.ts","ng://@daffodil/auth/drivers/magento/errors/map.ts","ng://@daffodil/auth/drivers/magento/errors/transform.ts","ng://@daffodil/auth/drivers/magento/register.service.ts","ng://@daffodil/auth/drivers/magento/transforms/auth-transformer.service.ts","ng://@daffodil/auth/drivers/magento/validators/check-token.ts","ng://@daffodil/auth/drivers/magento/validators/generate-token.ts","ng://@daffodil/auth/drivers/magento/validators/revoke-token.ts","ng://@daffodil/auth/drivers/magento/login.service.ts","ng://@daffodil/auth/drivers/magento/auth.service.ts","ng://@daffodil/auth/drivers/magento/auth-driver.module.ts","ng://@daffodil/auth/guards/member-only.guard.ts","ng://@daffodil/auth/guards/guest-only.guard.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Action } from '@ngrx/store';\n\nimport { DaffLoginInfo } from '../models/login-info';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAccountRegistration } from '../models/account-registration';\n\nexport enum DaffAuthActionTypes {\n  AuthGuardCheckAction = '[Daff-Auth] Auth Guard Check Action',\n  AuthGuardCheckCompletionAction = '[Daff-Auth] Auth Guard Check Completion Action',\n  AuthStorageFailureAction = '[Daff-Auth] Auth Storage Failure Action',\n  AuthLoginAction = '[Daff-Auth] Auth Login Action',\n  AuthLoginSuccessAction = '[Daff-Auth] Auth Login Success Action',\n  AuthLoginFailureAction = '[Daff-Auth] Auth Login Failure Action',\n  AuthLogoutAction = '[Daff-Auth] Auth Logout Action',\n  AuthLogoutSuccessAction = '[Daff-Auth] Auth Logout Success Action',\n  AuthLogoutFailureAction = '[Daff-Auth] Auth Logout Failure Action',\n  AuthCheckAction = '[Daff-Auth] Auth Check Action',\n  AuthCheckSuccessAction = '[Daff-Auth] Auth Check Success Action',\n  AuthCheckFailureAction = '[Daff-Auth] Auth Check Failure Action',\n  AuthRegisterAction = '[Daff-Auth] Auth Register Action',\n  AuthRegisterSuccessAction = '[Daff-Auth] Auth Register Success Action',\n  AuthRegisterFailureAction = '[Daff-Auth] Auth Register Failure Action',\n}\n\n/**\n * An action triggered by guards to initialize an auth check request.\n */\nexport class DaffAuthGuardCheck implements Action {\n  readonly type = DaffAuthActionTypes.AuthGuardCheckAction;\n}\n\n/**\n * An action triggered on the completion of a guard token check.\n */\nexport class DaffAuthGuardCheckCompletion implements Action {\n  readonly type = DaffAuthActionTypes.AuthGuardCheckCompletionAction;\n\n  constructor(public result: boolean) {}\n}\n\n/*\n * An action triggered upon a failed auth storage operation.\n */\nexport class DaffAuthStorageFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthStorageFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a auth login request.\n */\nexport class DaffAuthLogin<T extends DaffLoginInfo> implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginAction;\n\n  constructor(public loginInfo: T) {}\n}\n\n/**\n * An action triggered upon a successful auth login.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthLoginSuccess<T extends DaffAuthToken> implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginSuccessAction;\n\n  constructor(public auth: T) {}\n}\n\n/**\n * An action triggered upon a failed auth login request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthLoginFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthLoginFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a logout request.\n */\nexport class DaffAuthLogout implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutAction;\n}\n\n/**\n * An action triggered upon a successful logout.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthLogoutSuccess implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutSuccessAction;\n}\n\n/**\n * An action triggered upon a failed logout request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthLogoutFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthLogoutFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n\n/**\n * An action triggered to initialize an auth check request.\n */\nexport class DaffAuthCheck implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckAction;\n}\n\n/**\n * An action triggered upon a successful auth check.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthCheckSuccess implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckSuccessAction;\n}\n\n/**\n * An action triggered upon a failed auth check request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthCheckFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthCheckFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\n/**\n * An action triggered to initialize a auth register request.\n *\n * @param registration\n */\nexport class DaffAuthRegister<T extends DaffAccountRegistration> implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterAction;\n\n  constructor(public registration: T) {}\n}\n\n/**\n * An action triggered upon a successful auth register request.\n *\n * @param token - the customer access token\n */\nexport class DaffAuthRegisterSuccess<T extends DaffLoginInfo> implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterSuccessAction;\n\n  constructor(public loginInfo: T) {}\n}\n\n/**\n * An action triggered upon a failed auth request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffAuthRegisterFailure implements Action {\n  readonly type = DaffAuthActionTypes.AuthRegisterFailureAction;\n\n  constructor(public errorMessage: string) {}\n}\n\nexport type DaffAuthActions<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n> =\n  | DaffAuthGuardCheckCompletion\n  | DaffAuthGuardCheck\n  | DaffAuthStorageFailure\n  | DaffAuthLogin<T>\n  | DaffAuthLoginSuccess<U>\n  | DaffAuthLoginFailure\n  | DaffAuthLogout\n  | DaffAuthLogoutSuccess\n  | DaffAuthLogoutFailure\n  | DaffAuthCheck\n  | DaffAuthCheckSuccess\n  | DaffAuthCheckFailure\n  | DaffAuthRegister<S>\n  | DaffAuthRegisterSuccess<T>\n  | DaffAuthRegisterFailure\n","import { DaffAuthReducerState } from './auth-reducer-state.interface';\n\nexport const daffAuthInitialState: DaffAuthReducerState = {\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthReducerState } from './auth-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthInitialState } from './auth-initial-state';\n\nexport function daffAuthReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthReducerState {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthCheckAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthCheckSuccessAction:\n      return {\n        ...state,\n        loading: false\n      };\n\n    case DaffAuthActionTypes.AuthCheckFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","import { DaffAuthLoginReducerState } from './login-reducer-state.interface';\n\nexport const daffAuthLoginInitialState: DaffAuthLoginReducerState<any> = {\n  auth: null,\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthLoginReducerState } from './login-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthLoginInitialState } from './login-initial-state';\n\nexport function daffAuthLoginReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthLoginInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthLoginReducerState<U> {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthLoginAction:\n    case DaffAuthActionTypes.AuthLogoutAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthLoginSuccessAction:\n      return {\n        ...state,\n        loading: false,\n        auth: action.auth\n      };\n\n    case DaffAuthActionTypes.AuthLogoutSuccessAction:\n      return {\n        ...state,\n        auth: null,\n        loading: false,\n      };\n\n    case DaffAuthActionTypes.AuthLoginFailureAction:\n    case DaffAuthActionTypes.AuthLogoutFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","import { DaffAuthRegisterReducerState } from './register-reducer-state.interface';\n\nexport const daffAuthRegisterInitialState: DaffAuthRegisterReducerState = {\n  loading: false,\n  errors: []\n};\n","import { DaffAuthActionTypes, DaffAuthActions } from '../../actions/auth.actions';\nimport { DaffAuthRegisterReducerState } from './register-reducer-state.interface';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { daffAuthRegisterInitialState } from './register-initial-state';\n\nexport function daffAuthRegisterReducer<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n>(\n  state = daffAuthRegisterInitialState,\n  action: DaffAuthActions<\n    T,\n    U,\n    S\n  >\n): DaffAuthRegisterReducerState {\n  switch (action.type) {\n    case DaffAuthActionTypes.AuthRegisterAction:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case DaffAuthActionTypes.AuthRegisterSuccessAction:\n      return {\n        ...state,\n        loading: false\n      };\n\n    case DaffAuthActionTypes.AuthRegisterFailureAction:\n      return {\n        ...state,\n        loading: false,\n        errors: [action.errorMessage]\n      };\n\n    default:\n      return state;\n  }\n}\n","export const DAFF_AUTH_STORE_FEATURE_KEY = 'daffAuth';\n","import { daffAuthReducer } from './auth/public_api';\nimport { daffAuthLoginReducer } from './login/public_api';\nimport { daffAuthRegisterReducer } from './register/public_api';\n\nexport const daffAuthReducers = {\n  auth: daffAuthReducer,\n  login: daffAuthLoginReducer,\n  register: daffAuthRegisterReducer\n}\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffAuthFeatureState, DAFF_AUTH_STORE_FEATURE_KEY } from '../reducers/public_api';\nimport { DaffAuthToken } from '../models/auth-token';\n\n/**\n * Feature State Selector\n */\nexport const getDaffAuthFeatureStateSelector = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): MemoizedSelector<object, DaffAuthFeatureState<T>> =>\n    cache = cache || createFeatureSelector<DaffAuthFeatureState<T>>(DAFF_AUTH_STORE_FEATURE_KEY)\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  DaffAuthReducerState\n} from '../../reducers/public_api';\n\n\nexport interface AuthSelectors {\n  selectAuthState: MemoizedSelector<object, DaffAuthReducerState>;\n  selectAuthLoading: MemoizedSelector<object, boolean>;\n  selectAuthErrors: MemoizedSelector<object, string[]>;\n}\n\nconst createAuthSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.auth\n  )\n\n  const selectAuthLoading = createSelector(\n    selectAuthState,\n    state => state.loading\n  );\n\n  const selectAuthErrors = createSelector(\n    selectAuthState,\n    state => state.errors\n  );\n\n  return {\n    selectAuthState,\n    selectAuthLoading,\n    selectAuthErrors,\n  }\n};\n\nexport const getAuthSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): AuthSelectors =>\n    cache = cache || createAuthSelectors<T>()\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport { DaffAuthFeatureState } from '../../reducers/auth-feature-state.interface';\nimport { DaffAuthLoginReducerState } from '../../reducers/public_api';\n\nexport interface DaffAuthLoginSelectors<T extends DaffAuthToken> {\n  selectAuthLoginState: MemoizedSelector<object, DaffAuthLoginReducerState<T>>;\n  selectAuthLoginLoading: MemoizedSelector<object, boolean>;\n  selectAuthLoginErrors: MemoizedSelector<object, string[]>;\n  selectAuthLoginToken: MemoizedSelector<object, T>;\n  selectAuthLoginTokenValue: MemoizedSelector<object, T['token']>;\n}\n\nconst createLoginSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthLoginState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.login\n  )\n\n  const selectAuthLoginLoading = createSelector(\n    selectAuthLoginState,\n    state => state.loading\n  );\n\n  const selectAuthLoginErrors = createSelector(\n    selectAuthLoginState,\n    state => state.errors\n  );\n\n  const selectAuthLoginToken = createSelector(\n    selectAuthLoginState,\n    state => state.auth\n  );\n\n  const selectAuthLoginTokenValue = createSelector(\n    selectAuthLoginToken,\n    state => state ? state.token : null\n  );\n\n  return {\n    selectAuthLoginState,\n    selectAuthLoginLoading,\n    selectAuthLoginErrors,\n    selectAuthLoginToken,\n    selectAuthLoginTokenValue\n  }\n};\n\nexport const getDaffAuthLoginSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthLoginSelectors<T> =>\n    cache = cache || createLoginSelectors<T>()\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { getDaffAuthFeatureStateSelector } from '../auth-feature.selector';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  DaffAuthRegisterReducerState,\n} from '../../reducers/public_api';\n\nexport interface DaffAuthRegisterSelectors {\n  selectAuthRegisterState: MemoizedSelector<object, DaffAuthRegisterReducerState>;\n  selectAuthRegisterLoading: MemoizedSelector<object, boolean>;\n  selectAuthRegisterErrors: MemoizedSelector<object, string[]>;\n}\n\nconst createRegisterSelectors = <T extends DaffAuthToken>() => {\n  const selectAuthRegisterState = createSelector(\n    getDaffAuthFeatureStateSelector<T>(),\n    state => state.register\n  )\n\n  const selectAuthRegisterLoading = createSelector(\n    selectAuthRegisterState,\n    state => state.loading\n  );\n\n  const selectAuthRegisterErrors = createSelector(\n    selectAuthRegisterState,\n    state => state.errors\n  );\n\n  return {\n    selectAuthRegisterState,\n    selectAuthRegisterLoading,\n    selectAuthRegisterErrors,\n  }\n};\n\nexport const getDaffAuthRegisterSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthRegisterSelectors =>\n    cache = cache || createRegisterSelectors<T>()\n})();\n","import { MemoizedSelector } from '@ngrx/store';\n\nimport { getAuthSelectors, AuthSelectors } from './auth/auth.selector';\nimport { getDaffAuthLoginSelectors, DaffAuthLoginSelectors } from './login/login.selector';\nimport { getDaffAuthRegisterSelectors, DaffAuthRegisterSelectors } from './register/register.selector';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAuthFeatureState } from '../reducers/public_api';\nimport { getDaffAuthFeatureStateSelector } from './auth-feature.selector';\n\nexport interface DaffAuthSelectors<T extends DaffAuthToken> extends\n  DaffAuthRegisterSelectors,\n  DaffAuthLoginSelectors<T>,\n  AuthSelectors {\n  selectAuthFeatureState: MemoizedSelector<object, DaffAuthFeatureState<T>>;\n}\n\nexport const getDaffAuthSelectors = (() => {\n  let cache;\n  return <T extends DaffAuthToken>(): DaffAuthSelectors<T> =>\n    cache = cache || {\n      ...getAuthSelectors<T>(),\n      ...getDaffAuthLoginSelectors<T>(),\n      ...getDaffAuthRegisterSelectors<T>(),\n      selectAuthFeatureState: getDaffAuthFeatureStateSelector<T>()\n    }\n})();\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Action, Store, select } from '@ngrx/store';\n\nimport { DaffAuthFeatureState } from '../reducers/public_api';\nimport {\n  getDaffAuthSelectors\n} from '../selectors/public_api';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAuthFacadeInterface } from '../interfaces/auth-facade.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffAuthFacade<T extends DaffAuthToken = DaffAuthToken> implements DaffAuthFacadeInterface<T> {\n  auth$: Observable<T>;\n  token$: Observable<T['token']>\n\n  authLoading$: Observable<boolean>;\n  authErrors$: Observable<string[]>;\n\n  loginLoading$: Observable<boolean>;\n  loginErrors$: Observable<string[]>;\n\n  registerLoading$: Observable<boolean>;\n  registerErrors$: Observable<string[]>;\n\n  constructor(private store: Store<DaffAuthFeatureState<T>>) {\n    const {\n      selectAuthLoginToken,\n      selectAuthLoading,\n      selectAuthErrors,\n      selectAuthLoginLoading,\n      selectAuthLoginErrors,\n      selectAuthRegisterLoading,\n      selectAuthRegisterErrors,\n      selectAuthLoginTokenValue\n    } = getDaffAuthSelectors<T>();\n\n    this.auth$ = this.store.pipe(select(selectAuthLoginToken));\n    this.token$ = this.store.pipe(select(selectAuthLoginTokenValue));\n\n    this.authLoading$ = this.store.pipe(select(selectAuthLoading));\n    this.authErrors$ = this.store.pipe(select(selectAuthErrors));\n\n    this.loginLoading$ = this.store.pipe(select(selectAuthLoginLoading));\n    this.loginErrors$ = this.store.pipe(select(selectAuthLoginErrors));\n\n    this.registerLoading$ = this.store.pipe(select(selectAuthRegisterLoading));\n    this.registerErrors$ = this.store.pipe(select(selectAuthRegisterErrors));\n  }\n\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { DaffLoginInfo } from '../../models/login-info';\n\nexport interface DaffRegisterServiceInterface<\n  TRequest extends DaffAccountRegistration,\n  TResponse extends DaffLoginInfo\n> {\n\n  /**\n   * Registers an account for the specified customer.\n   *\n   * @param registration The account registration info.\n   * @returns Login info.\n   */\n  register(registration: TRequest): Observable<TResponse>;\n}\n\nexport const DaffRegisterDriver = new InjectionToken('DaffRegisterDriver');\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAuthToken } from '../../models/auth-token';\n\nexport interface DaffLoginServiceInterface<\n  TRequest extends DaffLoginInfo,\n  TResponse extends DaffAuthToken\n> {\n  /**\n   * Logs the user in.\n   *\n   * @returns An access token.\n   */\n  login(loginInfo: TRequest): Observable<TResponse>;\n\n  /**\n   * Logs the user out by revoking their access token.\n   */\n  logout(): Observable<void>;\n}\n\nexport const DaffLoginDriver = new InjectionToken('DaffLoginDriver');\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nexport interface DaffAuthServiceInterface {\n  /**\n   * Checks the validity of an auth token.\n   */\n  check(): Observable<void>;\n}\n\nexport const DaffAuthDriver = new InjectionToken<DaffAuthServiceInterface>('DaffAuthDriver')\n","import { Injectable, Inject } from '@angular/core';\n\nimport { DaffPersistenceService, DaffPersistenceServiceToken } from '@daffodil/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffAuthStorageService {\n  private readonly AUTH_STORAGE_TOKEN = 'DAFF_AUTH_TOKEN';\n\n  constructor(@Inject(DaffPersistenceServiceToken) private storageService: DaffPersistenceService) {}\n\n  getAuthToken(): string {\n    return this.storageService.getItem(this.AUTH_STORAGE_TOKEN);\n  }\n\n  setAuthToken(value: string): void {\n    this.storageService.setItem(this.AUTH_STORAGE_TOKEN, value);\n  }\n\n  removeAuthToken(): void {\n    this.storageService.removeItem(this.AUTH_STORAGE_TOKEN);\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, map, catchError, mapTo, tap, switchMapTo } from 'rxjs/operators';\nimport { of, Observable, EMPTY } from 'rxjs';\n\nimport {\n  DaffAuthActionTypes,\n  DaffAuthLogin,\n  DaffAuthLoginSuccess,\n  DaffAuthLoginFailure,\n  DaffAuthRegister,\n  DaffAuthRegisterSuccess,\n  DaffAuthRegisterFailure,\n  DaffAuthCheckSuccess,\n  DaffAuthCheckFailure,\n  DaffAuthCheck,\n  DaffAuthLogoutSuccess,\n  DaffAuthLogoutFailure,\n  DaffAuthLogout,\n  DaffAuthGuardCheckCompletion,\n  DaffAuthGuardCheck,\n  DaffAuthStorageFailure\n} from '../actions/auth.actions';\nimport { DaffRegisterDriver, DaffRegisterServiceInterface } from '../drivers/interfaces/register-service.interface';\nimport { DaffLoginDriver, DaffLoginServiceInterface } from '../drivers/interfaces/login-service.interface';\nimport { DaffAuthToken } from '../models/auth-token';\nimport { DaffAccountRegistration } from '../models/account-registration';\nimport { DaffLoginInfo } from '../models/login-info';\nimport { DaffAuthDriver, DaffAuthServiceInterface } from '../drivers/interfaces/auth-service.interface';\nimport { DaffAuthStorageService } from '../storage/auth-storage.service';\n\n@Injectable()\nexport class DaffAuthEffects<\n  T extends DaffLoginInfo,\n  U extends DaffAuthToken,\n  S extends DaffAccountRegistration,\n> {\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffRegisterDriver) private registerDriver: DaffRegisterServiceInterface<S, T>,\n    @Inject(DaffLoginDriver) private loginDriver: DaffLoginServiceInterface<T, U>,\n    @Inject(DaffAuthDriver) private authDriver: DaffAuthServiceInterface,\n    private storage: DaffAuthStorageService\n  ) {}\n\n  @Effect()\n  check$ : Observable<DaffAuthCheckSuccess | DaffAuthCheckFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthCheckAction),\n    switchMap((action: DaffAuthCheck) =>\n      this.checkToken().pipe(\n        mapTo(new DaffAuthCheckSuccess()),\n        catchError(error =>\n          of(new DaffAuthCheckFailure('Auth token is not valid'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  login$ : Observable<DaffAuthLoginSuccess<U> | DaffAuthLoginFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLoginAction),\n    switchMap((action: DaffAuthLogin<T>) =>\n      this.loginDriver.login(action.loginInfo).pipe(\n        map((resp) =>\n          new DaffAuthLoginSuccess<U>(resp)\n        ),\n        catchError(error =>\n          of(new DaffAuthLoginFailure('Failed to log in'))\n        )\n      )\n    )\n  )\n\n  @Effect({\n    dispatch: false\n  })\n  storeAuthToken$ = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLoginSuccessAction),\n    tap((action: DaffAuthLoginSuccess<U>) => {\n      this.storage.setAuthToken(action.auth.token)\n    }),\n    switchMapTo(EMPTY),\n    catchError(error => of(new DaffAuthStorageFailure('Storage of auth token has failed.')))\n  )\n\n  @Effect()\n  logout$ : Observable<DaffAuthLogoutSuccess | DaffAuthLogoutFailure> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthLogoutAction),\n    switchMap((action: DaffAuthLogout) =>\n      this.loginDriver.logout().pipe(\n        mapTo(new DaffAuthLogoutSuccess()),\n        catchError(error =>\n          of(new DaffAuthLogoutFailure('Failed to log out'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  loginAfterRegister$: Observable<DaffAuthLogin<T>> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthRegisterSuccessAction),\n    map((action: DaffAuthRegisterSuccess<T>) => new DaffAuthLogin(action.loginInfo))\n  )\n\n  @Effect()\n  register$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthRegisterAction),\n    switchMap((action: DaffAuthRegister<S>) =>\n      this.registerDriver.register(action.registration).pipe(\n        map((resp) =>\n          new DaffAuthRegisterSuccess<T>(resp)\n        ),\n        catchError(error =>\n          of(new DaffAuthRegisterFailure('Failed to register a new user'))\n        )\n      )\n    )\n  )\n\n  @Effect()\n  guardCheck$: Observable<DaffAuthGuardCheckCompletion> = this.actions$.pipe(\n    ofType(DaffAuthActionTypes.AuthGuardCheckAction),\n    switchMap((action: DaffAuthGuardCheck) =>\n      this.checkToken().pipe(\n        mapTo(new DaffAuthGuardCheckCompletion(true)),\n        catchError(error =>\n          of(new DaffAuthGuardCheckCompletion(false))\n        )\n      )\n    )\n  )\n\n  private checkToken() {\n    return this.authDriver.check()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { DaffAuthEffects } from './effects/auth.effects';\nimport { DAFF_AUTH_STORE_FEATURE_KEY, daffAuthReducers } from './reducers/public_api';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature(DAFF_AUTH_STORE_FEATURE_KEY, daffAuthReducers),\n    EffectsModule.forFeature([DaffAuthEffects]),\n  ]\n})\nexport class DaffAuthStateModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffAuthStateModule } from './auth-state.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    DaffAuthStateModule\n  ],\n})\nexport class DaffAuthModule { }\n","import { Injectable } from '@angular/core';\n\nimport { DaffLoginInfo } from '../../../models/login-info'\nimport { DaffAccountRegistration } from '../../../models/account-registration'\n\n/**\n * Transforms magento auths into an object usable by daffodil.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoLoginInfoTransformerService {\n  transform(registration: DaffAccountRegistration): DaffLoginInfo {\n    return {\n      email: registration.customer.email,\n      password: registration.password\n    }\n  }\n}\n","import gql from 'graphql-tag';\n\nexport const checkTokenQuery = gql`\n  query CheckToken {\n    customer {\n      id\n    }\n  }\n`\n","import gql from 'graphql-tag';\n\nexport const createCustomerMutation = gql`\n  mutation CreateCustomer(\n    $email: String!,\n    $password: String!,\n    $firstname: String!,\n    $lastname: String!,\n  ) {\n    createCustomer(input: {\n      firstname: $firstname,\n      lastname: $lastname,\n      email: $email,\n      password: $password\n    })\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const generateTokenMutation = gql`\n  mutation GenerateToken($email: String!, $password: String!) {\n    generateCustomerToken(\n      email: $email,\n      password: $password\n    ) {\n      token\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const revokeCustomerTokenMutation = gql`\n  mutation revokeCustomerToken {\n    revokeCustomerToken {\n      result\n    }\n  }\n`;\n","export enum MagentoAuthGraphQlErrorCode {\n  UNAUTHORIZED = 'graphql-authorization',\n  AUTHENTICATION_FAILED = 'graphql-authentication',\n  BAD_INPUT = 'graphql-input'\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffUnauthorizedError extends DaffInheritableError implements DaffError {\n\tpublic readonly code: string = 'DAFF_AUTH_UNAUTHORIZED';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffAuthenticationFailedError extends DaffInheritableError implements DaffError {\n\tpublic readonly code: string = 'DAFF_AUTH_AUTHENTICATION_FAILED';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffError, DaffInheritableError } from '@daffodil/core';\n\nexport class DaffAuthInvalidAPIResponseError extends DaffInheritableError implements DaffError {\n  public readonly code: string = 'DAFF_AUTH_INVALID_API_RESPONSE';\n\n\tconstructor(public message: string) {\n\t\tsuper(message);\n\t}\n}\n","import { DaffErrorCodeMap } from '@daffodil/core';\nimport { DaffBadInputError } from '@daffodil/driver';\n\nimport { MagentoAuthGraphQlErrorCode } from './codes';\nimport {\n  DaffUnauthorizedError,\n  DaffAuthenticationFailedError,\n} from '../../../errors/public_api';\n\nexport const DaffAuthMagentoErrorMap: DaffErrorCodeMap = {\n\t[MagentoAuthGraphQlErrorCode.UNAUTHORIZED]: DaffUnauthorizedError,\n\t[MagentoAuthGraphQlErrorCode.AUTHENTICATION_FAILED]: DaffAuthenticationFailedError,\n\t[MagentoAuthGraphQlErrorCode.BAD_INPUT]: DaffBadInputError,\n};\n","import { daffTransformMagentoError } from '@daffodil/driver/magento';\n\nimport { DaffAuthMagentoErrorMap } from './map';\n\nexport const transformMagentoAuthError = (error: any): Error => {\n\treturn daffTransformMagentoError(error, DaffAuthMagentoErrorMap)\n};\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { mapTo, catchError } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffRegisterServiceInterface } from '../interfaces/register-service.interface';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAccountRegistration } from '../../models/account-registration';\nimport { DaffMagentoLoginInfoTransformerService } from './transforms/login-info-transformer.service';\nimport { createCustomerMutation } from './queries/public_api';\nimport { transformMagentoAuthError } from './errors/transform';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoRegisterService implements DaffRegisterServiceInterface<DaffAccountRegistration, DaffLoginInfo> {\n  constructor(\n    private apollo: Apollo,\n    private loginInfoTransformer: DaffMagentoLoginInfoTransformerService\n  ) {}\n\n  register(registration: DaffAccountRegistration): Observable<DaffLoginInfo> {\n    return this.apollo.mutate({\n      mutation: createCustomerMutation,\n      variables: {\n        email: registration.customer.email,\n        password: registration.password,\n        firstname: registration.customer.firstName,\n        lastname: registration.customer.lastName\n      }\n    }).pipe(\n      mapTo(this.loginInfoTransformer.transform(registration)),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { DaffAuthToken } from '../../../models/auth-token'\nimport { MagentoAuth } from '../models/response/auth';\n\n/**\n * Transforms magento auths into an object usable by daffodil.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAuthTransformerService {\n\n  /**\n   * Transforms the magento AuthNode from the magento auth query into a DaffAuthToken.\n   * @param auth the auth from a magento auth query.\n   */\n  transform(auth: MagentoAuth): DaffAuthToken {\n    return {\n      token: auth.token\n    }\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoCheckTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateCheckTokenResponse = (response: ApolloQueryResult<MagentoCheckTokenResponse>) => {\n  if (response.data.customer.id) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Check token response does not contain a valid customer ID.')\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoGenerateTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateGenerateTokenResponse = (response: ApolloQueryResult<MagentoGenerateTokenResponse>) => {\n  if (response.data.generateCustomerToken.token) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Generate token response does not contain an auth token.')\n  }\n}\n","import { ApolloQueryResult } from 'apollo-client';\n\nimport { MagentoRevokeCustomerTokenResponse } from '../queries/public_api';\nimport { DaffAuthInvalidAPIResponseError } from '../../../errors/public_api';\n\nexport const validateRevokeTokenResponse = (response: ApolloQueryResult<MagentoRevokeCustomerTokenResponse>) => {\n  if (response.data.revokeCustomerToken.result) {\n    return response\n  } else {\n    throw new DaffAuthInvalidAPIResponseError('Revoke token response does not contain a successful result.')\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError, mapTo } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffLoginServiceInterface } from '../interfaces/login-service.interface';\nimport { DaffLoginInfo } from '../../models/login-info';\nimport { DaffAuthToken } from '../../models/auth-token';\nimport {\n  MagentoRevokeCustomerTokenResponse,\n  MagentoGenerateTokenResponse,\n  generateTokenMutation,\n  revokeCustomerTokenMutation\n} from './queries/public_api';\nimport { DaffMagentoAuthTransformerService } from './transforms/auth-transformer.service';\nimport { transformMagentoAuthError } from './errors/transform';\nimport { validateRevokeTokenResponse, validateGenerateTokenResponse } from './validators/public_api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoLoginService implements DaffLoginServiceInterface<DaffLoginInfo, DaffAuthToken> {\n  constructor(\n    private apollo: Apollo,\n    public authTransformer: DaffMagentoAuthTransformerService,\n  ) {}\n\n  login({email, password}: DaffLoginInfo): Observable<DaffAuthToken> {\n    return this.apollo.mutate<MagentoGenerateTokenResponse>({\n      mutation: generateTokenMutation,\n      variables: {\n        email,\n        password\n      }\n    }).pipe(\n      map(validateGenerateTokenResponse),\n      map(res => this.authTransformer.transform(res.data.generateCustomerToken)),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n\n  logout() {\n    return this.apollo.mutate<MagentoRevokeCustomerTokenResponse>({mutation: revokeCustomerTokenMutation}).pipe(\n      map(validateRevokeTokenResponse),\n      mapTo(undefined),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError, mapTo } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffAuthServiceInterface } from '../interfaces/auth-service.interface';\nimport {\n  checkTokenQuery,\n  MagentoCheckTokenResponse\n} from './queries/public_api';\nimport { validateCheckTokenResponse } from './validators/public_api';\nimport { transformMagentoAuthError } from './errors/transform';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAuthService implements DaffAuthServiceInterface {\n  constructor(private apollo: Apollo) {}\n\n  check(): Observable<void> {\n    return this.apollo.query<MagentoCheckTokenResponse>({query: checkTokenQuery}).pipe(\n      map(validateCheckTokenResponse),\n      mapTo(undefined),\n      catchError(err => throwError(transformMagentoAuthError(err)))\n    )\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffRegisterDriver } from '../interfaces/register-service.interface';\nimport { DaffMagentoRegisterService } from './register.service';\n\nimport { DaffLoginDriver } from '../interfaces/login-service.interface';\nimport { DaffMagentoLoginService } from './login.service';\n\nimport { DaffAuthDriver } from '../interfaces/auth-service.interface';\nimport { DaffMagentoAuthService } from './auth.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ]\n})\nexport class DaffAuthMagentoDriverModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: DaffAuthMagentoDriverModule,\n      providers: [\n        {\n          provide: DaffRegisterDriver,\n          useExisting: DaffMagentoRegisterService\n        },\n        {\n          provide: DaffLoginDriver,\n          useExisting: DaffMagentoLoginService\n        },\n        {\n          provide: DaffAuthDriver,\n          useExisting: DaffMagentoAuthService\n        }\n      ]\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Actions, ofType } from '@ngrx/effects';\n\nimport {\n  DaffAuthActionTypes,\n  DaffAuthGuardCheckCompletion,\n  DaffAuthGuardCheck\n} from '../actions/auth.actions';\nimport { DaffAuthFacade } from '../facades/auth.facade';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MemberOnlyGuard implements CanActivate {\n  constructor(\n    private facade: DaffAuthFacade,\n    private actions$: Actions,\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    const ret = this.isAuthenticated();\n\n    this.facade.dispatch(new DaffAuthGuardCheck());\n\n    return ret\n  }\n\n  isAuthenticated(): Observable<boolean> {\n    return this.actions$.pipe(\n      ofType(DaffAuthActionTypes.AuthGuardCheckCompletionAction),\n      map((action: DaffAuthGuardCheckCompletion) => action.result)\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { MemberOnlyGuard } from './member-only.guard';\nimport { DaffAuthFacade } from '../facades/auth.facade';\nimport { DaffAuthGuardCheck } from '../actions/auth.actions';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GuestOnlyGuard implements CanActivate {\n  constructor(\n    private facade: DaffAuthFacade,\n    private memberOnlyGuard: MemberOnlyGuard\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    const ret = this.isUnauthenticated();\n\n    this.facade.dispatch(new DaffAuthGuardCheck());\n\n    return ret\n  }\n\n  isUnauthenticated(): Observable<boolean> {\n    return this.memberOnlyGuard.isAuthenticated().pipe(\n      map(authenticated => !authenticated)\n    )\n  }\n}\n"],"names":["createFeatureSelector","createSelector","store","select","Injectable","Store","InjectionToken","Inject","DaffPersistenceServiceToken","ofType","switchMap","mapTo","catchError","of","map","tap","switchMapTo","EMPTY","Actions","tslib_1.__decorate","Effect","Observable","NgModule","StoreModule","EffectsModule","CommonModule","tslib_1.__extends","DaffInheritableError","DaffBadInputError","daffTransformMagentoError","throwError","Apollo"],"mappings":"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"}