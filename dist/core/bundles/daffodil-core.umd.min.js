!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@daffodil/core",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],t):t(((r=r||self).daffodil=r.daffodil||{},r.daffodil.core={}),r.ng.core,r.ng.common,r.rxjs,r.rxjs.operators)}(this,function(r,t,e,o,n){"use strict";var a=function(r,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};function f(r,t){function e(){this.constructor=r}a(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function i(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var o,n,a=e.call(r),f=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)f.push(o.value)}catch(r){n={error:r}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(n)throw n.error}}return f}function c(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(i(arguments[t]));return r}function u(r){var t=1e4;if(null==r)return t;for(;Math.round(r*t)/t!==r;)t*=10;return t}var l=function(r){var t=[];return r.forEach(function(r,e){var o=Math.floor(Math.random()*e);o!==e&&(t[e]=t[o]),t[o]=r}),t},p=function(r){function t(t){var e,o=this.constructor.prototype;return e=r.call(this,t)||this,Object.setPrototypeOf(e,o),e}return f(t,r),t}(Error);var h=function(r){function t(t){var e=r.call(this,t)||this;return e.message=t,e.code="DAFF_STORAGE_FAILURE",e}return f(t,r),t}(p);var s=function(){function r(){}return r.prototype.setItem=function(r,t){this.throwError()},r.prototype.getItem=function(r){this.throwError()},r.prototype.removeItem=function(r){this.throwError()},r.prototype.clear=function(){this.throwError()},r.prototype.throwError=function(){throw new h(r.ERROR_MESSAGE)},r.ERROR_MESSAGE="The DaffErrorStorageService always throws an error.",r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}();var d=function(r){function t(t){var e=r.call(this,t)||this;return e.message=t,e.code="DAFF_SERVER_STORAGE_FAILURE",e}return f(t,r),t}(h);var v=function(){function r(){}return r.prototype.setItem=function(r,t){this.throwError()},r.prototype.getItem=function(r){this.throwError()},r.prototype.removeItem=function(r){this.throwError()},r.prototype.clear=function(){this.throwError()},r.prototype.throwError=function(){throw new d(r.ERROR_MESSAGE)},r.ERROR_MESSAGE="The DaffServerErrorStorageService always throws an error.",r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}();var y=function(){function r(r){if(!e.isPlatformBrowser(r))throw new Error("The DaffLocalStorageService can only be instantiated in the browser.")}return r.prototype.setItem=function(r,t){localStorage.setItem(r,t)},r.prototype.getItem=function(r){return localStorage.getItem(r)},r.prototype.removeItem=function(r){localStorage.removeItem(r)},r.prototype.clear=function(){localStorage.clear()},r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[{type:String,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(t.PLATFORM_ID))},token:r,providedIn:"root"}),r}(),g=function(){function r(){}return r.prototype.setItem=function(r,t){},r.prototype.getItem=function(r){},r.prototype.clear=function(){},r.prototype.removeItem=function(r){},r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}();var m=new t.InjectionToken("DaffPersistenceService",{providedIn:"root",factory:function(){return e.isPlatformBrowser(t.inject(t.PLATFORM_ID))?new y(t.inject(t.PLATFORM_ID)):new v}});r.DaffErrorStorageService=s,r.DaffInheritableError=p,r.DaffLocalStorageService=y,r.DaffNoopStorageService=g,r.DaffPersistenceServiceToken=m,r.DaffServerErrorStorageService=v,r.DaffServerSideStorageError=d,r.DaffStorageServiceError=h,r.backoff=function(r,t){return o.pipe(n.retryWhen(function(e){return e.pipe(n.mergeMap(function(e,n){return n>=r?o.throwError(e):o.timer(t*Math.pow(2,n))}))}))},r.daffAdd=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length<2)throw new Error("Provide at least 2 numbers for daffAdd.");var e=Math.max.apply(Math,c(r.map(u)));return r.reduce(function(r,t){return r+Math.round(t*e)},0)/e},r.daffDivide=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length<2)throw new Error("Provide at least 2 numbers for daffDivide.");var e=Math.max.apply(Math,c(r.map(u)));return r.slice(1).reduce(function(r,t){return r/Math.round(t*e)},Math.round(r[0]*e))*Math.pow(e,r.length-2)},r.daffMultiply=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length<2)throw new Error("Provide at least 2 numbers for daffMultiply.");var e=Math.max.apply(Math,c(r.map(u)));return r.reduce(function(r,t){return r*Math.round(t*e)},1)/Math.pow(e,r.length)},r.daffSubtract=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length<2)throw new Error("Provide at least 2 numbers for daffSubtract.");var e=Math.max.apply(Math,c(r.map(u)));return r.slice(1).reduce(function(r,t){return r-Math.round(t*e)},Math.round(r[0]*e))/e},r.randomSlice=function(r){if(0===r.length)return[];var t=Math.floor(Math.random()*Math.floor(r.length-1)),e=t+Math.floor(Math.random()*(r.length-1-t));return r.slice(t,e)},r.randomSubset=function(r,t){if(t>r.length)throw new Error("Requested length is longer than array length.");return t=t||Math.floor(Math.random()*r.length),l(r).slice(0,t)},r.range=function(r,t){return Array.apply(null,Array(t-r+1)).map(function(t,e){return e+r})},r.shuffle=l,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=daffodil-core.umd.min.js.map