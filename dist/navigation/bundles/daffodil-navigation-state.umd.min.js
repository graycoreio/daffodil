!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("@angular/core"),require("@ngrx/effects"),require("rxjs/operators"),require("rxjs"),require("@daffodil/navigation/driver")):"function"==typeof define&&define.amd?define("@daffodil/navigation/state",["exports","@ngrx/store","@angular/core","@ngrx/effects","rxjs/operators","rxjs","@daffodil/navigation/driver"],e):e(((t=t||self).daffodil=t.daffodil||{},t.daffodil.navigation=t.daffodil.navigation||{},t.daffodil.navigation.state={}),t.store,t.ng.core,t.effects,t.rxjs.operators,t.rxjs,t.daffodil.navigation.driver)}(this,function(t,e,a,i,o,n,r){"use strict";var c=function(){return(c=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++)for(var o in e=arguments[a])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var s={NavigationLoadAction:"[Daff-Navigation] Navigation Load Action",NavigationLoadSuccessAction:"[Daff-Navigation] Navigation Load Success Action",NavigationLoadFailureAction:"[Daff-Navigation] Navigation Load Failure Action"},d=function(t){this.payload=t,this.type=s.NavigationLoadAction};var u=function(t){this.payload=t,this.type=s.NavigationLoadSuccessAction};var l=function(t){this.payload=t,this.type=s.NavigationLoadFailureAction};var v={navigationTree:null,loading:!1,errors:[]};function g(t,e){switch(void 0===t&&(t=v),e.type){case s.NavigationLoadAction:return c({},t,{loading:!0});case s.NavigationLoadSuccessAction:return c({},t,{loading:!1,navigationTree:e.payload});case s.NavigationLoadFailureAction:return c({},t,{loading:!1,errors:[e.payload]});default:return t}}var p={navigation:g};var N,y=function(){var t=e.createFeatureSelector("daffNavigation"),a=e.createSelector(t,function(t){return t.navigation});return{selectNavigationFeatureState:t,selectNavigationState:a,selectNavigationTree:e.createSelector(a,function(t){return t.navigationTree}),selectNavigationLoading:e.createSelector(a,function(t){return t.loading}),selectNavigationErrors:e.createSelector(a,function(t){return t.errors})}},h=function(){return N=N||y()},j=function(){function t(t){this.store=t;var a=h(),i=a.selectNavigationTree,o=a.selectNavigationLoading,n=a.selectNavigationErrors;this.tree$=this.store.pipe(e.select(i)),this.loading$=this.store.pipe(e.select(o)),this.errors$=this.store.pipe(e.select(n))}return t.prototype.dispatch=function(t){this.store.dispatch(t)},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Store}]},t.ngInjectableDef=a.ɵɵdefineInjectable({factory:function(){return new t(a.ɵɵinject(e.Store))},token:t,providedIn:"root"}),t}();var A=function(){function t(t,e){var a=this;this.actions$=t,this.driver=e,this.loadNavigation$=this.actions$.pipe(i.ofType(s.NavigationLoadAction),o.switchMap(function(t){return a.driver.get(t.payload).pipe(o.map(function(t){return new u(t)}),o.catchError(function(t){return n.of(new l("Failed to load the navigation tree"))}))}))}return t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:i.Actions},{type:void 0,decorators:[{type:a.Inject,args:[r.DaffNavigationDriver]}]}]},function(t,e,a,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(n<3?o(r):n>3?o(e,a,r):o(e,a))||r);n>3&&r&&Object.defineProperty(e,a,r)}([i.Effect(),f("design:type",n.Observable)],t.prototype,"loadNavigation$",void 0),t}();var S=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{imports:[e.StoreModule.forFeature("daffNavigation",p),i.EffectsModule.forFeature([A])]}]}],t}();t.DAFF_NAVIGATION_STORE_FEATURE_KEY="daffNavigation",t.DaffNavigationActionTypes=s,t.DaffNavigationFacade=j,t.DaffNavigationLoad=d,t.DaffNavigationLoadFailure=l,t.DaffNavigationLoadSuccess=u,t.DaffNavigationStateModule=S,t.daffNavigationReducer=g,t.daffNavigationReducers=p,t.getDaffNavigationSelectors=h,t.initialState=v,t.ɵa=A,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=daffodil-navigation-state.umd.min.js.map