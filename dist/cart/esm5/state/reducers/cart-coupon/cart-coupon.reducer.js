/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { DaffLoadingState } from '@daffodil/core/state';
import { DaffCartCouponActionTypes, } from '../../actions/public_api';
import { initialState } from '../cart-initial-state';
import { DaffCartOperationType } from '../cart-operation-type.enum';
import { initializeErrorAdder, initializeErrorResetter } from '../errors/error-state-helpers';
import { initializeLoadingSetter } from '../loading/cart-loading.type';
/** @type {?} */
var addError = initializeErrorAdder(DaffCartOperationType.Coupon);
/** @type {?} */
var resetErrors = initializeErrorResetter(DaffCartOperationType.Coupon);
/** @type {?} */
var setLoading = initializeLoadingSetter(DaffCartOperationType.Coupon);
/**
 * @template T
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
export function cartCouponReducer(state, action) {
    if (state === void 0) { state = initialState; }
    switch (action.type) {
        case DaffCartCouponActionTypes.CartCouponListAction:
            return tslib_1.__assign({}, state, setLoading(state.loading, DaffLoadingState.Resolving));
        case DaffCartCouponActionTypes.CartCouponApplyAction:
        case DaffCartCouponActionTypes.CartCouponRemoveAction:
        case DaffCartCouponActionTypes.CartCouponRemoveAllAction:
            return tslib_1.__assign({}, state, setLoading(state.loading, DaffLoadingState.Mutating));
        case DaffCartCouponActionTypes.CartCouponApplySuccessAction:
        case DaffCartCouponActionTypes.CartCouponRemoveSuccessAction:
        case DaffCartCouponActionTypes.CartCouponRemoveAllSuccessAction:
            return tslib_1.__assign({}, state, resetErrors(state.errors), { cart: tslib_1.__assign({}, state.cart, action.payload) }, setLoading(state.loading, DaffLoadingState.Complete));
        case DaffCartCouponActionTypes.CartCouponListSuccessAction:
            return tslib_1.__assign({}, state, resetErrors(state.errors), { cart: tslib_1.__assign({}, state.cart, { coupons: action.payload }) }, setLoading(state.loading, DaffLoadingState.Complete));
        case DaffCartCouponActionTypes.CartCouponApplyFailureAction:
        case DaffCartCouponActionTypes.CartCouponListFailureAction:
        case DaffCartCouponActionTypes.CartCouponRemoveAllFailureAction:
        case DaffCartCouponActionTypes.CartCouponRemoveFailureAction:
            return tslib_1.__assign({}, state, addError(state.errors, action.payload), setLoading(state.loading, DaffLoadingState.Complete));
        default:
            return state;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FydC1jb3Vwb24ucmVkdWNlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BkYWZmb2RpbC9jYXJ0L3N0YXRlLyIsInNvdXJjZXMiOlsicmVkdWNlcnMvY2FydC1jb3Vwb24vY2FydC1jb3Vwb24ucmVkdWNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBR3hELE9BQU8sRUFDTCx5QkFBeUIsR0FDMUIsTUFBTSwwQkFBMEIsQ0FBQztBQUNsQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFHckQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLHVCQUF1QixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7O0lBRWpFLFFBQVEsR0FBRyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUM7O0lBQzdELFdBQVcsR0FBRyx1QkFBdUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUM7O0lBQ25FLFVBQVUsR0FBRyx1QkFBdUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUM7Ozs7Ozs7QUFFeEUsTUFBTSxVQUFVLGlCQUFpQixDQUMvQixLQUFvQixFQUNwQixNQUFtQjtJQURuQixzQkFBQSxFQUFBLG9CQUFvQjtJQUdwQixRQUFRLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDbkIsS0FBSyx5QkFBeUIsQ0FBQyxvQkFBb0I7WUFDakQsNEJBQ0ssS0FBSyxFQUNMLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxFQUN4RDtRQUVKLEtBQUsseUJBQXlCLENBQUMscUJBQXFCLENBQUM7UUFDckQsS0FBSyx5QkFBeUIsQ0FBQyxzQkFBc0IsQ0FBQztRQUN0RCxLQUFLLHlCQUF5QixDQUFDLHlCQUF5QjtZQUN0RCw0QkFDSyxLQUFLLEVBQ0wsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQ3ZEO1FBRUosS0FBSyx5QkFBeUIsQ0FBQyw0QkFBNEIsQ0FBQztRQUM1RCxLQUFLLHlCQUF5QixDQUFDLDZCQUE2QixDQUFDO1FBQzdELEtBQUsseUJBQXlCLENBQUMsZ0NBQWdDO1lBQzdELDRCQUNLLEtBQUssRUFDTCxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUM1QixJQUFJLHVCQUNDLEtBQUssQ0FBQyxJQUFJLEVBQ1YsTUFBTSxDQUFDLE9BQU8sS0FFaEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQ3ZEO1FBRUosS0FBSyx5QkFBeUIsQ0FBQywyQkFBMkI7WUFDeEQsNEJBQ0ssS0FBSyxFQUNMLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQzVCLElBQUksdUJBQ0MsS0FBSyxDQUFDLElBQUksSUFDYixPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sT0FFdEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQ3ZEO1FBRUosS0FBSyx5QkFBeUIsQ0FBQyw0QkFBNEIsQ0FBQztRQUM1RCxLQUFLLHlCQUF5QixDQUFDLDJCQUEyQixDQUFDO1FBQzNELEtBQUsseUJBQXlCLENBQUMsZ0NBQWdDLENBQUM7UUFDaEUsS0FBSyx5QkFBeUIsQ0FBQyw2QkFBNkI7WUFDMUQsNEJBQ0ssS0FBSyxFQUNMLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFDdEMsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQ3ZEO1FBRUo7WUFDRSxPQUFPLEtBQUssQ0FBQztLQUNoQjtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYWZmTG9hZGluZ1N0YXRlIH0gZnJvbSAnQGRhZmZvZGlsL2NvcmUvc3RhdGUnO1xuaW1wb3J0IHsgRGFmZkNhcnQgfSBmcm9tICdAZGFmZm9kaWwvY2FydCc7XG5cbmltcG9ydCB7XG4gIERhZmZDYXJ0Q291cG9uQWN0aW9uVHlwZXMsXG59IGZyb20gJy4uLy4uL2FjdGlvbnMvcHVibGljX2FwaSc7XG5pbXBvcnQgeyBpbml0aWFsU3RhdGUgfSBmcm9tICcuLi9jYXJ0LWluaXRpYWwtc3RhdGUnO1xuaW1wb3J0IHsgRGFmZkNhcnRSZWR1Y2VyU3RhdGUgfSBmcm9tICcuLi9jYXJ0LXN0YXRlLmludGVyZmFjZSc7XG5pbXBvcnQgeyBBY3Rpb25UeXBlcyB9IGZyb20gJy4uL2FjdGlvbi10eXBlcy50eXBlJztcbmltcG9ydCB7IERhZmZDYXJ0T3BlcmF0aW9uVHlwZSB9IGZyb20gJy4uL2NhcnQtb3BlcmF0aW9uLXR5cGUuZW51bSc7XG5pbXBvcnQgeyBpbml0aWFsaXplRXJyb3JBZGRlciwgaW5pdGlhbGl6ZUVycm9yUmVzZXR0ZXIgfSBmcm9tICcuLi9lcnJvcnMvZXJyb3Itc3RhdGUtaGVscGVycyc7XG5pbXBvcnQgeyBpbml0aWFsaXplTG9hZGluZ1NldHRlciB9IGZyb20gJy4uL2xvYWRpbmcvY2FydC1sb2FkaW5nLnR5cGUnO1xuXG5jb25zdCBhZGRFcnJvciA9IGluaXRpYWxpemVFcnJvckFkZGVyKERhZmZDYXJ0T3BlcmF0aW9uVHlwZS5Db3Vwb24pO1xuY29uc3QgcmVzZXRFcnJvcnMgPSBpbml0aWFsaXplRXJyb3JSZXNldHRlcihEYWZmQ2FydE9wZXJhdGlvblR5cGUuQ291cG9uKTtcbmNvbnN0IHNldExvYWRpbmcgPSBpbml0aWFsaXplTG9hZGluZ1NldHRlcihEYWZmQ2FydE9wZXJhdGlvblR5cGUuQ291cG9uKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhcnRDb3Vwb25SZWR1Y2VyPFQgZXh0ZW5kcyBEYWZmQ2FydD4oXG4gIHN0YXRlID0gaW5pdGlhbFN0YXRlLFxuICBhY3Rpb246IEFjdGlvblR5cGVzXG4pOiBEYWZmQ2FydFJlZHVjZXJTdGF0ZTxUPiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIERhZmZDYXJ0Q291cG9uQWN0aW9uVHlwZXMuQ2FydENvdXBvbkxpc3RBY3Rpb246XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgLi4uc2V0TG9hZGluZyhzdGF0ZS5sb2FkaW5nLCBEYWZmTG9hZGluZ1N0YXRlLlJlc29sdmluZylcbiAgICAgIH07XG5cbiAgICBjYXNlIERhZmZDYXJ0Q291cG9uQWN0aW9uVHlwZXMuQ2FydENvdXBvbkFwcGx5QWN0aW9uOlxuICAgIGNhc2UgRGFmZkNhcnRDb3Vwb25BY3Rpb25UeXBlcy5DYXJ0Q291cG9uUmVtb3ZlQWN0aW9uOlxuICAgIGNhc2UgRGFmZkNhcnRDb3Vwb25BY3Rpb25UeXBlcy5DYXJ0Q291cG9uUmVtb3ZlQWxsQWN0aW9uOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIC4uLnNldExvYWRpbmcoc3RhdGUubG9hZGluZywgRGFmZkxvYWRpbmdTdGF0ZS5NdXRhdGluZylcbiAgICAgIH07XG5cbiAgICBjYXNlIERhZmZDYXJ0Q291cG9uQWN0aW9uVHlwZXMuQ2FydENvdXBvbkFwcGx5U3VjY2Vzc0FjdGlvbjpcbiAgICBjYXNlIERhZmZDYXJ0Q291cG9uQWN0aW9uVHlwZXMuQ2FydENvdXBvblJlbW92ZVN1Y2Nlc3NBY3Rpb246XG4gICAgY2FzZSBEYWZmQ2FydENvdXBvbkFjdGlvblR5cGVzLkNhcnRDb3Vwb25SZW1vdmVBbGxTdWNjZXNzQWN0aW9uOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIC4uLnJlc2V0RXJyb3JzKHN0YXRlLmVycm9ycyksXG4gICAgICAgIGNhcnQ6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5jYXJ0LFxuICAgICAgICAgIC4uLmFjdGlvbi5wYXlsb2FkXG4gICAgICAgIH0sXG4gICAgICAgIC4uLnNldExvYWRpbmcoc3RhdGUubG9hZGluZywgRGFmZkxvYWRpbmdTdGF0ZS5Db21wbGV0ZSksXG4gICAgICB9O1xuXG4gICAgY2FzZSBEYWZmQ2FydENvdXBvbkFjdGlvblR5cGVzLkNhcnRDb3Vwb25MaXN0U3VjY2Vzc0FjdGlvbjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAuLi5yZXNldEVycm9ycyhzdGF0ZS5lcnJvcnMpLFxuICAgICAgICBjYXJ0OiB7XG4gICAgICAgICAgLi4uc3RhdGUuY2FydCxcbiAgICAgICAgICBjb3Vwb25zOiBhY3Rpb24ucGF5bG9hZFxuICAgICAgICB9LFxuICAgICAgICAuLi5zZXRMb2FkaW5nKHN0YXRlLmxvYWRpbmcsIERhZmZMb2FkaW5nU3RhdGUuQ29tcGxldGUpLFxuICAgICAgfTtcblxuICAgIGNhc2UgRGFmZkNhcnRDb3Vwb25BY3Rpb25UeXBlcy5DYXJ0Q291cG9uQXBwbHlGYWlsdXJlQWN0aW9uOlxuICAgIGNhc2UgRGFmZkNhcnRDb3Vwb25BY3Rpb25UeXBlcy5DYXJ0Q291cG9uTGlzdEZhaWx1cmVBY3Rpb246XG4gICAgY2FzZSBEYWZmQ2FydENvdXBvbkFjdGlvblR5cGVzLkNhcnRDb3Vwb25SZW1vdmVBbGxGYWlsdXJlQWN0aW9uOlxuICAgIGNhc2UgRGFmZkNhcnRDb3Vwb25BY3Rpb25UeXBlcy5DYXJ0Q291cG9uUmVtb3ZlRmFpbHVyZUFjdGlvbjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAuLi5hZGRFcnJvcihzdGF0ZS5lcnJvcnMsIGFjdGlvbi5wYXlsb2FkKSxcbiAgICAgICAgLi4uc2V0TG9hZGluZyhzdGF0ZS5sb2FkaW5nLCBEYWZmTG9hZGluZ1N0YXRlLkNvbXBsZXRlKSxcbiAgICAgIH07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG4iXX0=