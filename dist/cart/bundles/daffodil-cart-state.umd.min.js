!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("@daffodil/core/state"),require("@daffodil/core"),require("@daffodil/geography"),require("@daffodil/cart"),require("@ngrx/entity"),require("@angular/router"),require("@angular/core"),require("rxjs/operators"),require("@ngrx/effects"),require("rxjs"),require("@daffodil/cart/driver")):"function"==typeof define&&define.amd?define("@daffodil/cart/state",["exports","@ngrx/store","@daffodil/core/state","@daffodil/core","@daffodil/geography","@daffodil/cart","@ngrx/entity","@angular/router","@angular/core","rxjs/operators","@ngrx/effects","rxjs","@daffodil/cart/driver"],e):e(((t=t||self).daffodil=t.daffodil||{},t.daffodil.cart=t.daffodil.cart||{},t.daffodil.cart.state={}),t.store,t.state,t.core,t.geography,t.daffodil.cart,t.entity,t.ng.router,t.ng.core,t.rxjs.operators,t.effects,t.rxjs,t.daffodil.cart.driver)}(this,function(t,e,r,a,i,n,o,c,s,p,d,u,f){"use strict";var l=function(){return(l=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t,e,r,a){var i,n=arguments.length,o=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,a);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(o=(n<3?i(o):n>3?i(e,r,o):i(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}function C(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function g(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var a,i,n=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function A(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}var y={CartStorageFailureAction:"[DaffCart] Cart Storage Failure Action",CartLoadAction:"[DaffCart] Cart Load Action",CartLoadSuccessAction:"[DaffCart] Cart Load Success Action",CartLoadFailureAction:"[DaffCart] Cart Load Failure Action",CartCreateAction:"[DaffCart] Cart Create Action",CartCreateSuccessAction:"[DaffCart] Cart Create Success Action",CartCreateFailureAction:"[DaffCart] Cart Create Failure Action",AddToCartAction:"[DaffCart] Cart Add To Cart Action",AddToCartSuccessAction:"[DaffCart] Cart Add to Cart Success Action",AddToCartFailureAction:"[DaffCart] Cart Add to Cart Failure Action",CartClearAction:"[DaffCart] Cart Reset Action",CartClearSuccessAction:"[DaffCart] Cart Reset Success Action",CartClearFailureAction:"[DaffCart] Cart Reset Failure Action",ResolveCartAction:"[DaffCart] Resolve Cart Action",ResolveCartSuccessAction:"[DaffCart] Resolve Cart Success Action",ResolveCartServerSideAction:"[DaffCart] Resolve Cart Server Side Action",ResolveCartFailureAction:"[DaffCart] Resolve Cart Failure Action"},m=function(t){this.payload=t,this.type=y.CartStorageFailureAction};var S=function(){this.type=y.CartLoadAction};var v=function(t){this.payload=t,this.type=y.CartLoadSuccessAction};var D=function(t){this.payload=t,this.type=y.CartLoadFailureAction};var I=function(){this.type=y.CartCreateAction};var R=function(t){this.payload=t,this.type=y.CartCreateSuccessAction};var L=function(t){this.payload=t,this.type=y.CartCreateFailureAction};var M=function(t){this.payload=t,this.type=y.AddToCartAction};var F=function(t){this.payload=t,this.type=y.AddToCartSuccessAction};var $=function(t){this.payload=t,this.type=y.AddToCartFailureAction};var P=function(){this.type=y.CartClearAction};var j=function(t){this.payload=t,this.type=y.CartClearSuccessAction};var T=function(t){this.payload=t,this.type=y.CartClearFailureAction};var E=function(){this.type=y.ResolveCartAction};var w=function(t){this.payload=t,this.type=y.ResolveCartSuccessAction};var U=function(t){this.payload=t,this.type=y.ResolveCartFailureAction};var b=function(){this.type=y.ResolveCartServerSideAction};var O={CartItemListAction:"[DaffCart] Cart Items List Action",CartItemListSuccessAction:"[DaffCart] Cart Items List Success Action",CartItemListFailureAction:"[DaffCart] Cart Items List Failure Action",CartItemLoadAction:"[DaffCart] Cart Item Load Action",CartItemLoadSuccessAction:"[DaffCart] Cart Item Load Success Action",CartItemLoadFailureAction:"[DaffCart] Cart Item Load Failure Action",CartItemUpdateAction:"[DaffCart] Cart Item Update Action",CartItemUpdateSuccessAction:"[DaffCart] Cart Item Update Success Action",CartItemUpdateFailureAction:"[DaffCart] Cart Item Update Failure Action",CartItemAddAction:"[DaffCart] Cart Item Add Action",CartItemAddSuccessAction:"[DaffCart] Cart Item Add Success Action",CartItemAddFailureAction:"[DaffCart] Cart Item Add Failure Action",CartItemDeleteAction:"[DaffCart] Cart Item Remove Action",CartItemDeleteSuccessAction:"[DaffCart] Cart Item Remove Success Action",CartItemDeleteFailureAction:"[DaffCart] Cart Item Remove Failure Action",CartItemStateResetAction:"[DaffCart] Cart Item State Reset Action"},B=function(){this.type=O.CartItemListAction};var _=function(t){this.payload=t,this.type=O.CartItemListSuccessAction};var x=function(t){this.payload=t,this.type=O.CartItemListFailureAction};var k=function(t){this.itemId=t,this.type=O.CartItemLoadAction};var W=function(t){this.payload=t,this.type=O.CartItemLoadSuccessAction};var H=function(t){this.payload=t,this.type=O.CartItemLoadFailureAction};var G=function(t,e){this.itemId=t,this.changes=e,this.type=O.CartItemUpdateAction};var q=function(t,e){this.payload=t,this.itemId=e,this.type=O.CartItemUpdateSuccessAction};var V=function(t){this.payload=t,this.type=O.CartItemUpdateFailureAction};var N=function(t){this.input=t,this.type=O.CartItemAddAction};var z=function(t){this.payload=t,this.type=O.CartItemAddSuccessAction};var Y=function(t){this.payload=t,this.type=O.CartItemAddFailureAction};var J=function(t){this.itemId=t,this.type=O.CartItemDeleteAction};var K=function(t){this.payload=t,this.type=O.CartItemDeleteSuccessAction};var Q=function(t){this.payload=t,this.type=O.CartItemDeleteFailureAction};var X=function(){this.type=O.CartItemStateResetAction};var Z={CartBillingAddressLoadAction:"[DaffCart] Billing Address Load Action",CartBillingAddressLoadSuccessAction:"[DaffCart] Billing Address Load Success Action",CartBillingAddressLoadFailureAction:"[DaffCart] Billing Address Load Failure Action",CartBillingAddressUpdateAction:"[DaffCart] Billing Address Update Action",CartBillingAddressUpdateSuccessAction:"[DaffCart] Billing Address Update Success Action",CartBillingAddressUpdateFailureAction:"[DaffCart] Billing Address Update Failure Action"},tt=function(){this.type=Z.CartBillingAddressLoadAction};var et=function(t){this.payload=t,this.type=Z.CartBillingAddressLoadSuccessAction};var rt=function(t){this.payload=t,this.type=Z.CartBillingAddressLoadFailureAction};var at=function(t){this.payload=t,this.type=Z.CartBillingAddressUpdateAction};var it=function(t){this.payload=t,this.type=Z.CartBillingAddressUpdateSuccessAction};var nt=function(t){this.payload=t,this.type=Z.CartBillingAddressUpdateFailureAction};var ot={CartShippingAddressLoadAction:"[DaffCart] Shipping Address Load Action",CartShippingAddressLoadSuccessAction:"[DaffCart] Shipping Address Load Success Action",CartShippingAddressLoadFailureAction:"[DaffCart] Shipping Address Load Failure Action",CartShippingAddressUpdateAction:"[DaffCart] Shipping Address Update Action",CartShippingAddressUpdateSuccessAction:"[DaffCart] Shipping Address Update Success Action",CartShippingAddressUpdateFailureAction:"[DaffCart] Shipping Address Update Failure Action"},ct=function(){this.type=ot.CartShippingAddressLoadAction};var st=function(t){this.payload=t,this.type=ot.CartShippingAddressLoadSuccessAction};var pt=function(t){this.payload=t,this.type=ot.CartShippingAddressLoadFailureAction};var dt=function(t){this.payload=t,this.type=ot.CartShippingAddressUpdateAction};var ut=function(t){this.payload=t,this.type=ot.CartShippingAddressUpdateSuccessAction};var ft=function(t){this.payload=t,this.type=ot.CartShippingAddressUpdateFailureAction};var lt={CartAddressUpdateAction:"[DaffCart] Cart Address Update Action",CartAddressUpdateSuccessAction:"[DaffCart] Cart Address Update Success Action",CartAddressUpdateFailureAction:"[DaffCart] Cart Address Update Failure Action"},ht=function(t){this.payload=t,this.type=lt.CartAddressUpdateAction};var Ct=function(t){this.payload=t,this.type=lt.CartAddressUpdateSuccessAction};var gt=function(t){this.payload=t,this.type=lt.CartAddressUpdateFailureAction};var At={CartShippingInformationLoadAction:"[DaffCart] Shipping Information Load Action",CartShippingInformationLoadSuccessAction:"[DaffCart] Shipping Information Load Success Action",CartShippingInformationLoadFailureAction:"[DaffCart] Shipping Information Load Failure Action",CartShippingInformationUpdateAction:"[DaffCart] Shipping Information Update Action",CartShippingInformationUpdateSuccessAction:"[DaffCart] Shipping Information Update Success Action",CartShippingInformationUpdateFailureAction:"[DaffCart] Shipping Information Update Failure Action",CartShippingInformationDeleteAction:"[DaffCart] Shipping Information Remove Action",CartShippingInformationDeleteSuccessAction:"[DaffCart] Shipping Information Remove Success Action",CartShippingInformationDeleteFailureAction:"[DaffCart] Shipping Information Remove Failure Action"},yt=function(){this.type=At.CartShippingInformationLoadAction};var mt=function(t){this.payload=t,this.type=At.CartShippingInformationLoadSuccessAction};var St=function(t){this.payload=t,this.type=At.CartShippingInformationLoadFailureAction};var vt=function(t){this.payload=t,this.type=At.CartShippingInformationUpdateAction};var Dt=function(t){this.payload=t,this.type=At.CartShippingInformationUpdateSuccessAction};var It=function(t){this.payload=t,this.type=At.CartShippingInformationUpdateFailureAction};var Rt=function(t){this.id=t,this.type=At.CartShippingInformationDeleteAction};var Lt=function(t){this.payload=t,this.type=At.CartShippingInformationDeleteSuccessAction};var Mt=function(t){this.payload=t,this.type=At.CartShippingInformationDeleteFailureAction};var Ft={CartShippingMethodsLoadAction:"[DaffCart] Shipping Methods Load Action",CartShippingMethodsLoadSuccessAction:"[DaffCart] Shipping Methods Load Success Action",CartShippingMethodsLoadFailureAction:"[DaffCart] Shipping Methods Load Failure Action"},$t=function(){this.type=Ft.CartShippingMethodsLoadAction};var Pt=function(t){this.payload=t,this.type=Ft.CartShippingMethodsLoadSuccessAction};var jt=function(t){this.payload=t,this.type=Ft.CartShippingMethodsLoadFailureAction};var Tt={CartPaymentLoadAction:"[DaffCart] Payment Load Action",CartPaymentLoadSuccessAction:"[DaffCart] Payment Load Success Action",CartPaymentLoadFailureAction:"[DaffCart] Payment Load Failure Action",CartPaymentUpdateAction:"[DaffCart] Payment Update Action",CartPaymentUpdateSuccessAction:"[DaffCart] Payment Update Success Action",CartPaymentUpdateFailureAction:"[DaffCart] Payment Update Failure Action",CartPaymentUpdateWithBillingAction:"[DaffCart] Payment Update With Billing Action",CartPaymentUpdateWithBillingSuccessAction:"[DaffCart] Payment Update With Billing Success Action",CartPaymentUpdateWithBillingFailureAction:"[DaffCart] Payment Update With Billing Failure Action",CartPaymentRemoveAction:"[DaffCart] Payment Remove Action",CartPaymentRemoveSuccessAction:"[DaffCart] Payment Remove Success Action",CartPaymentRemoveFailureAction:"[DaffCart] Payment Remove Failure Action",CartPaymentMethodAddAction:"[DaffCart] Payment Method Add Action"},Et=function(){this.type=Tt.CartPaymentLoadAction};var wt=function(t){this.payload=t,this.type=Tt.CartPaymentLoadSuccessAction};var Ut=function(t){this.payload=t,this.type=Tt.CartPaymentLoadFailureAction};var bt=function(t){this.payload=t,this.type=Tt.CartPaymentUpdateAction};var Ot=function(t){this.payload=t,this.type=Tt.CartPaymentUpdateSuccessAction};var Bt=function(t){this.payload=t,this.type=Tt.CartPaymentUpdateFailureAction};var _t=function(t,e){this.payment=t,this.address=e,this.type=Tt.CartPaymentUpdateWithBillingAction};var xt=function(t){this.payload=t,this.type=Tt.CartPaymentUpdateWithBillingSuccessAction};var kt=function(t){this.payload=t,this.type=Tt.CartPaymentUpdateWithBillingFailureAction};var Wt=function(){this.type=Tt.CartPaymentRemoveAction};var Ht=function(){this.type=Tt.CartPaymentRemoveSuccessAction};var Gt=function(t){this.payload=t,this.type=Tt.CartPaymentRemoveFailureAction};var qt=function(t){this.payload=t,this.type=Tt.CartPaymentMethodAddAction};var Vt={CartPaymentMethodsLoadAction:"[DaffCart] Payment Methods Load Action",CartPaymentMethodsLoadSuccessAction:"[DaffCart] Payment Methods Load Success Action",CartPaymentMethodsLoadFailureAction:"[DaffCart] Payment Methods Load Failure Action"},Nt=function(){this.type=Vt.CartPaymentMethodsLoadAction};var zt=function(t){this.payload=t,this.type=Vt.CartPaymentMethodsLoadSuccessAction};var Yt=function(t){this.payload=t,this.type=Vt.CartPaymentMethodsLoadFailureAction};var Jt={CartPlaceOrderAction:"[DaffCart] Cart Place Order Action",CartPlaceOrderSuccessAction:"[DaffCart] Cart Place Order Success Action",CartPlaceOrderFailureAction:"[DaffCart] Cart Place Order Failure Action"},Kt=function(t){this.payload=t,this.type=Jt.CartPlaceOrderAction};var Qt=function(t){this.payload=t,this.type=Jt.CartPlaceOrderSuccessAction};var Xt=function(t){this.payload=t,this.type=Jt.CartPlaceOrderFailureAction};var Zt={CartCouponApplyAction:"[DaffCart] Cart Coupon Apply Action",CartCouponApplySuccessAction:"[DaffCart] Cart Coupon Apply Success Action",CartCouponApplyFailureAction:"[DaffCart] Cart Coupon Apply Failure Action",CartCouponListAction:"[DaffCart] Cart Coupon List Action",CartCouponListSuccessAction:"[DaffCart] Cart Coupon List Success Action",CartCouponListFailureAction:"[DaffCart] Cart Coupon List Failure Action",CartCouponRemoveAction:"[DaffCart] Cart Coupon Remove Action",CartCouponRemoveSuccessAction:"[DaffCart] Cart Coupon Remove Success Action",CartCouponRemoveFailureAction:"[DaffCart] Cart Coupon Remove Failure Action",CartCouponRemoveAllAction:"[DaffCart] Cart Coupon Remove All Action",CartCouponRemoveAllSuccessAction:"[DaffCart] Cart Coupon Remove All Success Action",CartCouponRemoveAllFailureAction:"[DaffCart] Cart Coupon Remove All Failure Action"},te=function(t){this.payload=t,this.type=Zt.CartCouponApplyAction};var ee=function(t){this.payload=t,this.type=Zt.CartCouponApplySuccessAction};var re=function(t){this.payload=t,this.type=Zt.CartCouponApplyFailureAction};var ae=function(){this.type=Zt.CartCouponListAction};var ie=function(t){this.payload=t,this.type=Zt.CartCouponListSuccessAction};var ne=function(t){this.payload=t,this.type=Zt.CartCouponListFailureAction};var oe=function(t){this.payload=t,this.type=Zt.CartCouponRemoveAction};var ce=function(t){this.payload=t,this.type=Zt.CartCouponRemoveSuccessAction};var se=function(t){this.payload=t,this.type=Zt.CartCouponRemoveFailureAction};var pe=function(){this.type=Zt.CartCouponRemoveAllAction};var de=function(t){this.payload=t,this.type=Zt.CartCouponRemoveAllSuccessAction};var ue=function(t){this.payload=t,this.type=Zt.CartCouponRemoveAllFailureAction};var fe,le=function(){return fe=fe||{selectCartFeatureState:e.createFeatureSelector("cart")}};var he=function(){var t=le().selectCartFeatureState,a=e.createSelector(t,function(t){return t.order}),i=e.createSelector(a,function(t){return t.cartOrderResult}),n=e.createSelector(i,function(t){return t.orderId}),o=e.createSelector(i,function(t){return t.cartId});return{selectCartOrderState:a,selectCartOrderLoading:e.createSelector(a,function(t){return t.loading!==r.DaffLoadingState.Complete}),selectCartOrderMutating:e.createSelector(a,function(t){return t.loading===r.DaffLoadingState.Mutating}),selectCartOrderErrors:e.createSelector(a,function(t){return t.errors}),selectCartOrderValue:i,selectCartOrderId:n,selectCartOrderCartId:o,selectHasOrderResult:e.createSelector(i,function(t){return!!(t&&t.orderId&&t.cartId)})}},Ce=function(){var t;return function(){return t=t||he()}}(),ge={Cart:"Cart",Item:"Item",BillingAddress:"Billing Address",ShippingAddress:"Shipping Address",Payment:"Payment",PaymentMethods:"Payment Methods",ShippingInformation:"Shipping Information",ShippingMethods:"Shipping Methods",Coupon:"Coupon"};var Ae,ye,me={Resolving:"Resolving",Adding:"Adding",Complete:"Complete"},Se=function(t){return function(e,r){var a;return{loading:l({},e,(a={},a[t]=r,a))}}},ve={Default:"default",Resolving:"resolving",Succeeded:"succeeded",Failed:"failed",ServerSide:"server"},De=Object.freeze({cart:{id:null,subtotal:null,grand_total:null,coupons:[],items:[],billing_address:null,shipping_address:null,payment:null,totals:[],shipping_information:null,available_shipping_methods:[],available_payment_methods:[]},loading:(Ae={},Ae[ge.Cart]=r.DaffLoadingState.Complete,Ae[ge.Item]=me.Complete,Ae[ge.ShippingAddress]=r.DaffLoadingState.Complete,Ae[ge.BillingAddress]=r.DaffLoadingState.Complete,Ae[ge.ShippingInformation]=r.DaffLoadingState.Complete,Ae[ge.ShippingMethods]=r.DaffLoadingState.Complete,Ae[ge.Payment]=r.DaffLoadingState.Complete,Ae[ge.PaymentMethods]=r.DaffLoadingState.Complete,Ae[ge.Coupon]=r.DaffLoadingState.Complete,Ae),errors:(ye={},ye[ge.Cart]=[],ye[ge.Item]=[],ye[ge.ShippingAddress]=[],ye[ge.BillingAddress]=[],ye[ge.ShippingInformation]=[],ye[ge.ShippingMethods]=[],ye[ge.Payment]=[],ye[ge.PaymentMethods]=[],ye[ge.Coupon]=[],ye),resolved:ve.Default}),Ie=function(t){return function(e,r){var a;return{errors:l({},e,(a={},a[t]=e[t].concat(new Array(r)),a))}}},Re=function(t){return function(e){var r;return{errors:l({},e,(r={},r[t]=[],r))}}},Le=Ie(ge.Cart),Me=Re(ge.Cart),Fe=Se(ge.Cart);function $e(t,e){switch(void 0===t&&(t=De),e.type){case y.ResolveCartAction:case y.CartLoadAction:return l({},t,Fe(t.loading,r.DaffLoadingState.Resolving));case y.CartClearAction:case y.AddToCartAction:case y.CartCreateAction:return l({},t,Fe(t.loading,r.DaffLoadingState.Mutating));case y.CartLoadSuccessAction:case y.CartClearSuccessAction:case y.AddToCartSuccessAction:case y.CartCreateSuccessAction:case y.ResolveCartSuccessAction:return l({},t,Me(t.errors),{cart:l({},t.cart,e.payload)},Fe(t.loading,r.DaffLoadingState.Complete));case y.CartCreateSuccessAction:return l({},t,Me(t.errors),{cart:l({},De.cart,e.payload)},Fe(t.loading,r.DaffLoadingState.Complete));case y.CartLoadFailureAction:case y.CartClearFailureAction:case y.AddToCartFailureAction:case y.CartCreateFailureAction:case y.CartStorageFailureAction:case y.ResolveCartFailureAction:return l({},t,Le(t.errors,e.payload),Fe(t.loading,r.DaffLoadingState.Complete));default:return t}}var Pe=Ie(ge.Item),je=Re(ge.Item),Te=Se(ge.Item);function Ee(t,e){switch(void 0===t&&(t=De),e.type){case O.CartItemListAction:case O.CartItemLoadAction:return l({},t,Te(t.loading,me.Resolving));case O.CartItemAddAction:return l({},t,Te(t.loading,me.Adding));case O.CartItemListSuccessAction:return l({},t,je(t.errors),{cart:l({},t.cart,{items:e.payload})},Te(t.loading,me.Complete));case O.CartItemLoadSuccessAction:return l({},t,je(t.errors),{cart:l({},t.cart,{items:t.cart.items.map(function(t){return t.item_id===e.payload.item_id?e.payload:t})})},Te(t.loading,me.Complete));case O.CartItemUpdateSuccessAction:case O.CartItemAddSuccessAction:case O.CartItemDeleteSuccessAction:return l({},t,je(t.errors),{cart:l({},t.cart,e.payload)},Te(t.loading,me.Complete));case O.CartItemListFailureAction:case O.CartItemLoadFailureAction:case O.CartItemUpdateFailureAction:case O.CartItemAddFailureAction:case O.CartItemDeleteFailureAction:return l({},t,Pe(t.errors,e.payload),Te(t.loading,me.Complete));default:return t}}var we=Ie(ge.BillingAddress),Ue=Re(ge.BillingAddress),be=Se(ge.BillingAddress);function Oe(t,e){switch(void 0===t&&(t=De),e.type){case Z.CartBillingAddressLoadAction:return l({},t,be(t.loading,r.DaffLoadingState.Resolving));case Z.CartBillingAddressUpdateAction:case lt.CartAddressUpdateAction:return l({},t,be(t.loading,r.DaffLoadingState.Mutating));case Z.CartBillingAddressLoadSuccessAction:return l({},t,Ue(t.errors),{cart:l({},t.cart,{billing_address:e.payload})},be(t.loading,r.DaffLoadingState.Complete));case Z.CartBillingAddressUpdateSuccessAction:case lt.CartAddressUpdateSuccessAction:return l({},t,Ue(t.errors),{cart:l({},t.cart,e.payload)},be(t.loading,r.DaffLoadingState.Complete));case Z.CartBillingAddressLoadFailureAction:case Z.CartBillingAddressUpdateFailureAction:case lt.CartAddressUpdateFailureAction:return l({},t,we(t.errors,e.payload),be(t.loading,r.DaffLoadingState.Complete));default:return t}}var Be=Ie(ge.ShippingAddress),_e=Re(ge.ShippingAddress),xe=Se(ge.ShippingAddress);function ke(t,e){switch(void 0===t&&(t=De),e.type){case ot.CartShippingAddressLoadAction:return l({},t,xe(t.loading,r.DaffLoadingState.Resolving));case ot.CartShippingAddressUpdateAction:case lt.CartAddressUpdateAction:return l({},t,xe(t.loading,r.DaffLoadingState.Mutating));case ot.CartShippingAddressLoadSuccessAction:return l({},t,_e(t.errors),{cart:l({},t.cart,{shipping_address:e.payload})},xe(t.loading,r.DaffLoadingState.Complete));case ot.CartShippingAddressUpdateSuccessAction:case lt.CartAddressUpdateSuccessAction:return l({},t,_e(t.errors),{cart:l({},t.cart,e.payload)},xe(t.loading,r.DaffLoadingState.Complete));case ot.CartShippingAddressLoadFailureAction:case ot.CartShippingAddressUpdateFailureAction:case lt.CartAddressUpdateFailureAction:return l({},t,Be(t.errors,e.payload),xe(t.loading,r.DaffLoadingState.Complete));default:return t}}var We=Ie(ge.ShippingMethods),He=Re(ge.ShippingMethods),Ge=Se(ge.ShippingMethods);function qe(t,e){switch(void 0===t&&(t=De),e.type){case Ft.CartShippingMethodsLoadAction:return l({},t,Ge(t.loading,r.DaffLoadingState.Resolving));case Ft.CartShippingMethodsLoadSuccessAction:return l({},t,He(t.errors),{cart:l({},t.cart,{available_shipping_methods:e.payload})},Ge(t.loading,r.DaffLoadingState.Complete));case Ft.CartShippingMethodsLoadFailureAction:return l({},t,We(t.errors,e.payload),Ge(t.loading,r.DaffLoadingState.Complete));default:return t}}var Ve=Ie(ge.ShippingInformation),Ne=Re(ge.ShippingInformation),ze=Se(ge.ShippingInformation);function Ye(t,e){switch(void 0===t&&(t=De),e.type){case At.CartShippingInformationLoadAction:return l({},t,ze(t.loading,r.DaffLoadingState.Resolving));case At.CartShippingInformationUpdateAction:case At.CartShippingInformationDeleteAction:return l({},t,ze(t.loading,r.DaffLoadingState.Mutating));case At.CartShippingInformationLoadSuccessAction:return l({},t,Ne(t.errors),{cart:l({},t.cart,{shipping_information:l({},e.payload,{address_id:null})})},ze(t.loading,r.DaffLoadingState.Complete));case At.CartShippingInformationUpdateSuccessAction:case At.CartShippingInformationDeleteSuccessAction:return l({},t,Ne(t.errors),{cart:l({},t.cart,{shipping_information:null},e.payload)},ze(t.loading,r.DaffLoadingState.Complete));case At.CartShippingInformationLoadFailureAction:case At.CartShippingInformationUpdateFailureAction:case At.CartShippingInformationDeleteFailureAction:return l({},t,Ve(t.errors,e.payload),ze(t.loading,r.DaffLoadingState.Complete));default:return t}}var Je=Ie(ge.Payment),Ke=Re(ge.Payment),Qe=Se(ge.Payment);function Xe(t,e){switch(void 0===t&&(t=De),e.type){case Tt.CartPaymentLoadAction:return l({},t,Qe(t.loading,r.DaffLoadingState.Resolving));case Tt.CartPaymentUpdateAction:case Tt.CartPaymentUpdateWithBillingAction:case Tt.CartPaymentRemoveAction:return l({},t,Qe(t.loading,r.DaffLoadingState.Mutating));case Tt.CartPaymentLoadSuccessAction:return l({},t,Ke(t.errors),{cart:l({},t.cart,{payment:e.payload})},Qe(t.loading,r.DaffLoadingState.Complete));case Tt.CartPaymentRemoveSuccessAction:return l({},t,Ke(t.errors),{cart:l({},t.cart,{payment:null})},Qe(t.loading,r.DaffLoadingState.Complete));case Tt.CartPaymentUpdateSuccessAction:case Tt.CartPaymentUpdateWithBillingSuccessAction:return l({},t,Ke(t.errors),{cart:l({},t.cart,e.payload)},Qe(t.loading,r.DaffLoadingState.Complete));case Tt.CartPaymentLoadFailureAction:case Tt.CartPaymentUpdateFailureAction:case Tt.CartPaymentUpdateWithBillingFailureAction:case Tt.CartPaymentRemoveFailureAction:return l({},t,Je(t.errors,e.payload),Qe(t.loading,r.DaffLoadingState.Complete));case Tt.CartPaymentMethodAddAction:return l({},t,{cart:l({},t.cart,{payment:l({},e.payload)})});default:return t}}var Ze=Ie(ge.PaymentMethods),tr=Re(ge.PaymentMethods),er=Se(ge.PaymentMethods);function rr(t,e){switch(void 0===t&&(t=De),e.type){case Vt.CartPaymentMethodsLoadAction:return l({},t,er(t.loading,r.DaffLoadingState.Resolving));case Vt.CartPaymentMethodsLoadSuccessAction:return l({},t,tr(t.errors),{cart:l({},t.cart,{available_payment_methods:e.payload})},er(t.loading,r.DaffLoadingState.Complete));case Vt.CartPaymentMethodsLoadFailureAction:return l({},t,Ze(t.errors,e.payload),er(t.loading,r.DaffLoadingState.Complete));default:return t}}var ar=Ie(ge.Coupon),ir=Re(ge.Coupon),nr=Se(ge.Coupon);function or(t,e){switch(void 0===t&&(t=De),e.type){case Zt.CartCouponListAction:return l({},t,nr(t.loading,r.DaffLoadingState.Resolving));case Zt.CartCouponApplyAction:case Zt.CartCouponRemoveAction:case Zt.CartCouponRemoveAllAction:return l({},t,nr(t.loading,r.DaffLoadingState.Mutating));case Zt.CartCouponApplySuccessAction:case Zt.CartCouponRemoveSuccessAction:case Zt.CartCouponRemoveAllSuccessAction:return l({},t,ir(t.errors),{cart:l({},t.cart,e.payload)},nr(t.loading,r.DaffLoadingState.Complete));case Zt.CartCouponListSuccessAction:return l({},t,ir(t.errors),{cart:l({},t.cart,{coupons:e.payload})},nr(t.loading,r.DaffLoadingState.Complete));case Zt.CartCouponApplyFailureAction:case Zt.CartCouponListFailureAction:case Zt.CartCouponRemoveAllFailureAction:case Zt.CartCouponRemoveFailureAction:return l({},t,ar(t.errors,e.payload),nr(t.loading,r.DaffLoadingState.Complete));default:return t}}function cr(t,e){switch(void 0===t&&(t=De),e.type){case y.ResolveCartAction:return l({},t,{resolved:ve.Resolving});case y.ResolveCartServerSideAction:return l({},t,{resolved:ve.ServerSide});case y.ResolveCartSuccessAction:return l({},t,{resolved:ve.Succeeded});case y.ResolveCartFailureAction:return l({},t,{resolved:ve.Failed});default:return t}}function sr(t,e,r){return r.length>0?sr(r[0](t,e),e,r.slice(1)):t}function pr(t,e){return void 0===t&&(t=De),sr(t,e,[$e,Ee,Oe,ke,qe,Ye,Xe,rr,or,cr])}var dr=function(){var t;return function(){return t=t||o.createEntityAdapter({selectId:function(t){return String(t.item_id)}})}}();var ur={New:"new",Updated:"updated",Mutating:"mutating",Default:"default"};function fr(t,e){void 0===t&&(t=dr().getInitialState());var r,a,i,n,o=dr();switch(e.type){case O.CartItemListSuccessAction:return o.addAll(e.payload.map(function(e){return l({},e,{daffState:lr(t.entities[e.item_id])||ur.Default})}),t);case O.CartItemLoadSuccessAction:return o.upsertOne(l({},e.payload,{daffState:lr(t.entities[e.payload.item_id])||ur.Default}),t);case O.CartItemAddSuccessAction:return o.addAll((n=t.entities,e.payload.items.map(function(t){var e=n[t.item_id];switch(!0){case!e:return l({},t,{daffState:ur.New});case e&&e.qty!==t.qty:return l({},t,{daffState:ur.Updated});default:return t}})),t);case O.CartItemUpdateSuccessAction:return o.addAll((r=e.payload.items,a=t.entities,i=e.itemId,r.map(function(t){return t.item_id===i?l({},t,{daffState:ur.Updated}):l({},t,{daffState:lr(a[t.item_id])||ur.Default})})),t);case O.CartItemDeleteSuccessAction:case y.CartLoadSuccessAction:case y.ResolveCartSuccessAction:case y.CartClearSuccessAction:return o.addAll(e.payload.items.map(function(e){return l({},e,{daffState:lr(t.entities[e.item_id])||ur.Default})}),t);case O.CartItemStateResetAction:return o.addAll(Object.keys(t.entities).map(function(e){return l({},t.entities[e],{daffState:ur.Default})}),t);case O.CartItemUpdateAction:case O.CartItemDeleteAction:return o.upsertOne(l({},t.entities[e.itemId],{daffState:ur.Mutating}),t);default:return t}}function lr(t){return t&&t.daffState}var hr={cartOrderResult:{id:null,orderId:null,cartId:null},loading:r.DaffLoadingState.Complete,errors:[]};function Cr(t,e){switch(void 0===t&&(t=hr),e.type){case Jt.CartPlaceOrderAction:return l({},t,{loading:r.DaffLoadingState.Mutating});case Jt.CartPlaceOrderSuccessAction:return l({},t,{errors:[],loading:r.DaffLoadingState.Complete,cartOrderResult:e.payload});case Jt.CartPlaceOrderFailureAction:return l({},t,{loading:r.DaffLoadingState.Complete,errors:A(t.errors,[e.payload])});default:return t}}var gr={cart:pr,cartItems:fr,order:Cr};var Ar=function(){var t=le().selectCartFeatureState,r=dr().getSelectors(),a=e.createSelector(t,function(t){return t.cartItems}),i=e.createSelector(a,r.selectIds),o=e.createSelector(a,r.selectEntities),c=e.createSelector(a,r.selectAll),s=e.createSelector(a,r.selectTotal),p=e.createSelector(o,function(t,e){return t[e.id]}),d=e.createSelector(c,function(t){return t.reduce(function(t,e){return t+e.qty},0)}),u=e.createSelector(o,function(t,e){var r=p.projector(t,{id:e.id});return r.type!==n.DaffCartItemInputType.Configurable?null:r.attributes}),f=e.createSelector(o,function(t,e){var r=p.projector(t,{id:e.id});return r.type!==n.DaffCartItemInputType.Composite?null:r.options}),l=e.createSelector(o,function(t,e){var r=p.projector(t,{id:e.id});return r?!r.in_stock:null}),h=e.createSelector(c,function(t){return t&&t.reduce(function(t,e){return t||e.daffState===ur.Mutating},!1)}),C=e.createSelector(o,function(t,e){var r=p.projector(t,{id:e.id});return r?r.daffState:null});return{selectCartItemEntitiesState:a,selectCartItemIds:i,selectCartItemEntities:o,selectAllCartItems:c,selectCartItemTotal:s,selectCartItem:p,selectTotalNumberOfCartItems:d,selectCartItemConfiguredAttributes:u,selectCartItemCompositeOptions:f,selectIsCartItemOutOfStock:l,selectCartItemMutating:h,selectCartItemState:C}},yr=function(){var t;return function(){return t=t||Ar()}}();var mr=function(){var t=le().selectCartFeatureState,o=yr().selectCartItemMutating,c=e.createSelector(t,function(t){return t.cart}),s=e.createSelector(c,function(t){return t.cart}),p=e.createSelector(c,function(t){return t.resolved}),d=e.createSelector(c,function(t){return t.loading}),u=e.createSelector(d,function(t){return t[ge.Cart]!==r.DaffLoadingState.Complete}),f=e.createSelector(d,function(t){return t[ge.Cart]===r.DaffLoadingState.Resolving}),l=e.createSelector(d,function(t){return t[ge.Cart]===r.DaffLoadingState.Mutating}),h=e.createSelector(d,function(t){return t[ge.BillingAddress]!==r.DaffLoadingState.Complete}),C=e.createSelector(d,function(t){return t[ge.BillingAddress]===r.DaffLoadingState.Resolving}),g=e.createSelector(d,function(t){return t[ge.BillingAddress]===r.DaffLoadingState.Mutating}),A=e.createSelector(d,function(t){return t[ge.ShippingAddress]!==r.DaffLoadingState.Complete}),y=e.createSelector(d,function(t){return t[ge.ShippingAddress]===r.DaffLoadingState.Resolving}),m=e.createSelector(d,function(t){return t[ge.ShippingAddress]===r.DaffLoadingState.Mutating}),S=e.createSelector(d,function(t){return t[ge.ShippingInformation]!==r.DaffLoadingState.Complete}),v=e.createSelector(d,function(t){return t[ge.ShippingInformation]===r.DaffLoadingState.Resolving}),D=e.createSelector(d,function(t){return t[ge.ShippingInformation]===r.DaffLoadingState.Mutating}),I=e.createSelector(d,function(t){return t[ge.ShippingMethods]!==r.DaffLoadingState.Complete}),R=e.createSelector(d,function(t){return t[ge.ShippingMethods]===r.DaffLoadingState.Resolving}),L=e.createSelector(d,function(t){return t[ge.Payment]!==r.DaffLoadingState.Complete}),M=e.createSelector(d,function(t){return t[ge.Payment]===r.DaffLoadingState.Resolving}),F=e.createSelector(d,function(t){return t[ge.Payment]===r.DaffLoadingState.Mutating}),$=e.createSelector(d,function(t){return t[ge.PaymentMethods]!==r.DaffLoadingState.Complete}),P=e.createSelector(d,function(t){return t[ge.PaymentMethods]===r.DaffLoadingState.Resolving}),j=e.createSelector(d,function(t){return t[ge.Item]!==me.Complete}),T=e.createSelector(d,function(t){return t[ge.Item]===me.Adding}),E=e.createSelector(d,function(t){return t[ge.Item]===me.Resolving}),w=e.createSelector(d,function(t){return t[ge.Coupon]!==r.DaffLoadingState.Complete}),U=e.createSelector(d,function(t){return t[ge.Coupon]===r.DaffLoadingState.Resolving}),b=e.createSelector(d,function(t){return t[ge.Coupon]===r.DaffLoadingState.Mutating}),O=e.createSelector(d,function(t){return[u,h,A,S,I,L,$,w,j].map(function(e){return e.projector(t)}).reduce(function(t,e){return t||e},!1)}),B=e.createSelector(d,function(t){return[f,C,y,v,R,M,P,U,E].map(function(e){return e.projector(t)}).reduce(function(t,e){return t||e},!1)}),_=e.createSelector(d,o,function(t,e){return[l,g,m,D,F,b,T].map(function(e){return e.projector(t)}).reduce(function(t,e){return t||e},!1)||e}),x=e.createSelector(c,function(t){return t.errors}),k=e.createSelector(x,function(t){return t[ge.Cart]}),W=e.createSelector(x,function(t){return t[ge.BillingAddress]}),H=e.createSelector(x,function(t){return t[ge.ShippingAddress]}),G=e.createSelector(x,function(t){return t[ge.ShippingInformation]}),q=e.createSelector(x,function(t){return t[ge.ShippingMethods]}),V=e.createSelector(x,function(t){return t[ge.Payment]}),N=e.createSelector(x,function(t){return t[ge.PaymentMethods]}),z=e.createSelector(x,function(t){return t[ge.Item]}),Y=e.createSelector(x,function(t){return t[ge.Coupon]}),J=e.createSelector(s,function(t){return t.id}),K=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.subtotalExcludingTax});return e?e.value:null}),Q=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.grandTotal});return e?e.value:null}),X=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.subtotalExcludingTax});return e?e.value:null}),Z=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.subtotalIncludingTax});return e?e.value:null}),tt=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.subtotalWithDiscountExcludingTax});return e?e.value:null}),et=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.subtotalWithDiscountIncludingTax});return e?e.value:null}),rt=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.tax});return e?e.value:null}),at=e.createSelector(s,function(t){var e=t.totals.filter(function(t){return t.name===n.DaffCartTotalTypeEnum.discount});return e||[]}),it=e.createSelector(s,function(t){var e=t.totals.find(function(t){return t.name===n.DaffCartTotalTypeEnum.shipping});return e?e.value:null}),nt=e.createSelector(s,function(t){return t.coupons}),ot=e.createSelector(s,function(t){return t.items}),ct=e.createSelector(s,function(t){return t.items.reduce(function(t,e){return t||!e.in_stock},!1)}),st=e.createSelector(s,function(t){return t.billing_address}),pt=e.createSelector(s,function(t){return t.shipping_address}),dt=e.createSelector(s,function(t){return t.payment}),ut=e.createSelector(s,function(t){return t.totals}),ft=e.createSelector(s,function(t){return t.shipping_information}),lt=e.createSelector(s,function(t){return t.available_shipping_methods}),ht=e.createSelector(s,function(t){return t.available_payment_methods}),Ct=e.createSelector(s,function(t){return!t||!t.items||0===t.items.length}),gt=e.createSelector(ot,function(t,e){var r=t.find(function(t){return t.item_id===e.id});return a.daffSubtract(r.row_total,r.total_discount)}),At=e.createSelector(pt,st,function(t,e){return i.daffComparePersonalAddresses(t,e)}),yt=e.createSelector(st,function(t){return!!t}),mt=e.createSelector(pt,function(t){return!!t}),St=e.createSelector(ft,function(t){return!!t}),vt=e.createSelector(dt,function(t){return!!t&&""!==t.method}),Dt=e.createSelector(Ct,yt,mt,St,vt,function(t,e,r,a,i){return!t&&e&&r&&a&&i});return{selectCartState:c,selectCartValue:s,selectCartResolved:p,selectCartLoadingObject:d,selectCartFeatureLoading:O,selectCartFeatureResolving:B,selectCartFeatureMutating:_,selectCartLoading:u,selectCartResolving:f,selectCartMutating:l,selectBillingAddressLoading:h,selectBillingAddressResolving:C,selectBillingAddressMutating:g,selectShippingAddressLoading:A,selectShippingAddressResolving:y,selectShippingAddressMutating:m,selectShippingInformationLoading:S,selectShippingInformationResolving:v,selectShippingInformationMutating:D,selectShippingMethodsLoading:I,selectShippingMethodsResolving:R,selectPaymentLoading:L,selectPaymentResolving:M,selectPaymentMutating:F,selectPaymentMethodsLoading:$,selectPaymentMethodsResolving:P,selectCouponLoading:w,selectCouponResolving:U,selectCouponMutating:b,selectItemLoading:j,selectItemAdding:T,selectItemResolving:E,selectCartErrorsObject:x,selectCartErrors:k,selectBillingAddressErrors:W,selectShippingAddressErrors:H,selectShippingInformationErrors:G,selectShippingMethodsErrors:q,selectPaymentErrors:V,selectPaymentMethodsErrors:N,selectItemErrors:z,selectCouponErrors:Y,selectCartId:J,selectCartSubtotal:K,selectCartGrandTotal:Q,selectCartSubtotalExcludingTax:X,selectCartSubtotalIncludingTax:Z,selectCartSubtotalWithDiscountExcludingTax:tt,selectCartSubtotalWithDiscountIncludingTax:et,selectCartDiscountTotals:at,selectCartTotalTax:rt,selectCartShippingTotal:it,selectCartCoupons:nt,selectCartItems:ot,selectCartHasOutOfStockItems:ct,selectCartBillingAddress:st,selectCartShippingAddress:pt,selectCartPayment:dt,selectCartTotals:ut,selectCartShippingInformation:ft,selectCartAvailableShippingMethods:lt,selectCartAvailablePaymentMethods:ht,selectIsCartEmpty:Ct,selectCartItemDiscountedRowTotal:gt,selectIsBillingSameAsShipping:At,selectHasBillingAddress:yt,selectHasShippingAddress:mt,selectHasShippingMethod:St,selectHasPaymentMethod:vt,selectCanPlaceOrder:Dt}},Sr=function(){var t;return function(){return t=t||mr()}}();var vr=function(){return l({},le(),Ce(),Sr(),yr())},Dr=function(){var t;return function(){return t=t||vr()}}(),Ir=function(){function t(t,r){var a=this;this.store=t,this.paymentMethodMap=r;var i=Dr(),n=i.selectCartValue,o=i.selectCartResolved,c=i.selectCartLoadingObject,s=i.selectCartFeatureLoading,d=i.selectCartFeatureResolving,u=i.selectCartFeatureMutating,f=i.selectCartLoading,l=i.selectCartResolving,h=i.selectCartMutating,C=i.selectBillingAddressLoading,g=i.selectBillingAddressResolving,A=i.selectBillingAddressMutating,y=i.selectShippingAddressLoading,m=i.selectShippingAddressResolving,S=i.selectShippingAddressMutating,v=i.selectShippingInformationLoading,D=i.selectShippingInformationResolving,I=i.selectShippingInformationMutating,R=i.selectShippingMethodsLoading,L=i.selectShippingMethodsResolving,M=i.selectPaymentLoading,F=i.selectPaymentResolving,$=i.selectPaymentMutating,P=i.selectPaymentMethodsLoading,j=i.selectPaymentMethodsResolving,T=i.selectCouponLoading,E=i.selectCouponResolving,w=i.selectCouponMutating,U=i.selectItemLoading,b=i.selectItemAdding,O=i.selectItemResolving,B=i.selectCartItemMutating,_=i.selectCartErrorsObject,x=i.selectCartErrors,k=i.selectItemErrors,W=i.selectBillingAddressErrors,H=i.selectShippingAddressErrors,G=i.selectShippingInformationErrors,q=i.selectShippingMethodsErrors,V=i.selectPaymentErrors,N=i.selectPaymentMethodsErrors,z=i.selectCouponErrors,Y=i.selectCartId,J=i.selectCartSubtotal,K=i.selectCartGrandTotal,Q=i.selectCartSubtotalExcludingTax,X=i.selectCartSubtotalIncludingTax,Z=i.selectCartSubtotalWithDiscountExcludingTax,tt=i.selectCartSubtotalWithDiscountIncludingTax,et=i.selectCartDiscountTotals,rt=i.selectCartTotalTax,at=i.selectCartShippingTotal,it=i.selectCartCoupons,nt=i.selectCartItems,ot=i.selectCartHasOutOfStockItems,ct=i.selectCartItemEntities,st=i.selectTotalNumberOfCartItems,pt=i.selectCartItemConfiguredAttributes,dt=i.selectCartItemCompositeOptions,ut=i.selectCartBillingAddress,ft=i.selectCartShippingAddress,lt=i.selectCartPayment,ht=i.selectCartTotals,Ct=i.selectCartShippingInformation,gt=i.selectCartAvailableShippingMethods,At=i.selectCartAvailablePaymentMethods,yt=i.selectIsCartEmpty,mt=i.selectIsBillingSameAsShipping,St=i.selectCartOrderLoading,vt=i.selectCartOrderErrors,Dt=i.selectCartOrderValue,It=i.selectCartOrderId,Rt=i.selectCartOrderCartId,Lt=i.selectHasOrderResult,Mt=i.selectCartItemDiscountedRowTotal,Ft=i.selectIsCartItemOutOfStock,$t=i.selectCartItemState,Pt=i.selectHasBillingAddress,jt=i.selectHasShippingAddress,Tt=i.selectHasShippingMethod,Et=i.selectHasPaymentMethod,wt=i.selectCanPlaceOrder;this._selectCartItemDiscountedRowTotal=Mt,this._selectCartItemConfiguredAttributes=pt,this._selectCartItemCompositeOptions=dt,this._selectIsCartItemOutOfStock=Ft,this._selectCartItemState=$t,this.cart$=this.store.pipe(e.select(n)),this.resolved$=this.store.pipe(e.select(o)),this.loadingObject$=this.store.pipe(e.select(c)),this.featureLoading$=this.store.pipe(e.select(s)),this.featureResolving$=this.store.pipe(e.select(d)),this.featureMutating$=this.store.pipe(e.select(u)),this.loading$=this.store.pipe(e.select(f)),this.resolving$=this.store.pipe(e.select(l)),this.mutating$=this.store.pipe(e.select(h)),this.billingAddressLoading$=this.store.pipe(e.select(C)),this.billingAddressResolving$=this.store.pipe(e.select(g)),this.billingAddressMutating$=this.store.pipe(e.select(A)),this.shippingAddressLoading$=this.store.pipe(e.select(y)),this.shippingAddressResolving$=this.store.pipe(e.select(m)),this.shippingAddressMutating$=this.store.pipe(e.select(S)),this.shippingInformationLoading$=this.store.pipe(e.select(v)),this.shippingInformationResolving$=this.store.pipe(e.select(D)),this.shippingInformationMutating$=this.store.pipe(e.select(I)),this.shippingMethodsLoading$=this.store.pipe(e.select(R)),this.shippingMethodsResolving$=this.store.pipe(e.select(L)),this.paymentLoading$=this.store.pipe(e.select(M)),this.paymentResolving$=this.store.pipe(e.select(F)),this.paymentMutating$=this.store.pipe(e.select($)),this.paymentMethodsLoading$=this.store.pipe(e.select(P)),this.paymentMethodsResolving$=this.store.pipe(e.select(j)),this.couponLoading$=this.store.pipe(e.select(T)),this.couponResolving$=this.store.pipe(e.select(E)),this.couponMutating$=this.store.pipe(e.select(w)),this.itemLoading$=this.store.pipe(e.select(U)),this.itemAdding$=this.store.pipe(e.select(b)),this.itemResolving$=this.store.pipe(e.select(O)),this.itemMutating$=this.store.pipe(e.select(B)),this.errors$=this.store.pipe(e.select(_)),this.cartErrors$=this.store.pipe(e.select(x)),this.itemErrors$=this.store.pipe(e.select(k)),this.billingAddressErrors$=this.store.pipe(e.select(W)),this.shippingAddressErrors$=this.store.pipe(e.select(H)),this.shippingInformationErrors$=this.store.pipe(e.select(G)),this.shippingMethodsErrors$=this.store.pipe(e.select(q)),this.paymentErrors$=this.store.pipe(e.select(V)),this.paymentMethodsErrors$=this.store.pipe(e.select(N)),this.couponErrors$=this.store.pipe(e.select(z)),this.id$=this.store.pipe(e.select(Y)),this.subtotal$=this.store.pipe(e.select(J)),this.grandTotal$=this.store.pipe(e.select(K)),this.subtotalExcludingTax$=this.store.pipe(e.select(Q)),this.subtotalIncludingTax$=this.store.pipe(e.select(X)),this.subtotalWithDiscountExcludingTax$=this.store.pipe(e.select(Z)),this.subtotalWithDiscountIncludingTax$=this.store.pipe(e.select(tt)),this.discountTotals$=this.store.pipe(e.select(et)),this.totalTax$=this.store.pipe(e.select(rt)),this.shippingTotal$=this.store.pipe(e.select(at)),this.coupons$=this.store.pipe(e.select(it)),this.items$=this.store.pipe(e.select(nt)),this.totalItems$=this.store.pipe(e.select(st)),this.hasOutOfStockItems$=this.store.pipe(e.select(ot)),this.itemDictionary$=this.store.pipe(e.select(ct)),this.billingAddress$=this.store.pipe(e.select(ut)),this.shippingAddress$=this.store.pipe(e.select(ft)),this.payment$=this.store.pipe(e.select(lt)),this.totals$=this.store.pipe(e.select(ht)),this.shippingInformation$=this.store.pipe(e.select(Ct)),this.availableShippingMethods$=this.store.pipe(e.select(gt)),this.availablePaymentMethods$=this.store.pipe(e.select(At)),this.paymentId$=this.payment$.pipe(p.map(function(t){return t&&t.method?a.paymentMethodMap[t.method]:null})),this.isCartEmpty$=this.store.pipe(e.select(yt)),this.isBillingSameAsShipping$=this.store.pipe(e.select(mt)),this.hasBillingAddress$=this.store.pipe(e.select(Pt)),this.hasShippingAddress$=this.store.pipe(e.select(jt)),this.hasShippingMethod$=this.store.pipe(e.select(Tt)),this.hasPaymentMethod$=this.store.pipe(e.select(Et)),this.canPlaceOrder$=this.store.pipe(e.select(wt)),this.orderResultLoading$=this.store.pipe(e.select(St)),this.orderResultErrors$=this.store.pipe(e.select(vt)),this.orderResult$=this.store.pipe(e.select(Dt)),this.orderResultId$=this.store.pipe(e.select(It)),this.orderResultCartId$=this.store.pipe(e.select(Rt)),this.hasOrderResult$=this.store.pipe(e.select(Lt))}return t.prototype.getConfiguredCartItemAttributes=function(t){return this.store.pipe(e.select(this._selectCartItemConfiguredAttributes,{id:t}))},t.prototype.getCompositeCartItemOptions=function(t){return this.store.pipe(e.select(this._selectCartItemCompositeOptions,{id:t}))},t.prototype.getCartItemDiscountedTotal=function(t){return this.store.pipe(e.select(this._selectCartItemDiscountedRowTotal,{id:t}))},t.prototype.isCartItemOutOfStock=function(t){return this.store.pipe(e.select(this._selectIsCartItemOutOfStock,{id:t}))},t.prototype.getCartItemState=function(t){return this.store.pipe(e.select(this._selectCartItemState,{id:t}))},t.prototype.dispatch=function(t){this.store.dispatch(t)},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Store},{type:Object,decorators:[{type:s.Inject,args:[n.DaffCartPaymentMethodIdMap]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(e.Store),s.ɵɵinject(n.DaffCartPaymentMethodIdMap))},token:t,providedIn:"root"}),t}();var Rr=new s.InjectionToken("DaffCartBillingAddressGuardRedirectUrl"),Lr=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.hasBillingAddress$.pipe(p.take(1),p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[Rr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(Rr))},token:t,providedIn:"root"}),t}();var Mr={resolution:l({},{failedResolutionPath:null})},Fr=new s.InjectionToken("DAFF_CART_STATE_CONFIG",{providedIn:"root",factory:function(){return Mr}}),$r=function(){function t(t,e,r){this.facade=t,this.router=e,this.config=r}return t.prototype.canActivate=function(){var t=this;return this.facade.resolved$.pipe(p.filter(function(t){return t===ve.Succeeded||t===ve.ServerSide||t===ve.Failed}),p.map(function(t){return t===ve.Succeeded||t===ve.ServerSide}),p.take(1),p.map(function(e){return!e&&t.config.resolution.failedResolutionPath?t.router.parseUrl(t.config.resolution.failedResolutionPath):e}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:void 0,decorators:[{type:s.Inject,args:[Fr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(Fr))},token:t,providedIn:"root"}),t}();var Pr=new s.InjectionToken("DaffCartItemsGuardRedirectUrl"),jr=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.isCartEmpty$.pipe(p.map(function(t){return!t}),p.take(1),p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[Pr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(Pr))},token:t,providedIn:"root"}),t}();var Tr=new s.InjectionToken("DaffCartPaymentMethodGuardRedirectUrl"),Er=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.hasPaymentMethod$.pipe(p.take(1),p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[Tr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(Tr))},token:t,providedIn:"root"}),t}();var wr=new s.InjectionToken("DaffCartShippingAddressGuardRedirectUrl"),Ur=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.hasShippingAddress$.pipe(p.take(1),p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[wr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(wr))},token:t,providedIn:"root"}),t}();var br=new s.InjectionToken("DaffCartShippingMethodGuardRedirectUrl"),Or=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.hasShippingMethod$.pipe(p.take(1),p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[br]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(br))},token:t,providedIn:"root"}),t}();var Br=new s.InjectionToken("DaffCartOrderResultGuardRedirectUrl"),_r=function(){function t(t,e,r){this.facade=t,this.router=e,this.redirectUrl=r}return t.prototype.canActivate=function(){var t=this;return this.facade.hasOrderResult$.pipe(p.tap(function(e){e||t.router.navigateByUrl(t.redirectUrl)}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ir},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[Br]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(Ir),s.ɵɵinject(c.Router),s.ɵɵinject(Br))},token:t,providedIn:"root"}),t}();var xr=new s.InjectionToken("DaffCartResolverRedirectUrl"),kr=function(){function t(t,e,r,a){this.store=t,this.dispatcher=e,this.router=r,this.redirectUrl=a}return t.prototype.resolve=function(){var t=this;return this.store.dispatch(new E),this.dispatcher.pipe(p.filter(function(t){return t.type===y.CartLoadSuccessAction||t.type===y.CartLoadFailureAction||t.type===y.CartCreateFailureAction||t.type===y.CartStorageFailureAction}),p.map(function(e){return e.type!==y.CartLoadSuccessAction&&t.router.navigateByUrl(t.redirectUrl),e}),p.take(1))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Store},{type:e.ActionsSubject},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[xr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(e.Store),s.ɵɵinject(e.ActionsSubject),s.ɵɵinject(c.Router),s.ɵɵinject(xr))},token:t,providedIn:"root"}),t}();var Wr=new s.InjectionToken("DaffEmptyCartResolverRedirectUrl"),Hr=function(){function t(t,e,r){this.cartResolver=t,this.router=e,this.redirectUrl=r}return t.prototype.resolve=function(){var t=this;return this.cartResolver.resolve().pipe(p.filter(function(t){return t.type===y.CartLoadSuccessAction}),p.map(function(e){return e.payload&&0!==e.payload.items.length||t.router.navigateByUrl(t.redirectUrl),e}))},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:kr},{type:c.Router},{type:String,decorators:[{type:s.Inject,args:[Wr]}]}]},t.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new t(s.ɵɵinject(kr),s.ɵɵinject(c.Router),s.ɵɵinject(Wr))},token:t,providedIn:"root"}),t}();var Gr=new s.InjectionToken("DaffCartItemStateDebounceTime"),qr=function(){function t(t,e,r,i){var n=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=i,this.create$=this.actions$.pipe(d.ofType(y.CartCreateAction),p.switchMap(function(t){return n.driver.create().pipe(p.map(function(t){return new R(t)}),p.catchError(function(t){return u.of(new L(n.errorMatcher(t)))}))})),this.storeId$=this.actions$.pipe(d.ofType(y.CartCreateSuccessAction,y.ResolveCartSuccessAction),p.switchMap(function(t){return u.of(null).pipe(p.tap(function(){n.storage.setCartId(String(t.payload.id))}),p.switchMapTo(u.EMPTY),p.catchError(function(t){return u.of(new m(n.errorMatcher(t)))}))})),this.get$=this.actions$.pipe(d.ofType(y.CartLoadAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(t){return n.driver.get(t)}),p.map(function(t){return new v(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new D(n.errorMatcher(t)))}))})),this.addToCart$=this.actions$.pipe(d.ofType(y.AddToCartAction),p.switchMap(function(t){return n.driver.addToCart(t.payload.productId,t.payload.qty).pipe(p.map(function(t){return new F(t)}),p.catchError(function(t){return u.of(new $(n.errorMatcher(t)))}))})),this.clear$=this.actions$.pipe(d.ofType(y.CartClearAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(t){return n.driver.clear(t)}),p.map(function(t){return new j(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new T(n.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"create$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"storeId$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"addToCart$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"clear$",void 0),t}();var Vr=function(){function t(t,e,r,a,i){var n=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.cartItemStateDebounceTime=i,this.list$=this.actions$.pipe(d.ofType(O.CartItemListAction),p.switchMap(function(t){return n.driver.list(n.storage.getCartId()).pipe(p.map(function(t){return new _(t)}),p.catchError(function(t){return u.of(new x(n.errorMatcher(t)))}))})),this.get$=this.actions$.pipe(d.ofType(O.CartItemLoadAction),p.switchMap(function(t){return n.driver.get(n.storage.getCartId(),t.itemId).pipe(p.map(function(t){return new W(t)}),p.catchError(function(t){return u.of(new H(n.errorMatcher(t)))}))})),this.add$=this.actions$.pipe(d.ofType(O.CartItemAddAction),p.switchMap(function(t){return n.driver.add(n.storage.getCartId(),t.input).pipe(p.map(function(t){return new z(t)}),p.catchError(function(t){return u.of(new Y(n.errorMatcher(t)))}))})),this.update$=this.actions$.pipe(d.ofType(O.CartItemUpdateAction),p.mergeMap(function(t){return n.driver.update(n.storage.getCartId(),t.itemId,t.changes).pipe(p.map(function(e){return new q(e,t.itemId)}),p.catchError(function(t){return u.of(new V(n.errorMatcher(t)))}))})),this.resetCartItemStateAfterChange$=this.actions$.pipe(d.ofType(O.CartItemAddSuccessAction,O.CartItemUpdateSuccessAction),p.debounceTime(this.cartItemStateDebounceTime),p.map(function(){return new X})),this.delete$=this.actions$.pipe(d.ofType(O.CartItemDeleteAction),p.mergeMap(function(t){return n.driver.delete(n.storage.getCartId(),t.itemId).pipe(p.map(function(t){return new K(t)}),p.catchError(function(t){return u.of(new Q(n.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartItemDriver]}]},{type:n.DaffCartStorageService},{type:Number,decorators:[{type:s.Inject,args:[Gr]}]}]},h([d.Effect(),C("design:type",Object)],t.prototype,"list$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"add$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"resetCartItemStateAfterChange$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"delete$",void 0),t}();var Nr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.get$=this.actions$.pipe(d.ofType(Z.CartBillingAddressLoadAction),p.switchMap(function(t){return i.driver.get(i.storage.getCartId()).pipe(p.map(function(t){return new et(t)}),p.catchError(function(t){return u.of(new rt(i.errorMatcher(t)))}))})),this.update$=this.actions$.pipe(d.ofType(Z.CartBillingAddressUpdateAction),p.switchMap(function(t){return i.driver.update(i.storage.getCartId(),t.payload).pipe(p.map(function(t){return new it(t)}),p.catchError(function(t){return u.of(new nt(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartBillingAddressDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),t}();var zr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.get$=this.actions$.pipe(d.ofType(ot.CartShippingAddressLoadAction),p.switchMap(function(t){return i.driver.get(i.storage.getCartId()).pipe(p.map(function(t){return new st(t)}),p.catchError(function(t){return u.of(new pt(i.errorMatcher(t)))}))})),this.update$=this.actions$.pipe(d.ofType(ot.CartShippingAddressUpdateAction),p.switchMap(function(t){return i.driver.update(i.storage.getCartId(),t.payload).pipe(p.map(function(t){return new ut(t)}),p.catchError(function(t){return u.of(new ft(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartShippingAddressDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),t}();var Yr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.get$=this.actions$.pipe(d.ofType(At.CartShippingInformationLoadAction),p.switchMap(function(t){return i.driver.get(i.storage.getCartId()).pipe(p.map(function(t){return new mt(t)}),p.catchError(function(t){return u.of(new St(i.errorMatcher(t)))}))})),this.update$=this.actions$.pipe(d.ofType(At.CartShippingInformationUpdateAction),p.switchMap(function(t){return i.driver.update(i.storage.getCartId(),t.payload).pipe(p.map(function(t){return new Dt(t)}),p.catchError(function(t){return u.of(new It(i.errorMatcher(t)))}))})),this.delete$=this.actions$.pipe(d.ofType(At.CartShippingInformationDeleteAction),p.switchMap(function(t){return i.driver.delete(i.storage.getCartId()).pipe(p.map(function(t){return new Lt(t)}),p.catchError(function(t){return u.of(new Mt(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartShippingInformationDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"delete$",void 0),t}();var Jr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.list$=this.actions$.pipe(d.ofType(Ft.CartShippingMethodsLoadAction),p.switchMap(function(t){return i.driver.list(i.storage.getCartId()).pipe(p.map(function(t){return new Pt(t)}),p.catchError(function(t){return u.of(new jt(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartShippingMethodsDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"list$",void 0),t}();var Kr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.get$=this.actions$.pipe(d.ofType(Tt.CartPaymentLoadAction),p.switchMap(function(t){return i.driver.get(i.storage.getCartId()).pipe(p.map(function(t){return new wt(t)}),p.catchError(function(t){return u.of(new Ut(i.errorMatcher(t)))}))})),this.update$=this.actions$.pipe(d.ofType(Tt.CartPaymentUpdateAction),p.switchMap(function(t){return i.driver.update(i.storage.getCartId(),t.payload).pipe(p.map(function(t){return new Ot(t)}),p.catchError(function(t){return u.of(new Bt(i.errorMatcher(t)))}))})),this.updateWithBilling$=this.actions$.pipe(d.ofType(Tt.CartPaymentUpdateWithBillingAction),p.switchMap(function(t){return i.driver.updateWithBilling(i.storage.getCartId(),t.payment,t.address).pipe(p.map(function(t){return new xt(t)}),p.catchError(function(t){return u.of(new kt(i.errorMatcher(t)))}))})),this.remove$=this.actions$.pipe(d.ofType(Tt.CartPaymentRemoveAction),p.switchMap(function(t){return i.driver.remove(i.storage.getCartId()).pipe(p.mapTo(new Ht),p.catchError(function(t){return u.of(new Gt(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartPaymentDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"get$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"updateWithBilling$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"remove$",void 0),t}();var Qr=function(){function t(t,e,r,a){var i=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=a,this.list$=this.actions$.pipe(d.ofType(Vt.CartPaymentMethodsLoadAction),p.switchMap(function(t){return i.driver.list(i.storage.getCartId()).pipe(p.map(function(t){return new zt(t)}),p.catchError(function(t){return u.of(new Yt(i.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartPaymentMethodsDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"list$",void 0),t}();var Xr=function(){function t(t,e,r,i){var n=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=i,this.placeOrder$=this.actions$.pipe(d.ofType(Jt.CartPlaceOrderAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(e){return n.driver.placeOrder(e,t.payload)}),p.map(function(t){return new Qt(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new Xt(n.errorMatcher(t)))}))})),this.resetCart$=this.actions$.pipe(d.ofType(Jt.CartPlaceOrderSuccessAction),p.mapTo(new I))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartOrderDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"placeOrder$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"resetCart$",void 0),t}();var Zr=function(){function t(t,e,r,i){var n=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=i,this.apply$=this.actions$.pipe(d.ofType(Zt.CartCouponApplyAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(e){return n.driver.apply(e,t.payload)}),p.map(function(t){return new ee(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new re(n.errorMatcher(t)))}))})),this.list$=this.actions$.pipe(d.ofType(Zt.CartCouponListAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(t){return n.driver.list(t)}),p.map(function(t){return new ie(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new ne(n.errorMatcher(t)))}))})),this.remove$=this.actions$.pipe(d.ofType(Zt.CartCouponRemoveAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(e){return n.driver.remove(e,t.payload)}),p.map(function(t){return new ce(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new se(n.errorMatcher(t)))}))})),this.removeAll$=this.actions$.pipe(d.ofType(Zt.CartCouponRemoveAllAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(t){return n.driver.removeAll(t)}),p.map(function(t){return new de(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new ue(n.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartCouponDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"apply$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"list$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"remove$",void 0),h([d.Effect(),C("design:type",Object)],t.prototype,"removeAll$",void 0),t}();var ta=function(){function t(t,e,r,i){var n=this;this.actions$=t,this.errorMatcher=e,this.driver=r,this.storage=i,this.update$=this.actions$.pipe(d.ofType(lt.CartAddressUpdateAction),p.switchMap(function(t){return u.of(null).pipe(p.map(function(){return n.storage.getCartId()}),p.switchMap(function(e){return n.driver.update(e,t.payload)}),p.map(function(t){return new Ct(t)}),p.catchError(function(t){return u.of(t instanceof a.DaffStorageServiceError?new m(n.errorMatcher(t)):new gt(n.errorMatcher(t)))}))}))}return t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartAddressDriver]}]},{type:n.DaffCartStorageService}]},h([d.Effect(),C("design:type",Object)],t.prototype,"update$",void 0),t}();var ea=function(){function t(t,e,r,i){var n=this;this.actions$=t,this.errorMatcher=e,this.cartStorage=r,this.driver=i,this.onResolveCart=function(){return n.actions$.pipe(d.ofType(y.ResolveCartAction),p.switchMap(function(){return u.of(null).pipe(p.map(function(){return n.cartStorage.getCartId()}),p.switchMap(function(t){return t?u.of({id:t}):n.driver.create()}),p.switchMap(function(t){var e=t.id;return n.driver.get(e)}),p.map(function(t){return new w(t)}),p.catchError(function(t){switch(!0){case t instanceof a.DaffServerSideStorageError:return u.of(new b);case t instanceof a.DaffStorageServiceError:return t.message="Cart resolution failed while attempting to retrieve the cart ID from storage.",u.of(new U(n.errorMatcher(t)));case t instanceof f.DaffCartNotFoundError:return n.driver.create().pipe(p.switchMap(function(t){var e=t.id;return n.driver.get(e)}),p.map(function(t){return new w(t)}),p.catchError(function(t){return t.message="Cart resolution failed after attempting to generate and load a new cart.",u.of(new U(n.errorMatcher(t)))}));default:return t.message="Cart resolution has failed.",u.of(new U(n.errorMatcher(t)))}}))}))}}return t.prototype.ngrxOnInitEffects=function(){return new E},t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:d.Actions},{type:Function,decorators:[{type:s.Inject,args:[n.DAFF_CART_ERROR_MATCHER]}]},{type:n.DaffCartStorageService},{type:void 0,decorators:[{type:s.Inject,args:[f.DaffCartDriver]}]}]},h([d.Effect(),C("design:type",Object)],t.prototype,"onResolveCart",void 0),t}();var ra=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:Fr,useValue:l({},Mr,e)}]}},t.decorators=[{type:s.NgModule,args:[{imports:[e.StoreModule.forFeature("cart",gr),d.EffectsModule.forFeature([qr,Vr,Nr,zr,ta,Yr,Jr,Kr,Qr,Xr,Zr,ea])],providers:[{provide:Rr,useValue:"/"},{provide:Pr,useValue:"/"},{provide:wr,useValue:"/"},{provide:br,useValue:"/"},{provide:Tr,useValue:"/"},{provide:Br,useValue:"/"},{provide:Wr,useValue:"/"},{provide:xr,useValue:"/"},{provide:Gr,useValue:4e3}]}]}],t}();t.DAFF_CART_STATE_CONFIG=Fr,t.DaffAddToCart=M,t.DaffAddToCartFailure=$,t.DaffAddToCartSuccess=F,t.DaffBillingAddressGuard=Lr,t.DaffCartActionTypes=y,t.DaffCartAddressActionTypes=lt,t.DaffCartAddressUpdate=ht,t.DaffCartAddressUpdateFailure=gt,t.DaffCartAddressUpdateSuccess=Ct,t.DaffCartBillingAddressActionTypes=Z,t.DaffCartBillingAddressGuardRedirectUrl=Rr,t.DaffCartBillingAddressLoad=tt,t.DaffCartBillingAddressLoadFailure=rt,t.DaffCartBillingAddressLoadSuccess=et,t.DaffCartBillingAddressUpdate=at,t.DaffCartBillingAddressUpdateFailure=nt,t.DaffCartBillingAddressUpdateSuccess=it,t.DaffCartClear=P,t.DaffCartClearFailure=T,t.DaffCartClearSuccess=j,t.DaffCartCouponActionTypes=Zt,t.DaffCartCouponApply=te,t.DaffCartCouponApplyFailure=re,t.DaffCartCouponApplySuccess=ee,t.DaffCartCouponList=ae,t.DaffCartCouponListFailure=ne,t.DaffCartCouponListSuccess=ie,t.DaffCartCouponRemove=oe,t.DaffCartCouponRemoveAll=pe,t.DaffCartCouponRemoveAllFailure=ue,t.DaffCartCouponRemoveAllSuccess=de,t.DaffCartCouponRemoveFailure=se,t.DaffCartCouponRemoveSuccess=ce,t.DaffCartCreate=I,t.DaffCartCreateFailure=L,t.DaffCartCreateSuccess=R,t.DaffCartFacade=Ir,t.DaffCartItemActionTypes=O,t.DaffCartItemAdd=N,t.DaffCartItemAddFailure=Y,t.DaffCartItemAddSuccess=z,t.DaffCartItemDelete=J,t.DaffCartItemDeleteFailure=Q,t.DaffCartItemDeleteSuccess=K,t.DaffCartItemList=B,t.DaffCartItemListFailure=x,t.DaffCartItemListSuccess=_,t.DaffCartItemLoad=k,t.DaffCartItemLoadFailure=H,t.DaffCartItemLoadSuccess=W,t.DaffCartItemLoadingState=me,t.DaffCartItemStateDebounceTime=Gr,t.DaffCartItemStateEnum=ur,t.DaffCartItemStateReset=X,t.DaffCartItemUpdate=G,t.DaffCartItemUpdateFailure=V,t.DaffCartItemUpdateSuccess=q,t.DaffCartItemsGuard=jr,t.DaffCartItemsGuardRedirectUrl=Pr,t.DaffCartLoad=S,t.DaffCartLoadFailure=D,t.DaffCartLoadSuccess=v,t.DaffCartOperationType=ge,t.DaffCartOrderActionTypes=Jt,t.DaffCartOrderResultGuardRedirectUrl=Br,t.DaffCartPaymentActionTypes=Tt,t.DaffCartPaymentLoad=Et,t.DaffCartPaymentLoadFailure=Ut,t.DaffCartPaymentLoadSuccess=wt,t.DaffCartPaymentMethodAdd=qt,t.DaffCartPaymentMethodGuardRedirectUrl=Tr,t.DaffCartPaymentMethodsActionTypes=Vt,t.DaffCartPaymentMethodsLoad=Nt,t.DaffCartPaymentMethodsLoadFailure=Yt,t.DaffCartPaymentMethodsLoadSuccess=zt,t.DaffCartPaymentRemove=Wt,t.DaffCartPaymentRemoveFailure=Gt,t.DaffCartPaymentRemoveSuccess=Ht,t.DaffCartPaymentUpdate=bt,t.DaffCartPaymentUpdateFailure=Bt,t.DaffCartPaymentUpdateSuccess=Ot,t.DaffCartPaymentUpdateWithBilling=_t,t.DaffCartPaymentUpdateWithBillingFailure=kt,t.DaffCartPaymentUpdateWithBillingSuccess=xt,t.DaffCartPlaceOrder=Kt,t.DaffCartPlaceOrderFailure=Xt,t.DaffCartPlaceOrderSuccess=Qt,t.DaffCartResolveState=ve,t.DaffCartResolver=kr,t.DaffCartResolverRedirectUrl=xr,t.DaffCartShippingAddressActionTypes=ot,t.DaffCartShippingAddressGuardRedirectUrl=wr,t.DaffCartShippingAddressLoad=ct,t.DaffCartShippingAddressLoadFailure=pt,t.DaffCartShippingAddressLoadSuccess=st,t.DaffCartShippingAddressUpdate=dt,t.DaffCartShippingAddressUpdateFailure=ft,t.DaffCartShippingAddressUpdateSuccess=ut,t.DaffCartShippingInformationActionTypes=At,t.DaffCartShippingInformationDelete=Rt,t.DaffCartShippingInformationDeleteFailure=Mt,t.DaffCartShippingInformationDeleteSuccess=Lt,t.DaffCartShippingInformationLoad=yt,t.DaffCartShippingInformationLoadFailure=St,t.DaffCartShippingInformationLoadSuccess=mt,t.DaffCartShippingInformationUpdate=vt,t.DaffCartShippingInformationUpdateFailure=It,t.DaffCartShippingInformationUpdateSuccess=Dt,t.DaffCartShippingMethodGuardRedirectUrl=br,t.DaffCartShippingMethodsActionTypes=Ft,t.DaffCartShippingMethodsLoad=$t,t.DaffCartShippingMethodsLoadFailure=jt,t.DaffCartShippingMethodsLoadSuccess=Pt,t.DaffCartStateModule=ra,t.DaffCartStorageFailure=m,t.DaffEmptyCartResolver=Hr,t.DaffEmptyCartResolverRedirectUrl=Wr,t.DaffOrderResultGuard=_r,t.DaffPaymentMethodGuard=Er,t.DaffResolveCart=E,t.DaffResolveCartFailure=U,t.DaffResolveCartServerSide=b,t.DaffResolveCartSuccess=w,t.DaffResolvedCartGuard=$r,t.DaffShippingAddressGuard=Ur,t.DaffShippingMethodGuard=Or,t.daffCartOrderInitialState=hr,t.daffCartOrderReducer=Cr,t.daffCartReducer=pr,t.daffCartReducers=gr,t.getDaffCartSelectors=Dr,t.initialState=De,t.initializeLoadingSetter=Se,t.ɵa=sr,t.ɵb=$e,t.ɵc=Ee,t.ɵd=Oe,t.ɵe=ke,t.ɵf=qe,t.ɵg=Ye,t.ɵh=Xe,t.ɵi=rr,t.ɵj=or,t.ɵk=cr,t.ɵl=fr,t.ɵm=qr,t.ɵn=Vr,t.ɵo=Nr,t.ɵp=zr,t.ɵq=ta,t.ɵr=Yr,t.ɵs=Jr,t.ɵt=Kr,t.ɵu=Qr,t.ɵv=Xr,t.ɵw=Zr,t.ɵx=ea,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=daffodil-cart-state.umd.min.js.map