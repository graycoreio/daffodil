!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngrx/effects"),require("rxjs"),require("rxjs/operators"),require("@daffodil/contact/driver"),require("@ngrx/store")):"function"==typeof define&&define.amd?define("@daffodil/contact/state",["exports","@angular/core","@ngrx/effects","rxjs","rxjs/operators","@daffodil/contact/driver","@ngrx/store"],e):e(((t=t||self).daffodil=t.daffodil||{},t.daffodil.contact=t.daffodil.contact||{},t.daffodil.contact.state={}),t.ng.core,t.effects,t.rxjs,t.rxjs.operators,t.daffodil.contact.driver,t.store)}(this,function(t,e,n,o,c,r,a){"use strict";var i={ContactSubmitAction:"[Daff-Contact] Contact Submit Action",ContactCancelAction:"[Daff-Contact] Contact Cancel Action",ContactSuccessSubmitAction:"[Daff-Contact] Contact Success Submit Action",ContactFailedSubmitAction:"[Daff-Contact] Contact Failed Submit Action",ContactRetryAction:"[Daff-Contact] Contact Retry Action",ContactResetAction:"[Daff-Contact] Contact Reset Action"},s=function(t){this.payload=t,this.type=i.ContactSubmitAction};var f=function(t){this.payload=t,this.type=i.ContactRetryAction};var u=function(t){this.payload=t,this.type=i.ContactFailedSubmitAction};var d=function(){this.type=i.ContactCancelAction};var l=function(){this.type=i.ContactSuccessSubmitAction};var C=function(){this.type=i.ContactResetAction};var p=function(){function t(t,e){var r=this;this.actions$=t,this.driver=e,this.trySubmission$=n.createEffect(function(){return r.actions$.pipe(n.ofType(i.ContactSubmitAction,i.ContactRetryAction,i.ContactCancelAction),c.switchMap(function(t){return t instanceof d?o.EMPTY:r.submitContact(t.payload)}))})}return t.prototype.submitContact=function(t){return this.driver.send(t).pipe(c.map(function(t){return new l}),c.catchError(function(t){return o.of(new u(["Failed to submit"]))}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Actions},{type:void 0,decorators:[{type:e.Inject,args:[r.DaffContactDriver]}]}]},t}();var y=a.createFeatureSelector("contact"),h=a.createSelector(y,function(t){return t.loading}),S=a.createSelector(y,function(t){return t.success}),A=a.createSelector(y,function(t){return t.errors}),b=this&&this.__assign||function(){return(b=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)};var m={success:!1,loading:!1,errors:null};function v(t,e){switch(void 0===t&&(t=m),e.type){case i.ContactRetryAction:case i.ContactSubmitAction:return b({},t,{loading:!0});case i.ContactFailedSubmitAction:return b({},t,{loading:!1,errors:e.payload});case i.ContactSuccessSubmitAction:return b({},t,{success:!0,loading:!1});case i.ContactCancelAction:return b({},t,{loading:!1});case i.ContactResetAction:return b({},t,m);default:return t}}var g=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[],imports:[a.StoreModule.forFeature("contact",v),n.EffectsModule.forFeature([p])],providers:[]}]}],t}(),D=function(){function t(t){this.store=t,this.success$=this.store.select(S),this.error$=this.store.select(A),this.loading$=this.store.select(h)}return t.prototype.dispatch=function(t){this.store.dispatch(t)},t.decorators=[{type:e.Injectable,args:[{providedIn:g}]}],t.ctorParameters=function(){return[{type:a.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(a.Store))},token:t,providedIn:g}),t}();t.DaffContactActionTypes=i,t.DaffContactCancel=d,t.DaffContactEffects=p,t.DaffContactFacade=D,t.DaffContactFailedSubmit=u,t.DaffContactReset=C,t.DaffContactRetry=f,t.DaffContactSubmit=s,t.DaffContactSuccessSubmit=l,t.reducer=v,t.selectContactFeatureState=y,t.selectDaffContactError=A,t.selectDaffContactLoading=h,t.selectDaffContactSuccess=S,t.ɵa=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=daffodil-contact-state.umd.min.js.map