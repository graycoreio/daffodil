{"version":3,"file":"daffodil-contact-state.umd.js","sources":["ng://@daffodil/contact/state/actions/contact.actions.ts","ng://@daffodil/contact/state/effects/contact.effects.ts","ng://@daffodil/contact/state/selectors/contact.selector.ts","ng://@daffodil/contact/state/reducers/contact.reducer.ts","ng://@daffodil/contact/state/contact.module.ts","ng://@daffodil/contact/state/facades/contact.facade.ts"],"sourcesContent":["import { Action } from '@ngrx/store';\n\nexport enum DaffContactActionTypes {\n\tContactSubmitAction = '[Daff-Contact] Contact Submit Action',\n\tContactCancelAction = '[Daff-Contact] Contact Cancel Action',\n\tContactSuccessSubmitAction = '[Daff-Contact] Contact Success Submit Action',\n\tContactFailedSubmitAction = '[Daff-Contact] Contact Failed Submit Action',\n\tContactRetryAction = '[Daff-Contact] Contact Retry Action',\n\tContactResetAction = '[Daff-Contact] Contact Reset Action',\n}\n\nexport class DaffContactSubmit<T> implements Action {\n\treadonly type = DaffContactActionTypes.ContactSubmitAction;\n\n\tconstructor(public payload: T) {}\n}\n\nexport class DaffContactRetry<T> implements Action {\n\treadonly type = DaffContactActionTypes.ContactRetryAction;\n\n\tconstructor(public payload: T) {}\n}\nexport class DaffContactFailedSubmit implements Action {\n\treadonly type = DaffContactActionTypes.ContactFailedSubmitAction;\n\n\tconstructor(public payload: string[]) {}\n}\nexport class DaffContactCancel implements Action {\n\treadonly type = DaffContactActionTypes.ContactCancelAction;\n}\nexport class DaffContactSuccessSubmit implements Action {\n\treadonly type = DaffContactActionTypes.ContactSuccessSubmitAction;\n}\nexport class DaffContactReset implements Action {\n\treadonly type = DaffContactActionTypes.ContactResetAction;\n}\n\nexport type DaffContactActions<T> =\n\t| DaffContactSubmit<T>\n\t| DaffContactRetry<T>\n\t| DaffContactFailedSubmit\n\t| DaffContactCancel\n\t| DaffContactSuccessSubmit\n\t| DaffContactReset;\n","import { Injectable, Inject } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { Action } from '@ngrx/store';\nimport { Observable, of, EMPTY } from 'rxjs';\nimport { switchMap, map, catchError } from 'rxjs/operators';\n\nimport {\n\tDaffContactServiceInterface,\n\tDaffContactDriver,\n} from '@daffodil/contact/driver';\n\nimport {\n\tDaffContactActionTypes,\n\tDaffContactSubmit,\n\tDaffContactCancel,\n\tDaffContactSuccessSubmit,\n\tDaffContactFailedSubmit,\n\tDaffContactRetry,\n} from '../actions/contact.actions';\n\n@Injectable()\nexport class DaffContactEffects<T, V> {\n\tconstructor(\n\t\tprivate actions$: Actions,\n\t\t@Inject(DaffContactDriver)\n\t\tprivate driver: DaffContactServiceInterface<T, V>,\n\t) {}\n\n\ttrySubmission$: Observable<Action> = createEffect(() =>\n\t\tthis.actions$.pipe(\n\t\t\tofType(\n\t\t\t\tDaffContactActionTypes.ContactSubmitAction,\n\t\t\t\tDaffContactActionTypes.ContactRetryAction,\n\t\t\t\tDaffContactActionTypes.ContactCancelAction,\n\t\t\t),\n\t\t\tswitchMap(\n\t\t\t\t(\n\t\t\t\t\taction:\n\t\t\t\t\t\t| DaffContactSubmit<T>\n\t\t\t\t\t\t| DaffContactRetry<T>\n\t\t\t\t\t\t| DaffContactCancel,\n\t\t\t\t) => {\n\t\t\t\t\tif (action instanceof DaffContactCancel) {\n\t\t\t\t\t\treturn EMPTY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.submitContact(action.payload);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t),\n\t);\n\n\tprivate submitContact(contact: T): Observable<Action> {\n\t\treturn this.driver.send(contact).pipe(\n\t\t\tmap((resp: V) => {\n\t\t\t\treturn new DaffContactSuccessSubmit();\n\t\t\t}),\n\t\t\tcatchError(error => {\n\t\t\t\treturn of(new DaffContactFailedSubmit(['Failed to submit']));\n\t\t\t}),\n\t\t);\n\t}\n}\n","import { MemoizedSelector, createFeatureSelector, createSelector } from '@ngrx/store';\nimport { DaffContactState } from '../reducers/contact.reducer';\n\nexport interface DaffContactFeatureState {\n  contact: DaffContactState\n}\n\nexport const selectContactFeatureState:\n  MemoizedSelector<DaffContactFeatureState, DaffContactState> = createFeatureSelector<DaffContactState>('contact');\n\nexport const selectDaffContactLoading = createSelector(\n  selectContactFeatureState, (state: DaffContactState) => state.loading\n);\n\nexport const selectDaffContactSuccess = createSelector(\n  selectContactFeatureState, (state: DaffContactState) => state.success\n);\n\nexport const selectDaffContactError = createSelector(\n  selectContactFeatureState, (state: DaffContactState) => state.errors\n);","import { DaffContactActions, DaffContactActionTypes} from '../actions/contact.actions';\n\nexport interface DaffContactState {\n  success: boolean;\n  loading: boolean;\n  errors: string[] | null;\n}\n\nconst initialState: DaffContactState = {\n  success: false,\n  loading: false,\n  errors: null\n}\n\nexport function reducer<T>(state: DaffContactState = initialState, \n  action: DaffContactActions<T>){\n    switch(action.type){\n      case DaffContactActionTypes.ContactRetryAction:\n      case DaffContactActionTypes.ContactSubmitAction:\n        return {...state, loading: true};\n      case DaffContactActionTypes.ContactFailedSubmitAction:\n        return {...state, loading: false, errors: action.payload};\n      case DaffContactActionTypes.ContactSuccessSubmitAction:\n        return {...state, success: true, loading: false}\n      case DaffContactActionTypes.ContactCancelAction:\n        return {...state, loading: false};\n      case DaffContactActionTypes.ContactResetAction:\n        return {...state, ... initialState};\n      default:\n        return state;\n    }\n  }","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { reducer } from './reducers/contact.reducer';\nimport { DaffContactEffects } from './effects/contact.effects';\n\n@NgModule({\n\tdeclarations: [],\n\timports: [\n\t\tStoreModule.forFeature('contact', reducer),\n\t\tEffectsModule.forFeature([DaffContactEffects])\n\t],\n\tproviders: [],\n})\nexport class DaffContactStateModule { }\n","import { Injectable } from '@angular/core';\nimport { Action, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\n\nimport {\n\tDaffContactFeatureState,\n\tselectDaffContactLoading,\n\tselectDaffContactError,\n\tselectDaffContactSuccess,\n} from '../selectors/contact.selector';\nimport { DaffContactStateModule } from '../contact.module';\nimport { DaffContactFacadeInterface } from './contact-facade.interface';\n\n@Injectable({ providedIn: DaffContactStateModule })\nexport class DaffContactFacade implements DaffContactFacadeInterface {\n\tsuccess$: Observable<boolean> = this.store.select(selectDaffContactSuccess);\n\terror$: Observable<string[]> = this.store.select(selectDaffContactError);\n\tloading$: Observable<boolean> = this.store.select(selectDaffContactLoading);\n\n\tconstructor(private store: Store<DaffContactFeatureState>) { }\n\tdispatch(action: Action) {\n\t\tthis.store.dispatch(action);\n\t}\n}\n"],"names":["createEffect","ofType","switchMap","EMPTY","map","catchError","of","Injectable","Actions","Inject","DaffContactDriver","createFeatureSelector","createSelector","NgModule","StoreModule","EffectsModule","Store"],"mappings":"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"}