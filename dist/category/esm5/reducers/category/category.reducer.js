/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { DaffCategoryActionTypes } from '../../actions/category.actions';
import { toggleCategoryFilter } from './toggle-filter/core';
/** @type {?} */
var initialState = {
    categoryPageConfigurationState: {
        id: null,
        filter_requests: [],
        applied_sort_option: null,
        applied_sort_direction: null,
        current_page: null,
        page_size: null,
        total_pages: null,
        filters: [],
        sort_options: [],
        total_products: null,
        product_ids: []
    },
    categoryLoading: false,
    productsLoading: false,
    errors: []
};
/**
 * @template T, U, V, W
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
export function daffCategoryReducer(state, action) {
    if (state === void 0) { state = initialState; }
    switch (action.type) {
        case DaffCategoryActionTypes.CategoryLoadAction:
            return tslib_1.__assign({}, state, { categoryLoading: true, productsLoading: true });
        // This reducer must assume the call will be successful, and immediately set the applied filters to state, because the
        // GetCategory magento call doesn't return currently applied filters. If there is a bug where the wrong filters are somehow
        // applied by Magento, then this will result in a bug. Until Magento returns applied filters with a category call, this is
        // unavoidable.
        case DaffCategoryActionTypes.CategoryPageLoadAction:
            return tslib_1.__assign({}, state, { categoryLoading: true, productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, action.request) });
        case DaffCategoryActionTypes.ChangeCategoryPageSizeAction:
            return tslib_1.__assign({}, state, { productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { page_size: action.pageSize }) });
        case DaffCategoryActionTypes.ChangeCategoryCurrentPageAction:
            return tslib_1.__assign({}, state, { productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { current_page: action.currentPage }) });
        case DaffCategoryActionTypes.ChangeCategorySortingOptionAction:
            return tslib_1.__assign({}, state, { productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { applied_sort_option: action.sort.option, applied_sort_direction: action.sort.direction }) });
        case DaffCategoryActionTypes.ChangeCategoryFiltersAction:
            return tslib_1.__assign({}, state, { productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { filter_requests: action.filters }) });
        case DaffCategoryActionTypes.ToggleCategoryFilterAction:
            return tslib_1.__assign({}, state, { productsLoading: true, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { filter_requests: toggleCategoryFilter(action.filter, state.categoryPageConfigurationState.filter_requests) }) });
        // This reducer cannot spread over state, because this would wipe out the applied filters on state. Applied filters are not
        // set here for reasons stated above.
        case DaffCategoryActionTypes.CategoryLoadSuccessAction:
        case DaffCategoryActionTypes.CategoryPageLoadSuccessAction:
            return tslib_1.__assign({}, state, { categoryLoading: false, productsLoading: false, categoryPageConfigurationState: tslib_1.__assign({}, state.categoryPageConfigurationState, { id: action.response.categoryPageConfigurationState.id, current_page: action.response.categoryPageConfigurationState.current_page, page_size: action.response.categoryPageConfigurationState.page_size, filters: action.response.categoryPageConfigurationState.filters, sort_options: action.response.categoryPageConfigurationState.sort_options, total_pages: action.response.categoryPageConfigurationState.total_pages, total_products: action.response.categoryPageConfigurationState.total_products, product_ids: action.response.categoryPageConfigurationState.product_ids }) });
        case DaffCategoryActionTypes.CategoryLoadFailureAction:
        case DaffCategoryActionTypes.CategoryPageLoadFailureAction:
            return tslib_1.__assign({}, state, { categoryLoading: false, productsLoading: false, errors: [action.errorMessage] });
        default:
            return state;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2F0ZWdvcnkucmVkdWNlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BkYWZmb2RpbC9jYXRlZ29yeS8iLCJzb3VyY2VzIjpbInJlZHVjZXJzL2NhdGVnb3J5L2NhdGVnb3J5LnJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQSxPQUFPLEVBQUUsdUJBQXVCLEVBQXVCLE1BQU0sZ0NBQWdDLENBQUM7QUFFOUYsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7O0lBS3RELFlBQVksR0FBdUM7SUFDeEQsOEJBQThCLEVBQUU7UUFDN0IsRUFBRSxFQUFFLElBQUk7UUFDVixlQUFlLEVBQUUsRUFBRTtRQUNqQixtQkFBbUIsRUFBRSxJQUFJO1FBQ3pCLHNCQUFzQixFQUFFLElBQUk7UUFDNUIsWUFBWSxFQUFFLElBQUk7UUFDbEIsU0FBUyxFQUFFLElBQUk7UUFDZixXQUFXLEVBQUUsSUFBSTtRQUNqQixPQUFPLEVBQUUsRUFBRTtRQUNiLFlBQVksRUFBRSxFQUFFO1FBQ2hCLGNBQWMsRUFBRSxJQUFJO1FBQ3BCLFdBQVcsRUFBRSxFQUFFO0tBQ2Y7SUFDRCxlQUFlLEVBQUUsS0FBSztJQUN0QixlQUFlLEVBQUUsS0FBSztJQUNyQixNQUFNLEVBQUUsRUFBRTtDQUNYOzs7Ozs7O0FBRUQsTUFBTSxVQUFVLG1CQUFtQixDQUNqQyxLQUFvQixFQUFFLE1BQXVDO0lBQTdELHNCQUFBLEVBQUEsb0JBQW9CO0lBQ3BCLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtRQUNuQixLQUFLLHVCQUF1QixDQUFDLGtCQUFrQjtZQUM3Qyw0QkFDSyxLQUFLLElBQ1osZUFBZSxFQUFFLElBQUksRUFDckIsZUFBZSxFQUFFLElBQUksSUFDakI7UUFFSixzSEFBc0g7UUFDdEgsMkhBQTJIO1FBQzNILDBIQUEwSDtRQUMxSCxlQUFlO1FBQ2YsS0FBSyx1QkFBdUIsQ0FBQyxzQkFBc0I7WUFDakQsNEJBQ0ssS0FBSyxJQUNaLGVBQWUsRUFBRSxJQUFJLEVBQ3JCLGVBQWUsRUFBRSxJQUFJLEVBQ2pCLDhCQUE4Qix1QkFDekIsS0FBSyxDQUFDLDhCQUE4QixFQUNwQyxNQUFNLENBQUMsT0FBTyxLQUV0QjtRQUNILEtBQUssdUJBQXVCLENBQUMsNEJBQTRCO1lBQ3hELDRCQUNJLEtBQUssSUFDUixlQUFlLEVBQUUsSUFBSSxFQUNyQiw4QkFBOEIsdUJBQzFCLEtBQUssQ0FBQyw4QkFBOEIsSUFDdkMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxRQUFRLE9BRTFCO1FBQ0gsS0FBSyx1QkFBdUIsQ0FBQywrQkFBK0I7WUFDM0QsNEJBQ0ksS0FBSyxJQUNSLGVBQWUsRUFBRSxJQUFJLEVBQ3JCLDhCQUE4Qix1QkFDMUIsS0FBSyxDQUFDLDhCQUE4QixJQUN2QyxZQUFZLEVBQUUsTUFBTSxDQUFDLFdBQVcsT0FFaEM7UUFDSCxLQUFLLHVCQUF1QixDQUFDLGlDQUFpQztZQUM3RCw0QkFDSSxLQUFLLElBQ1IsZUFBZSxFQUFFLElBQUksRUFDckIsOEJBQThCLHVCQUMxQixLQUFLLENBQUMsOEJBQThCLElBQ3ZDLG1CQUFtQixFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUN2QyxzQkFBc0IsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsT0FFN0M7UUFDSCxLQUFLLHVCQUF1QixDQUFDLDJCQUEyQjtZQUN2RCw0QkFDSSxLQUFLLElBQ1IsZUFBZSxFQUFFLElBQUksRUFDckIsOEJBQThCLHVCQUMxQixLQUFLLENBQUMsOEJBQThCLElBQ3ZDLGVBQWUsRUFBRSxNQUFNLENBQUMsT0FBTyxPQUUvQjtRQUNILEtBQUssdUJBQXVCLENBQUMsMEJBQTBCO1lBQ3RELDRCQUNJLEtBQUssSUFDUixlQUFlLEVBQUUsSUFBSSxFQUNyQiw4QkFBOEIsdUJBQzFCLEtBQUssQ0FBQyw4QkFBOEIsSUFDdkMsZUFBZSxFQUFFLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLDhCQUE4QixDQUFDLGVBQWUsQ0FBQyxPQUUzRztRQUNBLDJIQUEySDtRQUMzSCxxQ0FBcUM7UUFDdkMsS0FBSyx1QkFBdUIsQ0FBQyx5QkFBeUIsQ0FBQztRQUN2RCxLQUFLLHVCQUF1QixDQUFDLDZCQUE2QjtZQUN0RCw0QkFDSyxLQUFLLElBQ1osZUFBZSxFQUFFLEtBQUssRUFDdEIsZUFBZSxFQUFFLEtBQUssRUFDbEIsOEJBQThCLHVCQUN6QixLQUFLLENBQUMsOEJBQThCLElBQ3ZDLEVBQUUsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLDhCQUE4QixDQUFDLEVBQUUsRUFDckQsWUFBWSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsOEJBQThCLENBQUMsWUFBWSxFQUN6RSxTQUFTLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyw4QkFBOEIsQ0FBQyxTQUFTLEVBQ25FLE9BQU8sRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLDhCQUE4QixDQUFDLE9BQU8sRUFDL0QsWUFBWSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsOEJBQThCLENBQUMsWUFBWSxFQUM5RSxXQUFXLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyw4QkFBOEIsQ0FBQyxXQUFXLEVBQ3ZFLGNBQWMsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLDhCQUE4QixDQUFDLGNBQWMsRUFDN0UsV0FBVyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsOEJBQThCLENBQUMsV0FBVyxPQUVwRTtRQUNKLEtBQUssdUJBQXVCLENBQUMseUJBQXlCLENBQUM7UUFDdkQsS0FBSyx1QkFBdUIsQ0FBQyw2QkFBNkI7WUFDeEQsNEJBQ0ssS0FBSyxJQUNaLGVBQWUsRUFBRSxLQUFLLEVBQ3RCLGVBQWUsRUFBRSxLQUFLLEVBQ2xCLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFDN0I7UUFDSjtZQUNFLE9BQU8sS0FBSyxDQUFDO0tBQ2hCO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhZmZQcm9kdWN0IH0gZnJvbSAnQGRhZmZvZGlsL3Byb2R1Y3QnO1xuXG5pbXBvcnQgeyBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcywgRGFmZkNhdGVnb3J5QWN0aW9ucyB9IGZyb20gJy4uLy4uL2FjdGlvbnMvY2F0ZWdvcnkuYWN0aW9ucyc7XG5pbXBvcnQgeyBEYWZmQ2F0ZWdvcnlSZWR1Y2VyU3RhdGUgfSBmcm9tICcuL2NhdGVnb3J5LXJlZHVjZXItc3RhdGUuaW50ZXJmYWNlJztcbmltcG9ydCB7IHRvZ2dsZUNhdGVnb3J5RmlsdGVyIH0gZnJvbSAnLi90b2dnbGUtZmlsdGVyL2NvcmUnO1xuaW1wb3J0IHsgRGFmZkNhdGVnb3J5UmVxdWVzdCB9IGZyb20gJy4uLy4uL21vZGVscy9yZXF1ZXN0cy9jYXRlZ29yeS1yZXF1ZXN0JztcbmltcG9ydCB7IERhZmZDYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUgfSBmcm9tICcuLi8uLi9tb2RlbHMvY2F0ZWdvcnktcGFnZS1jb25maWd1cmF0aW9uLXN0YXRlJztcbmltcG9ydCB7IERhZmZHZW5lcmljQ2F0ZWdvcnkgfSBmcm9tICcuLi8uLi9tb2RlbHMvZ2VuZXJpYy1jYXRlZ29yeSc7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogRGFmZkNhdGVnb3J5UmVkdWNlclN0YXRlPGFueSwgYW55PiA9IHtcblx0Y2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG4gICAgaWQ6IG51bGwsXG5cdFx0ZmlsdGVyX3JlcXVlc3RzOiBbXSxcbiAgICBhcHBsaWVkX3NvcnRfb3B0aW9uOiBudWxsLFxuICAgIGFwcGxpZWRfc29ydF9kaXJlY3Rpb246IG51bGwsXG4gICAgY3VycmVudF9wYWdlOiBudWxsLFxuICAgIHBhZ2Vfc2l6ZTogbnVsbCxcbiAgICB0b3RhbF9wYWdlczogbnVsbCxcbiAgICBmaWx0ZXJzOiBbXSxcblx0XHRzb3J0X29wdGlvbnM6IFtdLFxuXHRcdHRvdGFsX3Byb2R1Y3RzOiBudWxsLFxuXHRcdHByb2R1Y3RfaWRzOiBbXVxuXHR9LFxuXHRjYXRlZ29yeUxvYWRpbmc6IGZhbHNlLFxuXHRwcm9kdWN0c0xvYWRpbmc6IGZhbHNlLFxuICBlcnJvcnM6IFtdXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGFmZkNhdGVnb3J5UmVkdWNlcjxUIGV4dGVuZHMgRGFmZkNhdGVnb3J5UmVxdWVzdCwgVSBleHRlbmRzIERhZmZHZW5lcmljQ2F0ZWdvcnk8VT4sIFYgZXh0ZW5kcyBEYWZmQ2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlPFQ+LCBXIGV4dGVuZHMgRGFmZlByb2R1Y3Q+XG5cdChzdGF0ZSA9IGluaXRpYWxTdGF0ZSwgYWN0aW9uOiBEYWZmQ2F0ZWdvcnlBY3Rpb25zPFQsIFUsIFYsIFc+KTogRGFmZkNhdGVnb3J5UmVkdWNlclN0YXRlPFQsIFY+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgRGFmZkNhdGVnb3J5QWN0aW9uVHlwZXMuQ2F0ZWdvcnlMb2FkQWN0aW9uOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG5cdFx0XHRcdGNhdGVnb3J5TG9hZGluZzogdHJ1ZSxcblx0XHRcdFx0cHJvZHVjdHNMb2FkaW5nOiB0cnVlLFxuICAgICAgfTtcblxuICAgIC8vIFRoaXMgcmVkdWNlciBtdXN0IGFzc3VtZSB0aGUgY2FsbCB3aWxsIGJlIHN1Y2Nlc3NmdWwsIGFuZCBpbW1lZGlhdGVseSBzZXQgdGhlIGFwcGxpZWQgZmlsdGVycyB0byBzdGF0ZSwgYmVjYXVzZSB0aGVcbiAgICAvLyBHZXRDYXRlZ29yeSBtYWdlbnRvIGNhbGwgZG9lc24ndCByZXR1cm4gY3VycmVudGx5IGFwcGxpZWQgZmlsdGVycy4gSWYgdGhlcmUgaXMgYSBidWcgd2hlcmUgdGhlIHdyb25nIGZpbHRlcnMgYXJlIHNvbWVob3dcbiAgICAvLyBhcHBsaWVkIGJ5IE1hZ2VudG8sIHRoZW4gdGhpcyB3aWxsIHJlc3VsdCBpbiBhIGJ1Zy4gVW50aWwgTWFnZW50byByZXR1cm5zIGFwcGxpZWQgZmlsdGVycyB3aXRoIGEgY2F0ZWdvcnkgY2FsbCwgdGhpcyBpc1xuICAgIC8vIHVuYXZvaWRhYmxlLlxuICAgIGNhc2UgRGFmZkNhdGVnb3J5QWN0aW9uVHlwZXMuQ2F0ZWdvcnlQYWdlTG9hZEFjdGlvbjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuXHRcdFx0XHRjYXRlZ29yeUxvYWRpbmc6IHRydWUsXG5cdFx0XHRcdHByb2R1Y3RzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG4gICAgICAgICAgLi4uc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLFxuICAgICAgICAgIC4uLmFjdGlvbi5yZXF1ZXN0XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0Y2FzZSBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcy5DaGFuZ2VDYXRlZ29yeVBhZ2VTaXplQWN0aW9uOlxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc3RhdGUsXG5cdFx0XHRcdHByb2R1Y3RzTG9hZGluZzogdHJ1ZSxcblx0XHRcdFx0Y2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG5cdFx0XHRcdFx0Li4uc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLFxuXHRcdFx0XHRcdHBhZ2Vfc2l6ZTogYWN0aW9uLnBhZ2VTaXplXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0Y2FzZSBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcy5DaGFuZ2VDYXRlZ29yeUN1cnJlbnRQYWdlQWN0aW9uOlxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc3RhdGUsXG5cdFx0XHRcdHByb2R1Y3RzTG9hZGluZzogdHJ1ZSxcblx0XHRcdFx0Y2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG5cdFx0XHRcdFx0Li4uc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLFxuXHRcdFx0XHRcdGN1cnJlbnRfcGFnZTogYWN0aW9uLmN1cnJlbnRQYWdlXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0Y2FzZSBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcy5DaGFuZ2VDYXRlZ29yeVNvcnRpbmdPcHRpb25BY3Rpb246XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5zdGF0ZSxcblx0XHRcdFx0cHJvZHVjdHNMb2FkaW5nOiB0cnVlLFxuXHRcdFx0XHRjYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGU6IHtcblx0XHRcdFx0XHQuLi5zdGF0ZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUsXG5cdFx0XHRcdFx0YXBwbGllZF9zb3J0X29wdGlvbjogYWN0aW9uLnNvcnQub3B0aW9uLFxuXHRcdFx0XHRcdGFwcGxpZWRfc29ydF9kaXJlY3Rpb246IGFjdGlvbi5zb3J0LmRpcmVjdGlvblxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdGNhc2UgRGFmZkNhdGVnb3J5QWN0aW9uVHlwZXMuQ2hhbmdlQ2F0ZWdvcnlGaWx0ZXJzQWN0aW9uOlxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc3RhdGUsXG5cdFx0XHRcdHByb2R1Y3RzTG9hZGluZzogdHJ1ZSxcblx0XHRcdFx0Y2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG5cdFx0XHRcdFx0Li4uc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLFxuXHRcdFx0XHRcdGZpbHRlcl9yZXF1ZXN0czogYWN0aW9uLmZpbHRlcnNcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRjYXNlIERhZmZDYXRlZ29yeUFjdGlvblR5cGVzLlRvZ2dsZUNhdGVnb3J5RmlsdGVyQWN0aW9uOlxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc3RhdGUsXG5cdFx0XHRcdHByb2R1Y3RzTG9hZGluZzogdHJ1ZSxcblx0XHRcdFx0Y2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlOiB7XG5cdFx0XHRcdFx0Li4uc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLFxuXHRcdFx0XHRcdGZpbHRlcl9yZXF1ZXN0czogdG9nZ2xlQ2F0ZWdvcnlGaWx0ZXIoYWN0aW9uLmZpbHRlciwgc3RhdGUuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLmZpbHRlcl9yZXF1ZXN0cylcblx0XHRcdFx0fVxuXHRcdFx0fVxuICAgIC8vIFRoaXMgcmVkdWNlciBjYW5ub3Qgc3ByZWFkIG92ZXIgc3RhdGUsIGJlY2F1c2UgdGhpcyB3b3VsZCB3aXBlIG91dCB0aGUgYXBwbGllZCBmaWx0ZXJzIG9uIHN0YXRlLiBBcHBsaWVkIGZpbHRlcnMgYXJlIG5vdFxuICAgIC8vIHNldCBoZXJlIGZvciByZWFzb25zIHN0YXRlZCBhYm92ZS5cblx0XHRjYXNlIERhZmZDYXRlZ29yeUFjdGlvblR5cGVzLkNhdGVnb3J5TG9hZFN1Y2Nlc3NBY3Rpb246XG5cdFx0Y2FzZSBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcy5DYXRlZ29yeVBhZ2VMb2FkU3VjY2Vzc0FjdGlvbjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuXHRcdFx0XHRjYXRlZ29yeUxvYWRpbmc6IGZhbHNlLFxuXHRcdFx0XHRwcm9kdWN0c0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBjYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGU6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUsXG4gICAgICAgICAgaWQ6IGFjdGlvbi5yZXNwb25zZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUuaWQsXG4gICAgICAgICAgY3VycmVudF9wYWdlOiBhY3Rpb24ucmVzcG9uc2UuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLmN1cnJlbnRfcGFnZSxcbiAgICAgICAgICBwYWdlX3NpemU6IGFjdGlvbi5yZXNwb25zZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUucGFnZV9zaXplLFxuICAgICAgICAgIGZpbHRlcnM6IGFjdGlvbi5yZXNwb25zZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUuZmlsdGVycyxcbiAgICAgICAgICBzb3J0X29wdGlvbnM6IGFjdGlvbi5yZXNwb25zZS5jYXRlZ29yeVBhZ2VDb25maWd1cmF0aW9uU3RhdGUuc29ydF9vcHRpb25zLFxuXHRcdFx0XHRcdHRvdGFsX3BhZ2VzOiBhY3Rpb24ucmVzcG9uc2UuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLnRvdGFsX3BhZ2VzLFxuXHRcdFx0XHRcdHRvdGFsX3Byb2R1Y3RzOiBhY3Rpb24ucmVzcG9uc2UuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLnRvdGFsX3Byb2R1Y3RzLFxuXHRcdFx0XHRcdHByb2R1Y3RfaWRzOiBhY3Rpb24ucmVzcG9uc2UuY2F0ZWdvcnlQYWdlQ29uZmlndXJhdGlvblN0YXRlLnByb2R1Y3RfaWRzXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSBEYWZmQ2F0ZWdvcnlBY3Rpb25UeXBlcy5DYXRlZ29yeUxvYWRGYWlsdXJlQWN0aW9uOlxuICAgIGNhc2UgRGFmZkNhdGVnb3J5QWN0aW9uVHlwZXMuQ2F0ZWdvcnlQYWdlTG9hZEZhaWx1cmVBY3Rpb246XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcblx0XHRcdFx0Y2F0ZWdvcnlMb2FkaW5nOiBmYWxzZSxcblx0XHRcdFx0cHJvZHVjdHNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3JzOiBbYWN0aW9uLmVycm9yTWVzc2FnZV1cbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuIl19