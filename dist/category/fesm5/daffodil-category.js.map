{"version":3,"file":"daffodil-category.js","sources":["ng://@daffodil/category/actions/category.actions.ts","ng://@daffodil/category/models/category-filter-base.ts","ng://@daffodil/category/reducers/category/toggle-filter/util.ts","ng://@daffodil/category/reducers/category/toggle-filter/equal.ts","ng://@daffodil/category/reducers/category/toggle-filter/range.ts","ng://@daffodil/category/reducers/category/toggle-filter/match.ts","ng://@daffodil/category/reducers/category/toggle-filter/core.ts","ng://@daffodil/category/reducers/category/category.reducer.ts","ng://@daffodil/category/reducers/category-entities/category-entities-adapter.ts","ng://@daffodil/category/reducers/category-entities/category-entities.reducer.ts","ng://@daffodil/category/reducers/category-reducers.ts","ng://@daffodil/category/drivers/injection-tokens/category-driver.token.ts","ng://@daffodil/category/models/requests/filter-request.ts","ng://@daffodil/category/helpers/validate-filters.ts","ng://@daffodil/category/effects/category.effects.ts","ng://@daffodil/category/resolvers/category-page/default-category-page-size.token.ts","ng://@daffodil/category/resolvers/category-page/category-page.resolver.ts","ng://@daffodil/category/selectors/category-feature.selector.ts","ng://@daffodil/category/selectors/applied-filter/applied-filter-methods.ts","ng://@daffodil/category/selectors/category-page/category-page.selector.ts","ng://@daffodil/category/selectors/category-entities/category-entities.selector.ts","ng://@daffodil/category/selectors/category.selector.ts","ng://@daffodil/category/effects/category-page.effects.ts","ng://@daffodil/category/category-state.module.ts","ng://@daffodil/category/category.module.ts","ng://@daffodil/category/facades/category.facade.ts","ng://@daffodil/category/drivers/magento/queries/get-category.ts","ng://@daffodil/category/drivers/magento/queries/get-products.ts","ng://@daffodil/category/drivers/magento/models/requests/filters.ts","ng://@daffodil/category/drivers/magento/transformers/applied-filter-transformer.service.ts","ng://@daffodil/category/drivers/magento/models/requests/sort.ts","ng://@daffodil/category/models/requests/category-request.ts","ng://@daffodil/category/drivers/magento/transformers/applied-sort-option-transformer.service.ts","ng://@daffodil/category/drivers/magento/transformers/pure/sort-default-option-first.ts","ng://@daffodil/category/drivers/magento/transformers/category-page-config-transformer.service.ts","ng://@daffodil/category/drivers/magento/transformers/category-transformer.service.ts","ng://@daffodil/category/drivers/magento/transformers/category-response-transform.service.ts","ng://@daffodil/category/drivers/magento/queries/get-category-aggregations.ts","ng://@daffodil/category/drivers/magento/queries/custom-attribute-metadata.ts","ng://@daffodil/category/drivers/magento/transformers/custom-metadata-attributes-methods.ts","ng://@daffodil/category/drivers/magento/category.service.ts","ng://@daffodil/category/drivers/magento/category-driver.module.ts","ng://@daffodil/category/models/category-applied-filter.ts"],"sourcesContent":["import { Action } from '@ngrx/store';\n\nimport { DaffProduct } from '@daffodil/product';\n\nimport { DaffGetCategoryResponse } from '../models/get-category-response';\nimport { DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryFilterRequest, DaffToggleCategoryFilterRequest } from '../models/requests/filter-request';\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { DaffCategory } from '../models/category';\n\nexport enum DaffCategoryActionTypes {\n  CategoryLoadAction = '[Daff-Category] Category Load Action',\n  CategoryLoadSuccessAction = '[Daff-Category] Category Load Success Action',\n  CategoryLoadFailureAction = '[Daff-Category] Category Load Failure Action',\n  CategoryPageLoadAction = '[Daff-Category] Category Page Load Action',\n  CategoryPageLoadSuccessAction = '[Daff-Category] Category Page Load Success Action',\n  CategoryPageLoadFailureAction = '[Daff-Category] Category Page Load Failure Action',\n  ChangeCategoryPageSizeAction = '[Daff-Category] Change Category Page Size Action',\n  ChangeCategoryCurrentPageAction = '[Daff-Category] Change Category Current Page Action',\n  ChangeCategorySortingOptionAction = '[Daff-Category] Change Category Sorting Option Action',\n\tChangeCategoryFiltersAction = '[Daff-Category] Change Category Filters Action',\n\tToggleCategoryFilterAction = '[Daff-Category] Toggle Category Filter Action'\n}\n\n/**\n * An action triggered to initialize a category load request.\n *\n * @param request - DaffCategoryRequest object\n */\nexport class DaffCategoryLoad<T extends DaffCategoryRequest = DaffCategoryRequest> implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryLoadAction;\n\n  constructor(public request: T) { }\n}\n\n/**\n * An action triggered upon a successful category request.\n *\n * @param response - DaffGetCategoryResponse object\n */\nexport class DaffCategoryLoadSuccess<\n\tT extends DaffCategoryRequest = DaffCategoryRequest,\n\tV extends DaffGenericCategory<V> = DaffCategory,\n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n> implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryLoadSuccessAction;\n\n  constructor(public response: DaffGetCategoryResponse<T, V, U, W>) { }\n}\n\n/**\n * An action triggered upon a failed category request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffCategoryLoadFailure implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryLoadFailureAction;\n\n  constructor(public errorMessage: string) { }\n}\n\n/**\n * An action triggered to initialize a category page load request.\n * This is intended to be used for loading full category pages.\n *\n * @param request - DaffCategoryRequest object\n */\nexport class DaffCategoryPageLoad<T extends DaffCategoryRequest = DaffCategoryRequest> implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryPageLoadAction;\n\n  constructor(public request: T) { }\n}\n\n/**\n * An action triggered upon a successful category page request.\n *\n * @param response - DaffGetCategoryResponse object\n */\nexport class DaffCategoryPageLoadSuccess<\n\tT extends DaffCategoryRequest = DaffCategoryRequest,\n\tV extends DaffGenericCategory<V> = DaffCategory,\n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n> implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryPageLoadSuccessAction;\n\n  constructor(public response: DaffGetCategoryResponse<T, V, U, W>) { }\n}\n\n/**\n * An action triggered upon a failed category page request.\n *\n * @param errorMessage - an error message\n */\nexport class DaffCategoryPageLoadFailure implements Action {\n  readonly type = DaffCategoryActionTypes.CategoryPageLoadFailureAction;\n\n  constructor(public errorMessage: string) { }\n}\n\n/**\n * An action for changing the number of products shown on each page for the selected category.\n *\n * @param pageSize - The number of products per page.\n */\nexport class DaffChangeCategoryPageSize implements Action {\n  readonly type = DaffCategoryActionTypes.ChangeCategoryPageSizeAction;\n\n  constructor(public pageSize: number) { }\n}\n\n/**\n * An action for changing the current page of products for the selected category.\n *\n * @param currentPage - The current page of products for the selected category.\n */\nexport class DaffChangeCategoryCurrentPage implements Action {\n  readonly type = DaffCategoryActionTypes.ChangeCategoryCurrentPageAction;\n\n  constructor(public currentPage: number) { }\n}\n\n/**\n * An action for changing the sorting option for the selected category.\n *\n * @param sort - The sort option to be applied.\n */\nexport class DaffChangeCategorySortingOption implements Action {\n  readonly type = DaffCategoryActionTypes.ChangeCategorySortingOptionAction;\n\n  constructor(\n\t\tpublic sort: {\n\t\t\toption: DaffCategoryRequest['applied_sort_option'],\n\t\t\tdirection: DaffCategoryRequest['applied_sort_direction']\n\t\t}\n\t) { }\n}\n\n/**\n * An action for changing the filters for the selected category.\n *\n * @param filters - Filters to be applied to the selected category.\n */\nexport class DaffChangeCategoryFilters implements Action {\n  readonly type = DaffCategoryActionTypes.ChangeCategoryFiltersAction;\n\n  constructor(public filters: DaffCategoryFilterRequest[]) { }\n}\n\n/**\n * An action for toggling a filters for the selected category.\n *\n * @param filter - Filter to be toggle on the selected category.\n */\nexport class DaffToggleCategoryFilter implements Action {\n  readonly type = DaffCategoryActionTypes.ToggleCategoryFilterAction;\n\n  constructor(public filter: DaffToggleCategoryFilterRequest) { }\n}\n\nexport type DaffCategoryActions<\n\tT extends DaffCategoryRequest = DaffCategoryRequest,\n\tU extends DaffGenericCategory<U> = DaffCategory,\n\tV extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n> =\n  | DaffCategoryLoad<T>\n  | DaffCategoryLoadSuccess<T, U, V, W>\n  | DaffCategoryLoadFailure\n  | DaffCategoryPageLoad<T>\n  | DaffCategoryPageLoadSuccess<T, U, V, W>\n  | DaffCategoryPageLoadFailure\n\t| DaffChangeCategoryPageSize\n\t| DaffChangeCategoryCurrentPage\n  | DaffChangeCategorySortingOption\n  | DaffChangeCategoryFilters\n  | DaffToggleCategoryFilter;\n","export enum DaffCategoryFilterType {\n\tMatch = 'match',\n\tEqual = 'equal',\n\tRange = 'range'\n}\n\nexport interface DaffCategoryFilterBase {\n\tlabel: string;\n\tname: string;\n\ttype: DaffCategoryFilterType;\n}\n","import { DaffToggleCategoryFilterRequest, DaffCategoryFilterRequest, DaffCategoryFilterEqualRequest } from '../../../models/requests/filter-request';\n\nexport function getAppliedFilterByName(name: string, appliedFilters: DaffCategoryFilterRequest[]): DaffCategoryFilterRequest {\n\treturn appliedFilters.filter(filter => filter.name === name).shift();\n}\n\nexport function toggledFilterNameExists(toggledFilter: DaffToggleCategoryFilterRequest, appliedFilters: DaffCategoryFilterRequest[]): boolean {\n\treturn appliedFilters && !!appliedFilters.find(filter => filter.name === toggledFilter.name)\n}\n\nexport function addToExistingFilter(toggledFilter: DaffToggleCategoryFilterRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn appliedFilters.map(filter => {\n\t\tif(filter.name === toggledFilter.name) {\n\t\t\t(<DaffCategoryFilterEqualRequest>filter).value.push(toggledFilter.value)\n\t\t}\n\n\t\treturn filter;\n\t});\n}\n","import { DaffToggleCategoryFilterEqualRequest, DaffCategoryFilterRequest, DaffCategoryFilterEqualRequest } from '../../../models/requests/filter-request';\nimport { getAppliedFilterByName, toggledFilterNameExists, addToExistingFilter } from './util';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\n\nexport function isEqualFilterApplied(toggledFilter: DaffToggleCategoryFilterEqualRequest, appliedFilters: DaffCategoryFilterRequest[]): boolean {\n\tconst filterMatchingName = <DaffCategoryFilterEqualRequest>getAppliedFilterByName(toggledFilter.name, appliedFilters);\n\tif(filterMatchingName) {\n\t\treturn !!filterMatchingName.value.filter(filterValue => filterValue === toggledFilter.value).length;\n\t} else return false;\n}\n\nexport function removeEqualFilter(toggledFilter: DaffToggleCategoryFilterEqualRequest, appliedFilters: DaffCategoryFilterRequest[]): DaffCategoryFilterRequest[] {\n\treturn appliedFilters.map(appliedFilter => {\n\t\tif(appliedFilter.name === toggledFilter.name) {\n\t\t\tappliedFilter.value = (<DaffCategoryFilterEqualRequest>appliedFilter).value.filter(value => value !== toggledFilter.value);\n\t\t}\n\t\treturn appliedFilter;\n\t}).filter(filter => filter.type === DaffCategoryFilterType.Match || filter.value.length !== 0)\n}\n\nexport function addEqualFilter(toggledFilter: DaffToggleCategoryFilterEqualRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn toggledFilterNameExists(toggledFilter, appliedFilters) ?\n\t\taddToExistingFilter(toggledFilter, appliedFilters) :\n\t\taddNewEqualFilter(toggledFilter, appliedFilters);\n}\n\nexport function addNewEqualFilter(toggledFilter: DaffToggleCategoryFilterEqualRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn appliedFilters.concat([{\n\t\tname: toggledFilter.name,\n\t\tvalue: [toggledFilter.value],\n\t\ttype: DaffCategoryFilterType.Equal\n\t}]);\n}\n","import { DaffToggleCategoryFilterRangeRequest, DaffCategoryFilterRequest, DaffCategoryFilterRangeRequest } from '../../../models/requests/filter-request';\nimport { getAppliedFilterByName, toggledFilterNameExists, addToExistingFilter } from './util';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\n\nexport function isRangeFilterApplied(toggledFilter: DaffToggleCategoryFilterRangeRequest, appliedFilters: DaffCategoryFilterRequest[]): boolean {\n\tconst filterMatchingName = <DaffCategoryFilterRangeRequest>getAppliedFilterByName(toggledFilter.name, appliedFilters);\n\tif(filterMatchingName) {\n\t\treturn !!filterMatchingName.value.filter(filterValue => filterValue === toggledFilter.value).length;\n\t} else return false;\n}\n\nexport function removeRangeFilter(toggledFilter: DaffToggleCategoryFilterRangeRequest, appliedFilters: DaffCategoryFilterRequest[]): DaffCategoryFilterRequest[] {\n\treturn appliedFilters.map(appliedFilter => {\n\t\tif(appliedFilter.name === toggledFilter.name) {\n\t\t\tappliedFilter.value = (<DaffCategoryFilterRangeRequest>appliedFilter).value.filter(value => value !== toggledFilter.value);\n\t\t}\n\t\treturn appliedFilter;\n\t}).filter(filter => filter.type === DaffCategoryFilterType.Match || filter.value.length !== 0)\n}\n\nexport function addRangeFilter(toggledFilter: DaffToggleCategoryFilterRangeRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn toggledFilterNameExists(toggledFilter, appliedFilters) ?\n\t\taddToExistingFilter(toggledFilter, appliedFilters) :\n\t\taddNewRangeFilter(toggledFilter, appliedFilters);\n}\n\nexport function addNewRangeFilter(toggledFilter: DaffToggleCategoryFilterRangeRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn appliedFilters.concat([{\n\t\tname: toggledFilter.name,\n\t\tvalue: [toggledFilter.value],\n\t\ttype: DaffCategoryFilterType.Range\n\t}]);\n}\n","import { DaffToggleCategoryFilterMatchRequest, DaffCategoryFilterRequest } from '../../../models/requests/filter-request';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\nimport { getAppliedFilterByName } from './util';\n\nexport function isMatchFilterApplied(toggledFilter: DaffToggleCategoryFilterMatchRequest, appliedFilters: DaffCategoryFilterRequest[]): boolean {\n\treturn !!getAppliedFilterByName(toggledFilter.name, appliedFilters);\n}\n\nexport function removeMatchFilter(filterName: DaffToggleCategoryFilterMatchRequest, appliedFilters: DaffCategoryFilterRequest[]): DaffCategoryFilterRequest[] {\n\treturn appliedFilters.filter(filter => filter.name !== filterName.name)\n}\n\nexport function addMatchFilter(toggledFilter: DaffToggleCategoryFilterMatchRequest, appliedFilters: DaffCategoryFilterRequest[])\n: DaffCategoryFilterRequest[] {\n\treturn appliedFilters.concat([{\n\t\tname: toggledFilter.name,\n\t\tvalue: toggledFilter.value,\n\t\ttype: DaffCategoryFilterType.Match\n\t}]);\n}\n","import { DaffToggleCategoryFilterRequest, DaffCategoryFilterRequest } from '../../../models/requests/filter-request';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\nimport { isEqualFilterApplied, removeEqualFilter, addEqualFilter } from './equal';\nimport { isRangeFilterApplied, removeRangeFilter, addRangeFilter } from './range';\nimport { isMatchFilterApplied, removeMatchFilter, addMatchFilter } from './match';\n\nexport function toggleCategoryFilter(\n\ttoggledFilter: DaffToggleCategoryFilterRequest, \n\tappliedFilters: DaffCategoryFilterRequest[]\n): DaffCategoryFilterRequest[] {\n\treturn isFilterApplied(toggledFilter, appliedFilters)\n\t\t? removeFilter(toggledFilter, appliedFilters)\n\t\t: addFilter(toggledFilter, appliedFilters)\n}\n\nexport function isFilterApplied(toggledFilter: DaffToggleCategoryFilterRequest, appliedFilters: DaffCategoryFilterRequest[]): boolean {\n\tswitch(toggledFilter.type) {\n\t\tcase(DaffCategoryFilterType.Equal) :\n\t\t\treturn isEqualFilterApplied(toggledFilter, appliedFilters);\n\t\tcase(DaffCategoryFilterType.Range) :\n\t\t\treturn isRangeFilterApplied(toggledFilter, appliedFilters);\n\t\tdefault :\n\t\t\treturn isMatchFilterApplied(toggledFilter, appliedFilters);\n\t}\n}\n\nexport function removeFilter(toggledFilter: DaffToggleCategoryFilterRequest, appliedFilters: DaffCategoryFilterRequest[])\n\t: DaffCategoryFilterRequest[] {\n\tswitch(toggledFilter.type) {\n\t\tcase(DaffCategoryFilterType.Equal) :\n\t\t\treturn removeEqualFilter(toggledFilter, appliedFilters);\n\t\tcase(DaffCategoryFilterType.Range) :\n\t\t\treturn removeRangeFilter(toggledFilter, appliedFilters);\n\t\tdefault :\n\t\t\treturn removeMatchFilter(toggledFilter, appliedFilters);\n\t}\n}\n\nexport function addFilter(toggledFilter: DaffToggleCategoryFilterRequest, appliedFilters: DaffCategoryFilterRequest[])\n\t: DaffCategoryFilterRequest[] {\n\tswitch(toggledFilter.type) {\n\t\tcase(DaffCategoryFilterType.Equal) :\n\t\t\treturn addEqualFilter(toggledFilter, appliedFilters);\n\t\tcase(DaffCategoryFilterType.Range) :\n\t\t\treturn addRangeFilter(toggledFilter, appliedFilters);\n\t\tdefault :\n\t\t\treturn addMatchFilter(toggledFilter, appliedFilters);\n\t}\n}\n","import { DaffProduct } from '@daffodil/product';\n\nimport { DaffCategoryActionTypes, DaffCategoryActions } from '../../actions/category.actions';\nimport { DaffCategoryReducerState } from './category-reducer-state.interface';\nimport { toggleCategoryFilter } from './toggle-filter/core';\nimport { DaffCategoryRequest } from '../../models/requests/category-request';\nimport { DaffCategoryPageConfigurationState } from '../../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../../models/generic-category';\n\nconst initialState: DaffCategoryReducerState<any, any> = {\n\tcategoryPageConfigurationState: {\n    id: null,\n\t\tfilter_requests: [],\n    applied_sort_option: null,\n    applied_sort_direction: null,\n    current_page: null,\n    page_size: null,\n    total_pages: null,\n    filters: [],\n\t\tsort_options: [],\n\t\ttotal_products: null,\n\t\tproduct_ids: []\n\t},\n\tcategoryLoading: false,\n\tproductsLoading: false,\n  errors: []\n};\n\nexport function daffCategoryReducer<T extends DaffCategoryRequest, U extends DaffGenericCategory<U>, V extends DaffCategoryPageConfigurationState<T>, W extends DaffProduct>\n\t(state = initialState, action: DaffCategoryActions<T, U, V, W>): DaffCategoryReducerState<T, V> {\n  switch (action.type) {\n    case DaffCategoryActionTypes.CategoryLoadAction:\n      return {\n        ...state,\n\t\t\t\tcategoryLoading: true,\n\t\t\t\tproductsLoading: true,\n      };\n\n    // This reducer must assume the call will be successful, and immediately set the applied filters to state, because the\n    // GetCategory magento call doesn't return currently applied filters. If there is a bug where the wrong filters are somehow\n    // applied by Magento, then this will result in a bug. Until Magento returns applied filters with a category call, this is\n    // unavoidable.\n    case DaffCategoryActionTypes.CategoryPageLoadAction:\n      return {\n        ...state,\n\t\t\t\tcategoryLoading: true,\n\t\t\t\tproductsLoading: true,\n        categoryPageConfigurationState: {\n          ...state.categoryPageConfigurationState,\n          ...action.request\n\t\t\t\t}\n\t\t\t};\n\t\tcase DaffCategoryActionTypes.ChangeCategoryPageSizeAction:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproductsLoading: true,\n\t\t\t\tcategoryPageConfigurationState: {\n\t\t\t\t\t...state.categoryPageConfigurationState,\n\t\t\t\t\tpage_size: action.pageSize\n\t\t\t\t}\n\t\t\t};\n\t\tcase DaffCategoryActionTypes.ChangeCategoryCurrentPageAction:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproductsLoading: true,\n\t\t\t\tcategoryPageConfigurationState: {\n\t\t\t\t\t...state.categoryPageConfigurationState,\n\t\t\t\t\tcurrent_page: action.currentPage\n\t\t\t\t}\n\t\t\t};\n\t\tcase DaffCategoryActionTypes.ChangeCategorySortingOptionAction:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproductsLoading: true,\n\t\t\t\tcategoryPageConfigurationState: {\n\t\t\t\t\t...state.categoryPageConfigurationState,\n\t\t\t\t\tapplied_sort_option: action.sort.option,\n\t\t\t\t\tapplied_sort_direction: action.sort.direction\n\t\t\t\t}\n\t\t\t};\n\t\tcase DaffCategoryActionTypes.ChangeCategoryFiltersAction:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproductsLoading: true,\n\t\t\t\tcategoryPageConfigurationState: {\n\t\t\t\t\t...state.categoryPageConfigurationState,\n\t\t\t\t\tfilter_requests: action.filters\n\t\t\t\t}\n\t\t\t};\n\t\tcase DaffCategoryActionTypes.ToggleCategoryFilterAction:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproductsLoading: true,\n\t\t\t\tcategoryPageConfigurationState: {\n\t\t\t\t\t...state.categoryPageConfigurationState,\n\t\t\t\t\tfilter_requests: toggleCategoryFilter(action.filter, state.categoryPageConfigurationState.filter_requests)\n\t\t\t\t}\n\t\t\t}\n    // This reducer cannot spread over state, because this would wipe out the applied filters on state. Applied filters are not\n    // set here for reasons stated above.\n\t\tcase DaffCategoryActionTypes.CategoryLoadSuccessAction:\n\t\tcase DaffCategoryActionTypes.CategoryPageLoadSuccessAction:\n      return {\n        ...state,\n\t\t\t\tcategoryLoading: false,\n\t\t\t\tproductsLoading: false,\n        categoryPageConfigurationState: {\n          ...state.categoryPageConfigurationState,\n          id: action.response.categoryPageConfigurationState.id,\n          current_page: action.response.categoryPageConfigurationState.current_page,\n          page_size: action.response.categoryPageConfigurationState.page_size,\n          filters: action.response.categoryPageConfigurationState.filters,\n          sort_options: action.response.categoryPageConfigurationState.sort_options,\n\t\t\t\t\ttotal_pages: action.response.categoryPageConfigurationState.total_pages,\n\t\t\t\t\ttotal_products: action.response.categoryPageConfigurationState.total_products,\n\t\t\t\t\tproduct_ids: action.response.categoryPageConfigurationState.product_ids\n        }\n      };\n    case DaffCategoryActionTypes.CategoryLoadFailureAction:\n    case DaffCategoryActionTypes.CategoryPageLoadFailureAction:\n      return {\n        ...state,\n\t\t\t\tcategoryLoading: false,\n\t\t\t\tproductsLoading: false,\n        errors: [action.errorMessage]\n      };\n    default:\n      return state;\n  }\n}\n","import { EntityAdapter, createEntityAdapter } from '@ngrx/entity';\nimport { DaffGenericCategory } from '../../models/generic-category';\nimport { DaffCategory } from '../../models/category';\n\nexport function daffCategoryEntitiesAdapter<T extends DaffGenericCategory<T> = DaffCategory>(): EntityAdapter<T> {\n\treturn createEntityAdapter<T>();\n} ","import { EntityState } from '@ngrx/entity';\n\nimport { DaffProduct } from '@daffodil/product';\n\nimport { daffCategoryEntitiesAdapter } from './category-entities-adapter';\nimport { DaffCategoryActionTypes, DaffCategoryActions } from '../../actions/category.actions';\nimport { DaffCategoryRequest } from '../../models/requests/category-request';\nimport { DaffCategoryPageConfigurationState } from '../../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../../models/generic-category';\nimport { DaffCategory } from '../../models/category';\n\nexport function daffCategoryEntitiesReducer<\n\tT extends DaffCategoryRequest = DaffCategoryRequest,\n\tV extends DaffGenericCategory<V> = DaffCategory,\n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n>(\n  state = daffCategoryEntitiesAdapter<V>().getInitialState(),\n\taction: DaffCategoryActions<T, V, U, W>\n): EntityState<V> {\n  switch (action.type) {\n    case DaffCategoryActionTypes.CategoryLoadSuccessAction:\n    case DaffCategoryActionTypes.CategoryPageLoadSuccessAction:\n      return daffCategoryEntitiesAdapter<V>().upsertOne(\n        {\n          id: action.response.category.id,\n          ...action.response.category\n        },\n        state\n      );\n    default:\n      return state;\n  }\n}\n","import { daffCategoryReducer } from './category/category.reducer';\nimport { daffCategoryEntitiesReducer } from './category-entities/category-entities.reducer';\n\nexport const daffCategoryReducers = {\n\tcategory: daffCategoryReducer,\n\tcategoryEntities: daffCategoryEntitiesReducer\n};\n","import { InjectionToken } from '@angular/core';\n\nexport const DaffCategoryDriver = new InjectionToken('DaffCategoryDriver');\n","import { DaffCategoryFilterType } from '../category-filter-base';\n\n/**\n * The separator between a range type filter's values\n * e.g. \"price\": \"30-40\"\n */\nexport const DaffCategoryFromToFilterSeparator = '-';\n\nexport interface DaffToggleCategoryFilterMatchRequest {\n\ttype: DaffCategoryFilterType.Match;\n\tname: string;\n\tvalue: string;\n}\n\nexport interface DaffToggleCategoryFilterEqualRequest {\n\ttype: DaffCategoryFilterType.Equal;\n\tname: string;\n\tvalue: string;\n}\n\nexport interface DaffToggleCategoryFilterRangeRequest {\n\ttype: DaffCategoryFilterType.Range;\n\tname: string;\n\tvalue: string;\n}\n\nexport interface DaffCategoryFilterEqualRequest {\n\ttype: DaffCategoryFilterType.Equal;\n\tname: string;\n\tvalue: string[];\n}\n\nexport interface DaffCategoryFilterMatchRequest {\n\ttype: DaffCategoryFilterType.Match;\n\tname: string;\n\tvalue: string;\n}\n\nexport interface DaffCategoryFilterRangeRequest {\n\ttype: DaffCategoryFilterType.Range;\n\tname: string;\n\tvalue: string[];\n}\n\nexport type DaffToggleCategoryFilterRequest =\n\tDaffToggleCategoryFilterMatchRequest |\n\tDaffToggleCategoryFilterEqualRequest |\n\tDaffToggleCategoryFilterRangeRequest;\n\nexport type DaffCategoryFilterRequest =\n\tDaffCategoryFilterMatchRequest |\n\tDaffCategoryFilterEqualRequest |\n\tDaffCategoryFilterRangeRequest;\n","import { DaffCategoryFilterType } from '../models/category-filter-base';\nimport { DaffCategoryFilterRequest, DaffCategoryFromToFilterSeparator } from '../models/requests/filter-request';\n\nexport function daffCategoryValidateFilters(filters: DaffCategoryFilterRequest[]): void {\n  if(!filters) return;\n  filters.forEach((filter, i) => {\n    if(filter.type === DaffCategoryFilterType.Range &&\n      filter.value[0].split(DaffCategoryFromToFilterSeparator).length !== 2) {\n      throw new Error('Category range filter is in an invalid format. Should be **-**');\n    }\n\n    for(let j=i+1; j < filters.length; j++) {\n      if(filters[i].name === filters[j].name) {\n        throw new Error('More than one category filter of the same name exists. These should' +\n          ' be combined into a single filter action with multiple values.')\n      }\n    }\n  })\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, catchError } from 'rxjs/operators';\nimport { of, Observable } from 'rxjs';\n\nimport { DaffProductGridLoadSuccess, DaffProduct } from '@daffodil/product';\n\nimport {\n  DaffCategoryActionTypes,\n  DaffCategoryLoad,\n  DaffCategoryLoadSuccess,\n  DaffCategoryLoadFailure,\n} from '../actions/category.actions';\nimport { DaffCategoryDriver } from '../drivers/injection-tokens/category-driver.token';\nimport { DaffCategoryServiceInterface } from '../drivers/interfaces/category-service.interface';\nimport { DaffGetCategoryResponse } from '../models/get-category-response';\nimport { DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { daffCategoryValidateFilters } from '../helpers/public_api';\n\n@Injectable()\nexport class DaffCategoryEffects<\n\tT extends DaffCategoryRequest,\n\tV extends DaffGenericCategory<V>,\n\tU extends DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct\n> {\n\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffCategoryDriver) private driver: DaffCategoryServiceInterface<T, V, U, W>,\n\t) {}\n\n  @Effect()\n  loadCategory$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.CategoryLoadAction),\n    switchMap((action: DaffCategoryLoad<T>) => {\n\t\t\tdaffCategoryValidateFilters(action.request.filter_requests);\n      return this.driver.get(action.request).pipe(\n        switchMap((resp: DaffGetCategoryResponse<T, V, U, W>) => of(\n          new DaffProductGridLoadSuccess(resp.products),\n          new DaffCategoryLoadSuccess(resp)\n        )),\n        catchError(error => of(new DaffCategoryLoadFailure('Failed to load the category')))\n      )\n    })\n  )\n}\n","import { InjectionToken } from '@angular/core';\n\n/**\n * A token to define the default category page size on a category page load. This value is 12 by default.\n */\nexport const DaffDefaultCategoryPageSize = new InjectionToken<number>('DaffDefaultCategoryPageSize');\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core'\nimport { ActivatedRouteSnapshot, Resolve } from '@angular/router'\nimport { ofType } from '@ngrx/effects';\nimport { ActionsSubject, Store } from '@ngrx/store';\nimport { Observable, of } from 'rxjs'\nimport { mapTo, take } from 'rxjs/operators';\n\nimport { DaffCategoryActionTypes, DaffCategoryPageLoad } from '../../actions/category.actions';\nimport { DaffCategoryReducersState } from '../../reducers/category-reducers.interface';\nimport { DaffDefaultCategoryPageSize } from './default-category-page-size.token';\n\n/**\n * Resolves category data for category pages, and will only resolve the url after a category request succeeds or fails. This resolver expects a url\n * of the form `some/url/{id}` where `{id}` is the category id.\n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DaffCategoryPageResolver implements Resolve<Observable<boolean>> {\n  constructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\t@Inject(DaffDefaultCategoryPageSize) private defaultCategoryPageSize: number,\n    private store: Store<DaffCategoryReducersState>,\n    private dispatcher: ActionsSubject,\n\t) {}\n\t\n\tresolve(route: ActivatedRouteSnapshot): Observable<boolean> {\n\t\tthis.store.dispatch(new DaffCategoryPageLoad({\n      id: route.paramMap.get('id'), page_size: this.defaultCategoryPageSize\n\t\t}));\n\n\t\treturn isPlatformBrowser(this.platformId) ? of(true) : this.dispatcher.pipe(\n\t\t\tofType(DaffCategoryActionTypes.CategoryPageLoadSuccessAction, DaffCategoryActionTypes.CategoryPageLoadFailureAction),\n\t\t\tmapTo(true),\n\t\t\ttake(1)\n\t\t);\n\t}\n}\n","import { createFeatureSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryReducersState } from '../reducers/category-reducers.interface';\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffCategory } from '../models/category';\n\nexport interface DaffCategoryFeatureMemoizedSelectors<\n\tT extends DaffCategoryRequest = DaffCategoryRequest, \n\tV extends DaffGenericCategory<V> = DaffCategory, \n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>\n> {\n\tselectCategoryFeatureState: MemoizedSelector<object, DaffCategoryReducersState<T, V, U>>;\n}\n\nexport const getDaffCategoryFeatureSelector = (() => {\n\tlet cache;\n\treturn <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>>(): DaffCategoryFeatureMemoizedSelectors<T, V, U> => cache = cache \n\t\t? cache \n\t\t: { selectCategoryFeatureState: createFeatureSelector<DaffCategoryReducersState<T, V, U>>('category') };\n})();\n","import { DaffCategoryFilterOption, DaffCategoryFilter } from '../../models/category-filter';\nimport { DaffCategoryAppliedFilterOption, DaffCategoryAppliedFilter } from '../../models/category-applied-filter';\nimport { DaffCategoryFilterRangeRequest, DaffCategoryFilterMatchRequest, DaffCategoryFilterEqualRequest, DaffCategoryFilterRequest } from '../../models/requests/filter-request';\nimport { DaffCategoryFilterType } from '../../models/category-filter-base';\n\nexport function buildAppliedFilter(filter: DaffCategoryFilter, request: DaffCategoryFilterRequest): DaffCategoryAppliedFilter {\n\treturn {\n\t\tname: request.name,\n\t\ttype: request.type,\n\t\tlabel: filter.label,\n\t\toptions: buildAppliedFilterOptions(filter.options, request)\n\t}\n}\n\nfunction buildAppliedFilterOptions(filterOptions: DaffCategoryFilterOption[], filterRequest: DaffCategoryFilterRequest): DaffCategoryAppliedFilterOption[] {\n\tswitch(filterRequest.type) {\n\t\tcase(DaffCategoryFilterType.Equal) :\n\t\t\treturn buildAppliedFilterOptionsFromEqualRequest(filterOptions, filterRequest);\n\t\tcase(DaffCategoryFilterType.Range) :\n\t\t\treturn buildAppliedFilterOptionsFromRangeRequest(filterOptions, filterRequest);\n\t\tcase(DaffCategoryFilterType.Match) :\n\t\t\treturn buildAppliedFilterOptionsFromMatchRequest(filterOptions, filterRequest);\n\t}\n}\n\nfunction buildAppliedFilterOptionsFromEqualRequest(\n\tfilterOptions: DaffCategoryFilterOption[], filterRequest: DaffCategoryFilterEqualRequest\n): DaffCategoryAppliedFilterOption[] {\n\treturn filterOptions\n\t\t.filter(option => filterRequest.value.indexOf(option.value) > -1)\n\t\t.map(option => {\n\t\t\treturn {\n\t\t\t\tvalue: option.value,\n\t\t\t\tlabel: option.label\n\t\t\t}\n\t\t})\n}\n\nfunction buildAppliedFilterOptionsFromRangeRequest(\n\tfilterOptions: DaffCategoryFilterOption[], filterRequest: DaffCategoryFilterRangeRequest\n): DaffCategoryAppliedFilterOption[] {\n\treturn filterOptions\n\t.filter(option => filterRequest.value.indexOf(option.value) > -1)\n\t.map(option => {\n\t\treturn {\n\t\t\tvalue: option.value,\n\t\t\tlabel: option.label\n\t\t}\n\t})\n}\n\nfunction buildAppliedFilterOptionsFromMatchRequest(\n\tfilterOptions: DaffCategoryFilterOption[], filterRequest: DaffCategoryFilterMatchRequest\n): DaffCategoryAppliedFilterOption[] {\n\treturn filterOptions\n\t.filter(option => filterRequest.value === option.value)\n\t.map(option => {\n\t\treturn {\n\t\t\tvalue: option.value,\n\t\t\tlabel: option.label\n\t\t}\n\t})\n}\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\n\nimport { DaffCategoryRequest } from '../../models/requests/category-request';\nimport { DaffGenericCategory } from '../../models/generic-category';\nimport { DaffCategoryPageConfigurationState } from '../../models/category-page-configuration-state';\nimport { DaffCategoryReducerState } from '../../reducers/category/category-reducer-state.interface';\nimport { DaffCategoryAppliedFilter } from '../../models/category-applied-filter';\nimport { DaffCategoryReducersState } from '../../reducers/category-reducers.interface';\nimport { getDaffCategoryFeatureSelector } from '../category-feature.selector';\nimport { DaffCategoryFilterRequest } from '../../models/requests/filter-request';\nimport { DaffCategoryFilter } from '../../models/category-filter';\nimport { buildAppliedFilter } from '../applied-filter/applied-filter-methods';\nimport { DaffCategory } from '../../models/category';\n\nexport interface DaffCategoryPageMemoizedSelectors<\n\tT extends DaffCategoryRequest = DaffCategoryRequest, \n\tV extends DaffGenericCategory<V> = DaffCategory, \n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>\n> {\n\tselectCategoryState: MemoizedSelector<object, DaffCategoryReducerState<T, U>>;\n\tselectCategoryPageConfigurationState: MemoizedSelector<object, U>;\n\tselectCategoryCurrentPage: MemoizedSelector<object, U['current_page']>;\n\tselectCategoryTotalPages: MemoizedSelector<object, U['total_pages']>;\n\tselectCategoryPageSize: MemoizedSelector<object, U['page_size']>;\n\tselectCategoryFilters: MemoizedSelector<object, U['filters']>;\n\tselectCategorySortOptions: MemoizedSelector<object, U['sort_options']>;\n\tselectCategoryPageProductIds: MemoizedSelector<object, U['product_ids']>;\n\tselectIsCategoryPageEmpty: MemoizedSelector<object, boolean>;\n\tselectCategoryPageTotalProducts: MemoizedSelector<object, U['total_products']>;\n\tselectCategoryPageFilterRequests: MemoizedSelector<object, U['filter_requests']>;\n\tselectCategoryPageAppliedFilters: MemoizedSelector<object, DaffCategoryAppliedFilter[]>;\n\tselectCategoryPageAppliedSortOption: MemoizedSelector<object, U['applied_sort_option']>;\n\tselectCategoryPageAppliedSortDirection: MemoizedSelector<object, U['applied_sort_direction']>;\n\tselectSelectedCategoryId: MemoizedSelector<object, U['id']>;\n\tselectCategoryLoading: MemoizedSelector<object, boolean>;\n\tselectCategoryProductsLoading: MemoizedSelector<object, boolean>;\n\tselectCategoryErrors: MemoizedSelector<object, string[]>;\n}\n\nconst createCategoryPageSelectors = <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>>(): DaffCategoryPageMemoizedSelectors<T, V, U> => {\n\tconst selectCategoryFeatureState = getDaffCategoryFeatureSelector<T, V, U>().selectCategoryFeatureState;\n\n\t/**\n\t * Category State\n\t */\n\tconst selectCategoryState = createSelector(\n\t\tselectCategoryFeatureState,\n\t\t(state: DaffCategoryReducersState<T, V, U>) => state.category\n\t);\n\n\t/**\n\t * CategoryPageConfigurationState State\n\t */\n\tconst selectCategoryPageConfigurationState = createSelector(\n\t\tselectCategoryState,\n\t\t(state: DaffCategoryReducerState<T, U>) => state.categoryPageConfigurationState\n\t);\n\n\tconst selectCategoryCurrentPage = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.current_page\n\t);\n\n\tconst selectCategoryTotalPages = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.total_pages\n\t);\n\n\tconst selectCategoryPageSize = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.page_size\n\t);\n\n\tconst selectCategoryFilters = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.filters\n\t);\n\n\tconst selectCategorySortOptions = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.sort_options\n\t);\n\n\tconst selectCategoryPageProductIds = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.product_ids\n\t);\n\n\tconst selectIsCategoryPageEmpty = createSelector(\n\t\tselectCategoryPageProductIds,\n\t\t(state: V['product_ids']) => !state.length\n\t);\n\n\tconst selectCategoryPageTotalProducts = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.total_products\n\t);\n\n\tconst selectCategoryPageFilterRequests = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.filter_requests\n\t);\n\n\tconst selectCategoryPageAppliedFilters = createSelector(\n\t\tselectCategoryPageFilterRequests,\n\t\tselectCategoryFilters,\n\t\t(filterRequests: DaffCategoryFilterRequest[], availableFilters: DaffCategoryFilter[]): DaffCategoryAppliedFilter[] => {\n\t\t\tif(!availableFilters.length) return [];\n\t\t\treturn filterRequests.map(request => \n\t\t\t\tavailableFilters\n\t\t\t\t\t.filter(availableFilter => availableFilter.name === request.name)\n\t\t\t\t\t.map(filter => buildAppliedFilter(filter, request)).shift()\n\t\t\t);\n\t\t}\n\t);\n\n\tconst selectCategoryPageAppliedSortOption = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.applied_sort_option\n\t);\n\n\tconst selectCategoryPageAppliedSortDirection = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.applied_sort_direction\n\t);\n\n\t/**\n\t * Selected Category Id State\n\t */\n\tconst selectSelectedCategoryId = createSelector(\n\t\tselectCategoryPageConfigurationState,\n\t\t(state: U) => state.id\n\t);\n\n\t/**\n\t * Category Loading State\n\t */\n\tconst selectCategoryLoading = createSelector(\n\t\tselectCategoryState,\n\t\t(state: DaffCategoryReducerState<T, U>) => state.categoryLoading\n\t);\n\n\t/**\n\t * Category Products Loading State\n\t */\n\tconst selectCategoryProductsLoading = createSelector(\n\t\tselectCategoryState,\n\t\t(state: DaffCategoryReducerState<T, U>) => state.productsLoading\n\t);\n\n\t/**\n\t * Load Category Errors\n\t */\n\tconst selectCategoryErrors = createSelector(\n\t\tselectCategoryState,\n\t\t(state: DaffCategoryReducerState<T, U>) => state.errors\n\t);\n\n\treturn { \n\t\tselectCategoryState,\n\t\tselectCategoryPageConfigurationState,\n\t\tselectCategoryCurrentPage,\n\t\tselectCategoryTotalPages,\n\t\tselectCategoryPageSize,\n\t\tselectCategoryFilters,\n\t\tselectCategorySortOptions,\n\t\tselectCategoryPageProductIds,\n\t\tselectIsCategoryPageEmpty,\n\t\tselectCategoryPageTotalProducts,\n\t\tselectCategoryPageFilterRequests,\n\t\tselectCategoryPageAppliedFilters,\n\t\tselectCategoryPageAppliedSortOption,\n\t\tselectCategoryPageAppliedSortDirection,\n\t\tselectSelectedCategoryId,\n\t\tselectCategoryLoading,\n\t\tselectCategoryProductsLoading,\n\t\tselectCategoryErrors\n\t}\n}\n\nexport const getDaffCategoryPageSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>>(): DaffCategoryPageMemoizedSelectors<T, V, U> => cache = cache \n\t\t? cache \n\t\t: createCategoryPageSelectors<T, V, U>();\n})();\n","import { createSelector, MemoizedSelector } from '@ngrx/store';\nimport { Dictionary, EntityState } from '@ngrx/entity';\n\nimport { DaffGenericCategory } from '../../models/generic-category';\nimport { DaffCategoryRequest } from '../../models/requests/category-request';\nimport { DaffCategoryPageConfigurationState } from '../../models/category-page-configuration-state';\nimport { DaffCategoryReducersState } from '../../reducers/category-reducers.interface';\nimport { daffCategoryEntitiesAdapter } from '../../reducers/category-entities/category-entities-adapter';\nimport { getDaffCategoryFeatureSelector } from '../category-feature.selector';\nimport { DaffCategory } from '../../models/category';\n\nexport interface DaffCategoryEntitiesMemoizedSelectors<V extends DaffGenericCategory<V> = DaffCategory> {\n\tselectCategoryEntitiesState: MemoizedSelector<object, EntityState<V>>;\n\tselectCategoryIds: MemoizedSelector<object, EntityState<V>['ids']>;\n\tselectCategoryEntities: MemoizedSelector<object, Dictionary<V>>;\n\tselectAllCategories: MemoizedSelector<object, V[]>;\n\tselectCategoryTotal: MemoizedSelector<object, number>;\n}\n\nconst createCategoryFeatureSelectors = <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>>(): DaffCategoryEntitiesMemoizedSelectors<V> => {\n\n\tconst entitiesSelectors = daffCategoryEntitiesAdapter<V>().getSelectors();\n\tconst categoryFeatureState = getDaffCategoryFeatureSelector<T, V, U>().selectCategoryFeatureState;\n\t/**\n\t * Category Entities State\n\t */\n\tconst selectCategoryEntitiesState = createSelector(\n\t\tcategoryFeatureState,\n\t\t(state: DaffCategoryReducersState<T, V, U>) => state.categoryEntities\n\t);\n\n\tconst selectCategoryIds = createSelector(\n\t\tselectCategoryEntitiesState,\n\t\tentitiesSelectors.selectIds\n\t);\n\n\tconst selectCategoryEntities = createSelector(\n\t\tselectCategoryEntitiesState,\n\t\tentitiesSelectors.selectEntities\n\t);\n\n\tconst selectAllCategories = createSelector(\n\t\tselectCategoryEntitiesState,\n\t\tentitiesSelectors.selectAll\n\t);\n\n\tconst selectCategoryTotal = createSelector(\n\t\tselectCategoryEntitiesState,\n\t\tentitiesSelectors.selectTotal\n\t);\n\n\treturn {\n\t\tselectCategoryEntitiesState,\n\t\tselectCategoryIds,\n\t\tselectCategoryEntities,\n\t\tselectAllCategories,\n\t\tselectCategoryTotal\n\t}\n}\n\nexport const getDaffCategoryEntitiesSelectors = (() => {\n\tlet cache;\n\treturn <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>>(): DaffCategoryEntitiesMemoizedSelectors<V> => cache = cache \n\t\t? cache \n\t\t: createCategoryFeatureSelectors<T, V, U>();\n})();\n","import { createSelector, MemoizedSelector, MemoizedSelectorWithProps } from '@ngrx/store';\nimport { Dictionary } from '@ngrx/entity';\n\nimport { getDaffProductSelectors, DaffProduct } from '@daffodil/product';\n\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryFeatureMemoizedSelectors, getDaffCategoryFeatureSelector } from './category-feature.selector';\nimport { DaffCategoryPageMemoizedSelectors, getDaffCategoryPageSelectors } from './category-page/category-page.selector';\nimport { DaffCategoryEntitiesMemoizedSelectors } from './category-entities/category-entities.selector';\nimport { getDaffCategoryEntitiesSelectors } from './category-entities/category-entities.selector';\nimport { DaffCategory } from '../models/category';\n\nexport interface DaffCategoryMemoizedSelectors<\n\tT extends DaffCategoryRequest = DaffCategoryRequest, \n\tV extends DaffGenericCategory<V> = DaffCategory, \n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n> extends\n\tDaffCategoryFeatureMemoizedSelectors<T, V, U>,\n\tDaffCategoryPageMemoizedSelectors<T, V, U>,\n\tDaffCategoryEntitiesMemoizedSelectors<V> {\n\tselectSelectedCategory: MemoizedSelector<object, V>;\n\tselectCategoryPageProducts: MemoizedSelector<object, W[]>;\n\tselectCategory: MemoizedSelectorWithProps<object, object, V>;\n\tselectProductsByCategory: MemoizedSelectorWithProps<object, object, W[]>;\n\tselectTotalProductsByCategory: MemoizedSelectorWithProps<object, object, number>;\n}\n\nconst createCategorySelectors = <T extends DaffCategoryRequest, V extends DaffGenericCategory<V>, U extends DaffCategoryPageConfigurationState<T>, W extends DaffProduct>(): DaffCategoryMemoizedSelectors<T, V, U, W> => {\n\tconst { selectProductEntities, selectAllProducts } = getDaffProductSelectors<W>();\n\n\tconst {\n\t\tselectCategoryEntities\n\t} = getDaffCategoryEntitiesSelectors<T, V, U>();\n\tconst { \n\t\tselectSelectedCategoryId, \n\t\tselectCategoryPageProductIds \n\t} = getDaffCategoryPageSelectors<T, V, U>();\n\t/**\n\t * Combinatoric Category Selectors\n\t */\n\tconst selectSelectedCategory = createSelector(\n\t\tselectCategoryEntities,\n\t\tselectSelectedCategoryId,\n\t\t(entities: Dictionary<V>, selectedCategoryId: string) => entities[selectedCategoryId]\n\t);\n\n\tconst selectCategoryPageProducts = createSelector(\n\t\tselectCategoryPageProductIds,\n\t\tselectProductEntities,\n\t\t(ids, products: Dictionary<W>) => ids.map(id => products[id]).filter(p => p != null)\n\t);\n\n\tconst selectCategory = createSelector(\n\t\tselectCategoryEntities,\n\t\t(entities: Dictionary<V>, props) =>  entities[props.id]\n\t);\n\n\tconst selectProductsByCategory = createSelector(\n\t\tselectCategoryEntities,\n\t\tselectAllProducts,\n\t\t(entities, products, props) => entities[props.id] && entities[props.id].product_ids\n\t\t\t? products.filter(product => entities[props.id].product_ids.indexOf(product.id) >= 0)\n\t\t\t: null\n\t);\n\n\tconst selectTotalProductsByCategory = createSelector(\n\t\tselectCategoryEntities,\n\t\tselectAllProducts,\n\t\t(entities, products, props) => selectProductsByCategory.projector(entities, products, { id: props.id })\n\t\t\t? selectProductsByCategory.projector(entities, products, { id: props.id }).length\n\t\t\t: null\n\t);\n\n\treturn {\n\t\t...getDaffCategoryFeatureSelector<T, V, U>(),\n\t\t...getDaffCategoryEntitiesSelectors<T, V, U>(),\n\t\t...getDaffCategoryPageSelectors<T, V, U>(),\n\t\tselectSelectedCategory,\n\t\tselectCategoryPageProducts,\n\t\tselectCategory,\n\t\tselectProductsByCategory,\n\t\tselectTotalProductsByCategory\n\t}\n}\n\nexport const getDaffCategorySelectors = (() => {\n\tlet cache;\n\treturn <\n\t\tT extends DaffCategoryRequest = DaffCategoryRequest, \n\t\tV extends DaffGenericCategory<V> = DaffCategory, \n\t\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>, \n\t\tW extends DaffProduct = DaffProduct\n\t>(): DaffCategoryMemoizedSelectors<T, V, U, W> => cache = cache \n\t\t? cache \n\t\t: createCategorySelectors<T, V, U, W>();\n})();\n","import { Injectable, Inject } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, catchError, withLatestFrom, map } from 'rxjs/operators';\nimport { of, Observable } from 'rxjs';\nimport { Store, select } from '@ngrx/store';\n\nimport { DaffProductGridLoadSuccess, DaffProduct } from '@daffodil/product';\n\nimport {\n  DaffCategoryActionTypes,\n  DaffChangeCategoryPageSize,\n  DaffChangeCategoryCurrentPage,\n\tDaffChangeCategoryFilters,\n\tDaffChangeCategorySortingOption,\n\tDaffToggleCategoryFilter,\n  DaffCategoryPageLoadSuccess,\n  DaffCategoryPageLoad,\n  DaffCategoryPageLoadFailure\n} from '../actions/category.actions';\nimport { DaffCategoryDriver } from '../drivers/injection-tokens/category-driver.token';\nimport { DaffCategoryServiceInterface } from '../drivers/interfaces/category-service.interface';\nimport { DaffGetCategoryResponse } from '../models/get-category-response';\nimport { getDaffCategorySelectors } from '../selectors/category.selector';\nimport { DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { daffCategoryValidateFilters } from '../helpers/public_api';\n\n@Injectable()\nexport class DaffCategoryPageEffects<\n\tT extends DaffCategoryRequest,\n\tV extends DaffGenericCategory<V>,\n\tU extends DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct\n> {\n\n  constructor(\n    private actions$: Actions,\n    @Inject(DaffCategoryDriver) private driver: DaffCategoryServiceInterface<T, V, U, W>,\n    private store: Store<any>\n\t){}\n\n\tprivate categorySelectors = getDaffCategorySelectors<T, V, U, W>();\n\n  @Effect()\n  loadCategoryPage$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.CategoryPageLoadAction),\n    switchMap((action: DaffCategoryPageLoad<T>) => {\n\t\t\tdaffCategoryValidateFilters(action.request.filter_requests);\n\t\t\treturn this.processCategoryGetRequest(action.request)\n\t\t})\n\t)\n\n  @Effect()\n  changeCategoryPageSize$ : Observable<any> = this.actions$.pipe(\n\t\tofType(DaffCategoryActionTypes.ChangeCategoryPageSizeAction),\n    withLatestFrom(\n\t\t\tthis.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState))\n\t\t),\n    switchMap((\n\t\t\t[action, categoryRequest]:\n\t\t\t[DaffChangeCategoryPageSize, T]\n\t\t) => this.processCategoryGetRequest({\n\t\t\t...categoryRequest,\n\t\t\tpage_size: action.pageSize\n\t\t}))\n  )\n\n  @Effect()\n  changeCategoryCurrentPage$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.ChangeCategoryCurrentPageAction),\n    withLatestFrom(\n\t\t\tthis.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState))\n    ),\n    switchMap((\n\t\t\t[action, categoryRequest]:\n\t\t\t[DaffChangeCategoryCurrentPage, T]\n\t\t) => this.processCategoryGetRequest({\n\t\t\t...categoryRequest,\n\t\t\tcurrent_page: action.currentPage\n\t\t}))\n  )\n\n  @Effect()\n  changeCategoryFilters$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.ChangeCategoryFiltersAction),\n    withLatestFrom(\n\t\t\tthis.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState))\n    ),\n    switchMap((\n\t\t\t[action, categoryRequest]:\n\t\t\t[DaffChangeCategoryFilters, T]\n\t\t) => {\n\t\t\tdaffCategoryValidateFilters(action.filters);\n\t\t\treturn this.processCategoryGetRequest({\n\t\t\t\t...categoryRequest,\n\t\t\t\tfilter_requests: action.filters\n\t\t\t})\n\t\t})\n  )\n\n  @Effect()\n  toggleCategoryFilter$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.ToggleCategoryFilterAction),\n    withLatestFrom(\n\t\t\tthis.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState))\n    ),\n    switchMap((\n\t\t\t[action, categoryPageConfigurationState]:\n\t\t\t[DaffToggleCategoryFilter, U]\n\t\t) => {\n\t\t\tdaffCategoryValidateFilters(categoryPageConfigurationState.filter_requests);\n\t\t\treturn this.processCategoryGetRequest({\n\t\t\t\t...categoryPageConfigurationState\n\t\t\t})\n\t\t})\n  )\n\n  @Effect()\n  changeCategorySort$ : Observable<any> = this.actions$.pipe(\n    ofType(DaffCategoryActionTypes.ChangeCategorySortingOptionAction),\n    withLatestFrom(\n\t\t\tthis.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState))\n    ),\n    switchMap((\n\t\t\t[action, categoryRequest]:\n\t\t\t[DaffChangeCategorySortingOption, T]\n\t\t) => this.processCategoryGetRequest({\n\t\t\t...categoryRequest,\n\t\t\tapplied_sort_option: action.sort.option,\n\t\t\tapplied_sort_direction: action.sort.direction\n\t\t}))\n\t)\n\n  private processCategoryGetRequest(payload: T) {\n    return this.driver.get(payload).pipe(\n      switchMap((resp: DaffGetCategoryResponse<T, V, U, W>) => [\n        new DaffProductGridLoadSuccess(resp.products),\n        new DaffCategoryPageLoadSuccess(resp)\n      ]),\n      catchError(error => of(new DaffCategoryPageLoadFailure('Failed to load the category')))\n    )\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\n\nimport { daffCategoryReducers } from './reducers/category-reducers';\nimport { DaffCategoryEffects } from './effects/category.effects';\nimport { DaffDefaultCategoryPageSize } from './resolvers/public_api';\nimport { DaffCategoryPageEffects } from './effects/category-page.effects';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('category', daffCategoryReducers),\n    EffectsModule.forFeature([DaffCategoryEffects, DaffCategoryPageEffects]),\n\t],\n\tproviders: [\n\t\t{ provide: DaffDefaultCategoryPageSize, useValue: 12 }\n\t]\n})\nexport class DaffCategoryStateModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffCategoryStateModule } from './category-state.module';\nimport { DaffProductModule } from '@daffodil/product';\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    /**\n     * Ngrx/store\n     */\n    DaffCategoryStateModule,\n    DaffProductModule\n  ]\n})\nexport class DaffCategoryModule { }\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Store, select, Action } from '@ngrx/store';\n\nimport { DaffProduct } from '@daffodil/product';\n\nimport { DaffCategoryModule } from '../category.module';\nimport { getDaffCategorySelectors } from '../selectors/category.selector';\nimport { DaffCategoryReducersState } from '../reducers/category-reducers.interface';\nimport { DaffCategoryPageConfigurationState } from '../models/category-page-configuration-state';\nimport { DaffCategoryFilter } from '../models/category-filter';\nimport { DaffCategorySortOption } from '../models/category-sort-option';\nimport { DaffSortDirectionEnum, DaffCategoryRequest } from '../models/requests/category-request';\nimport { DaffCategoryAppliedFilter } from '../models/category-applied-filter';\nimport { DaffGenericCategory } from '../models/generic-category';\nimport { DaffCategory } from '../models/category';\nimport { DaffCategoryFacadeInterface } from './category-facade.interface';\n\n/**\n * A facade for accessing state for the currently selected category.\n */\n@Injectable({\n  providedIn: DaffCategoryModule\n})\nexport class DaffCategoryFacade<\n\tT extends DaffCategoryRequest = DaffCategoryRequest, \n\tV extends DaffGenericCategory<V> = DaffCategory, \n\tU extends DaffCategoryPageConfigurationState<T> = DaffCategoryPageConfigurationState<T>,\n\tW extends DaffProduct = DaffProduct\n> implements DaffCategoryFacadeInterface<T, V, U, W> {\n\tprivate categorySelectors = getDaffCategorySelectors<T, V, U, W>();\n\t\n\t/**\n   * The currently selected category.\n   */\n  category$: Observable<V>;\n  /**\n   * The page configuration state for the selected category.\n   */\n  pageConfigurationState$: Observable<U>;\n  /**\n   * The current page of products for the selected category.\n   */\n  currentPage$: Observable<number>;\n  /**\n   * The number of pages of product for the selected category.\n   */\n\ttotalPages$: Observable<number>;\n\t/**\n\t * The total number of products for the filters applied.\n\t */\n\ttotalProducts$: Observable<number>;\n  /**\n   * The number of products per page for the selected category.\n   */\n  pageSize$: Observable<number>;\n  /**\n   * The filters available for the products of the selected category.\n   */\n  filters$: Observable<DaffCategoryFilter[]>;\n  /**\n   * The sort options available for the products of the selected category.\n   */\n  sortOptions$: Observable<DaffCategorySortOption[]>;\n  /**\n   * The sort options available for the products of the selected category.\n   */\n  appliedFilters$: Observable<DaffCategoryAppliedFilter[]>;\n  /**\n   * The sort options available for the products of the selected category.\n   */\n  appliedSortOption$: Observable<string>;\n  /**\n   * The sort options available for the products of the selected category.\n   */\n  appliedSortDirection$: Observable<DaffSortDirectionEnum>;\n  /**\n   * Products of the currently selected category.\n   */\n  products$: Observable<W[]>;\n  /**\n   * The loading state for retrieving a single category.\n   */\n  categoryLoading$: Observable<boolean>;\n  /**\n   * The loading state for retrieving only the products of the category.\n   */\n  productsLoading$: Observable<boolean>;\n  /**\n   * Errors associated with retrieving a single category.\n   */\n\terrors$: Observable<string[]>;\n\t/**\n\t * Is the category page empty of products.\n\t */\n\tisCategoryEmpty$: Observable<boolean>;\n\t\n\t/**\n\t * Get a category by the provided Id.\n\t * @param id \n\t */\n\tgetCategoryById(id: string): Observable<V> {\n\t\treturn this.store.pipe(select(this.categorySelectors.selectCategory, {id: id}));\n\t}\n\n\t/**\n\t * Get products by a category Id.\n\t * @param categoryId \n\t */\n\tgetProductsByCategory(categoryId: string): Observable<W[]> {\n\t\treturn this.store.pipe(select(this.categorySelectors.selectProductsByCategory, {id: categoryId}))\n\t}\n\n\t/**\n\t * Get products by a category Id.\n\t * @param categoryId \n\t */\n\tgetTotalProductsByCategory(categoryId: string): Observable<number> {\n\t\treturn this.store.pipe(select(this.categorySelectors.selectTotalProductsByCategory, {id: categoryId}))\n\t}\n\n  constructor(private store: Store<DaffCategoryReducersState<T, V, U>>) {\n    this.category$ = this.store.pipe(select(this.categorySelectors.selectSelectedCategory));\n\t\tthis.products$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageProducts));\n\t\tthis.totalProducts$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageTotalProducts));\n    this.pageConfigurationState$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageConfigurationState));\n    this.currentPage$ = this.store.pipe(select(this.categorySelectors.selectCategoryCurrentPage));\n    this.totalPages$ = this.store.pipe(select(this.categorySelectors.selectCategoryTotalPages));\n    this.pageSize$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageSize));\n    this.filters$ = this.store.pipe(select(this.categorySelectors.selectCategoryFilters));\n    this.sortOptions$ = this.store.pipe(select(this.categorySelectors.selectCategorySortOptions));\n    this.appliedFilters$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageAppliedFilters));\n    this.appliedSortOption$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageAppliedSortOption));\n    this.appliedSortDirection$ = this.store.pipe(select(this.categorySelectors.selectCategoryPageAppliedSortDirection));\n    this.categoryLoading$ = this.store.pipe(select(this.categorySelectors.selectCategoryLoading));\n    this.productsLoading$ = this.store.pipe(select(this.categorySelectors.selectCategoryProductsLoading));\n\t\tthis.errors$ = this.store.pipe(select(this.categorySelectors.selectCategoryErrors));\n\t\tthis.isCategoryEmpty$ = this.store.pipe(select(this.categorySelectors.selectIsCategoryPageEmpty));\n\t}\n\n  /**\n   * Dispatches the given action.\n   * @param action action to dispatch.\n   */\n  dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n}\n","import gql from 'graphql-tag';\n\nexport const MagentoGetCategoryQuery = gql`\nquery MagentoGetCategoryQuery($filters: CategoryFilterInput){\n\tcategoryList(filters: $filters) {\n\t\tid\n\t\tname\n\t\tlevel\n\t\tdescription\n\t\tbreadcrumbs {\n\t\t\tcategory_id\n\t\t\tcategory_name\n\t\t\tcategory_level\n\t\t\tcategory_url_key\n\t\t}\n\t\tproducts {\n\t\t\titems {\n\t\t\t\tsku\n\t\t\t}\n\t\t}\n\t\tchildren_count\n\t}\n}`\n","import gql from 'graphql-tag';\nimport { magentoProductFragment } from '@daffodil/product';\n\n/**\n * This query only exists because products and their associated aggregations/filter cannot\n * be retrieved through a category call.\n */\nexport const MagentoGetProductsQuery = gql`\nquery MagentoGetProducts($filter: ProductAttributeFilterInput!, $search: String, $pageSize: Int, $currentPage: Int, $sort: ProductAttributeSortInput)\n{\n\tproducts(filter: $filter, search: $search, pageSize: $pageSize, currentPage: $currentPage, sort: $sort)\n\t{\n\t\ttotal_count\n\t\titems {\n\t\t\t...product\n\t\t}\n\t\tpage_info {\n\t\t\tpage_size\n\t\t\tcurrent_page\n\t\t\ttotal_pages\n\t\t}\n\t}\n}\n${magentoProductFragment}\n`\n","export enum MagentoCategoryFilterActionEnum {\n\tEqual = 'eq',\n\tTo = 'to',\n\tFrom = 'from',\n\tIn = 'in',\n\tMatch = 'match'\n}\n\nexport interface MagentoCategoryFilters {\n\t[x: string]: MagentoFilterAction;\n}\n\nexport type MagentoFilterAction = {\n\t[key in MagentoCategoryFilterActionEnum]?: string | string[];\n}\n","import { Injectable } from '@angular/core';\n\nimport { MagentoCategoryFilters, MagentoCategoryFilterActionEnum } from '../models/requests/filters';\nimport { DaffCategoryFilterRequest, DaffCategoryFromToFilterSeparator } from '../../../models/requests/filter-request';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAppliedFiltersTransformService {\n\n  transform(categoryId: string, daffFilters: DaffCategoryFilterRequest[]): MagentoCategoryFilters {\n\t\tconst magentoFilters: MagentoCategoryFilters = {\n\t\t\tcategory_id: {\n\t\t\t\t[MagentoCategoryFilterActionEnum.Equal]: categoryId\n\t\t\t}\n\t\t};\n\n\t\tif(!daffFilters) return magentoFilters;\n\n\t\tdaffFilters.forEach(filter => {\n\t\t\t// The FromTo filter needs special treatment, because Magento accepts the \"from\" and \"to\" filters\n\t\t\t// separately (it also outputs FromTo filter pairs together)\n\t\t\tif(filter.type === DaffCategoryFilterType.Range) {\n\t\t\t\tconst fromToValues = filter.value[0].split(DaffCategoryFromToFilterSeparator);\n\t\t\t\tmagentoFilters[filter.name] = {\n\t\t\t\t\t...magentoFilters[filter.name],\n\t\t\t\t\t...this.getRangeFromValue(fromToValues[0]),\n\t\t\t\t\t...this.getRangeToValue(fromToValues[1])\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmagentoFilters[filter.name] = {\n\t\t\t\t\t...magentoFilters[filter.name],\n\t\t\t\t\t[this.getFilterAction(filter.type)]: this.getFilterValue(filter.type, filter.value)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn magentoFilters;\n\t}\n\t\n\t/**\n\t * Returns an In action for Equal type and a Match action for Match type.\n\t */\n\tprivate getFilterAction(type: DaffCategoryFilterType): MagentoCategoryFilterActionEnum {\n\t\treturn type === DaffCategoryFilterType.Equal \n\t\t\t? MagentoCategoryFilterActionEnum.In\n\t\t\t: MagentoCategoryFilterActionEnum.Match;\n\t}\n\n\t/**\n\t * Returns an array for Equal type and a string for Match type.\n\t */\n\tprivate getFilterValue(type: DaffCategoryFilterType, value: DaffCategoryFilterRequest['value']): string | string[] {\n\t\treturn type === DaffCategoryFilterType.Equal ? value : value[0];\n\t}\n\n\tprivate getRangeFromValue(fromValue: string) {\n\t\treturn fromValue !== '*' ? {[MagentoCategoryFilterActionEnum.From]: fromValue} : null;\n\t}\n\n\tprivate getRangeToValue(toValue: string) {\n\t\treturn toValue !== '*' ? {[MagentoCategoryFilterActionEnum.To]: toValue} : null;\n\t}\n}\n","export enum MagentoSortDirectionEnum {\n\tAscending = 'ASC',\n\tDecending = 'DESC'\n}\n\nexport interface MagentoSortFieldAction {\n\t[x: string]: MagentoSortDirectionEnum;\n}\n","import { DaffCategoryFilterRequest } from './filter-request';\n\nexport enum DaffSortDirectionEnum {\n\tAscending = 'ASC',\n\tDecending = 'DSC'\n}\n\nexport interface DaffCategoryRequest {\n  id: string;\n  filter_requests?: DaffCategoryFilterRequest[];\n  applied_sort_option?: string;\n  applied_sort_direction?: DaffSortDirectionEnum;\n  current_page?: number;\n  page_size?: number;\n}\n","import { Injectable } from '@angular/core';\n\nimport { MagentoSortFieldAction, MagentoSortDirectionEnum } from '../models/requests/sort';\nimport { DaffSortDirectionEnum } from '../../../models/requests/category-request';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoAppliedSortOptionTransformService {\n\n  transform(appliedOption: string, appliedDirection: DaffSortDirectionEnum): MagentoSortFieldAction {\n\t\treturn {\n\t\t\t[appliedOption]: this.transformDirection(appliedDirection)\n\t\t}\n\t}\n\t\n\tprivate transformDirection(direction: DaffSortDirectionEnum): MagentoSortDirectionEnum {\n\t\tif(direction === DaffSortDirectionEnum.Ascending) {\n\t\t\treturn MagentoSortDirectionEnum.Ascending;\n\t\t} else if(direction === DaffSortDirectionEnum.Decending) {\n\t\t\treturn MagentoSortDirectionEnum.Decending;\n\t\t}\n\t}\n}\n","import { MagentoSortFields } from '../../models/sort-fields'\n\nexport function coerceDefaultSortOptionFirst(sort_fields: MagentoSortFields): MagentoSortFields {\n  const index = sort_fields.options.findIndex(option => sort_fields.default === option.value)\n\n  return {\n    ...sort_fields,\n    options: [\n      sort_fields.options[index],\n      ...sort_fields.options.slice(0, index),\n      ...sort_fields.options.slice(index + 1)\n    ]\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { DaffCategoryPageConfigurationState } from '../../../models/category-page-configuration-state';\nimport { DaffCategoryFilter } from '../../../models/category-filter';\nimport { MagentoAggregation } from '../models/aggregation';\nimport { MagentoSortFields } from '../models/sort-fields';\nimport { MagentoCompleteCategoryResponse } from '../models/complete-category-response';\nimport { DaffCategoryFromToFilterSeparator } from '../../../models/requests/filter-request';\nimport { DaffCategoryFilterType } from '../../../models/category-filter-base';\nimport { DaffCategoryRequest } from '../../../models/requests/category-request';\nimport { coerceDefaultSortOptionFirst } from './pure/sort-default-option-first';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoCategoryPageConfigTransformerService {\n\n  transform(categoryResponse: MagentoCompleteCategoryResponse): DaffCategoryPageConfigurationState<DaffCategoryRequest> {\n\t\treturn {\n      id: categoryResponse.category.id,\n      page_size: categoryResponse.page_info.page_size,\n      current_page: categoryResponse.page_info.current_page,\n\t\t\ttotal_pages: categoryResponse.page_info.total_pages,\n\t\t\ttotal_products: categoryResponse.total_count,\n      filters: categoryResponse.aggregates.map(this.transformAggregate.bind(this)),\n\t\t\tsort_options: coerceDefaultSortOptionFirst(categoryResponse.sort_fields).options,\n\t\t\tproduct_ids: categoryResponse.products.map(product => product.sku)\n    }\n  }\n\n  private transformAggregate(filter: MagentoAggregation): DaffCategoryFilter {\n\t\tconst filterType = this.transformAggregateType(filter.type)\n    return {\n      label: filter.label,\n      type: filterType,\n\t\t\tname: filter.attribute_code,\n\t\t\toptions: filter.options.map(option => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: option.label,\n\t\t\t\t\tvalue: filterType === DaffCategoryFilterType.Range ? this.transformRangeValue(option.value) : option.value,\n\t\t\t\t\tcount: option.count\n\t\t\t\t}\n\t\t\t})\n    }\n\t}\n\n\tprivate transformAggregateType(type: MagentoAggregation['type']): DaffCategoryFilterType {\n\t\tif(type === 'select') return DaffCategoryFilterType.Equal;\n\t\telse if(type === 'boolean') return DaffCategoryFilterType.Equal;\n\t\telse if(type === 'multiselect') return DaffCategoryFilterType.Equal;\n\t\telse if(type === 'price') return DaffCategoryFilterType.Range;\n\t\telse return DaffCategoryFilterType.Match;\n\t}\n\n\tprivate transformRangeValue(value: string): string {\n\t\treturn value.replace('_', DaffCategoryFromToFilterSeparator);\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { DaffCategory } from '../../../models/category';\nimport { DaffCategoryBreadcrumb } from '../../../models/category-breadcrumb';\nimport { MagentoBreadcrumb, MagentoCategory } from '../models/category';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoCategoryTransformerService {\n\n  transform(category: MagentoCategory): DaffCategory {\n    return {\n      id: category.id,\n\t\t\tname: category.name,\n\t\t\tdescription: category.description,\n\t\t\tchildren_count: category.children_count,\n\t\t\t//todo: use optional chaining when possible\n\t\t\tbreadcrumbs: category.breadcrumbs ? \n\t\t\t\tcategory.breadcrumbs\n\t\t\t\t\t.map(breadcrumb => this.transformBreadcrumb(breadcrumb))\n\t\t\t\t\t.sort((a, b) => a.categoryLevel - b.categoryLevel) : \n\t\t\t\tnull,\n\t\t\tproduct_ids: category.products.items.map(product => product.sku),\n\t\t\ttotal_products: category.products.items.length\n    }\n  }\n\n  private transformBreadcrumb(breadcrumb: MagentoBreadcrumb): DaffCategoryBreadcrumb {\n    return {\n      categoryId: breadcrumb.category_id,\n      categoryName: breadcrumb.category_name,\n      categoryLevel: breadcrumb.category_level,\n      categoryUrlKey: breadcrumb.category_url_key\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { transformManyMagentoProducts } from '@daffodil/product';\n\nimport { DaffMagentoCategoryPageConfigTransformerService } from './category-page-config-transformer.service';\nimport { MagentoCompleteCategoryResponse } from '../models/complete-category-response';\nimport { DaffGetCategoryResponse } from '../../../models/get-category-response';\nimport { DaffMagentoCategoryTransformerService } from './category-transformer.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoCategoryResponseTransformService {\n\n  constructor(\n    private magentoCategoryTransformerService: DaffMagentoCategoryTransformerService,\n    private magentoCategoryPageConfigurationTransformerService: DaffMagentoCategoryPageConfigTransformerService\n  ) {}\n\n  transform(completeCategory: MagentoCompleteCategoryResponse): DaffGetCategoryResponse {\n    return {\n\t\t\t...{ magentoCompleteCategoryResponse: completeCategory },\n      category: this.magentoCategoryTransformerService.transform(completeCategory.category),\n      categoryPageConfigurationState: this.magentoCategoryPageConfigurationTransformerService.transform(completeCategory),\n      products: transformManyMagentoProducts(completeCategory.products)\n    }\n  }\n}\n","import gql from 'graphql-tag';\n\n/**\n * This query only exists because products and their associated aggregations/filter cannot\n * be retrieved through a category call.\n */\nexport const MagentoGetCategoryAggregations = gql`\nquery MagentoGetProducts($filter: ProductAttributeFilterInput!)\n{\n\tproducts(filter: $filter)\n\t{\n\t\taggregations {\n\t\t\tlabel\n\t\t\tcount\n\t\t\tattribute_code\n\t\t\toptions {\n\t\t\t\t\tcount\n\t\t\t\t\tlabel\n\t\t\t\t\tvalue\n\t\t\t}\n\t\t}\n\t\tsort_fields {\n\t\t\tdefault\n\t\t\toptions {\n\t\t\t\tlabel\n\t\t\t\tvalue\n\t\t\t}\n\t\t}\n\t}\n}`\n","import gql from 'graphql-tag';\n\n/**\n * A query for getting aggregation types.\n */\nexport const MagentoGetCustomAttributeMetadata = gql`\nquery MagentoGetCustomAttributeMetadata($attributes: [AttributeInput!]!)\n{\n\tcustomAttributeMetadata(attributes: $attributes)\n\t{\n\t\titems {\n      attribute_code\n      attribute_type\n      input_type\n    }\n\t}\n}`\n","import { MagentoAggregation } from '../models/aggregation';\nimport { MagentoCustomMetadataAttribute } from '../models/requests/custom-metadata-attribute';\nimport { MagentoCustomAttributeMetadataResponse } from '../models/custom-attribute-metadata-response';\nimport { MagentoGetCategoryAggregationsResponse } from '../models/get-category-aggregations-response';\n\nexport function buildCustomMetadataAttribute(filter: MagentoAggregation): MagentoCustomMetadataAttribute {\n\treturn {\n\t\tattribute_code: filter.attribute_code,\n\t\tentity_type: '4'\n\t}\n}\n\nexport function addMetadataTypesToAggregates(\n\tattributeResponse: MagentoCustomAttributeMetadataResponse, \n\taggregationResponse: MagentoGetCategoryAggregationsResponse\n): MagentoGetCategoryAggregationsResponse {\n\n\treturn {\n\t\t...aggregationResponse,\n\t\tproducts: {\n\t\t\t...aggregationResponse.products,\n\t\t\taggregations: [\n\t\t\t\t...aggregationResponse.products.aggregations.map((aggregate) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...aggregate,\n\t\t\t\t\t\ttype: getMatchedAttributeType(aggregate, attributeResponse)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t]\n\t\t}\n\t}\n}\n\nfunction getMatchedAttributeType(aggregate: MagentoAggregation, attributes: MagentoCustomAttributeMetadataResponse): string {\n\tif(aggregate.attribute_code === 'category_id') return 'select';\n\n\treturn attributes.customAttributeMetadata.items.filter(item => item.attribute_code === aggregate.attribute_code)[0].input_type;\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { Apollo } from 'apollo-angular';\n\nimport { DaffCategoryServiceInterface } from '../interfaces/category-service.interface';\nimport { DaffGetCategoryResponse } from '../../models/get-category-response';\nimport { DaffCategoryRequest } from '../../models/requests/category-request';\nimport { MagentoCompleteCategoryResponse } from './models/complete-category-response';\nimport { MagentoGetACategoryResponse } from './models/get-category-response';\nimport { MagentoGetCategoryQuery } from './queries/get-category';\nimport { MagentoGetProductsResponse } from './models/get-products-response';\nimport { MagentoGetProductsQuery } from './queries/get-products';\nimport { DaffMagentoAppliedFiltersTransformService } from './transformers/applied-filter-transformer.service';\nimport { DaffMagentoAppliedSortOptionTransformService } from './transformers/applied-sort-option-transformer.service';\nimport { DaffMagentoCategoryResponseTransformService } from './transformers/category-response-transform.service';\nimport { MagentoGetProductsByCategoriesRequest } from './models/requests/get-products-by-categories-request';\nimport { MagentoGetCategoryAggregations } from './queries/get-category-aggregations';\nimport { MagentoGetCategoryAggregationsResponse } from './models/get-category-aggregations-response';\nimport { MagentoCustomAttributeMetadataResponse } from './models/custom-attribute-metadata-response';\nimport { MagentoGetCustomAttributeMetadata } from './queries/custom-attribute-metadata';\nimport { buildCustomMetadataAttribute, addMetadataTypesToAggregates } from './transformers/custom-metadata-attributes-methods';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DaffMagentoCategoryService implements DaffCategoryServiceInterface {\n  \n  constructor(\n    private apollo: Apollo,\n\t\tprivate magentoCategoryResponseTransformer: DaffMagentoCategoryResponseTransformService,\n\t\tprivate magentoAppliedFiltersTransformer: DaffMagentoAppliedFiltersTransformService,\n\t\tprivate magentoAppliedSortTransformer: DaffMagentoAppliedSortOptionTransformService\n  ) {}\n\n\t//todo the MagentoGetCategoryQuery needs to get its own product ids.\n  /**\n   * Gets a category based on parameters. Default current_page is 1, and default page_size is 20.\n   * @param categoryRequest A DaffCategoryRequest object.\n   */\n  get(categoryRequest: DaffCategoryRequest): Observable<DaffGetCategoryResponse> {\n    return combineLatest([\n      this.apollo.query<MagentoGetACategoryResponse>({\n\t\t\t\tquery: MagentoGetCategoryQuery,\n\t\t\t\tvariables: { filters: {ids: { eq: categoryRequest.id}}}\n\t\t\t}),\n      this.apollo.query<MagentoGetCategoryAggregationsResponse>({\n\t\t\t\tquery: MagentoGetCategoryAggregations,\n\t\t\t\tvariables: {filter: {category_id: {eq: categoryRequest.id}}}\n\t\t\t}).pipe(\n\t\t\t\tswitchMap((aggregationResult): Observable<MagentoGetCategoryAggregationsResponse> => \n\t\t\t\t\tthis.apollo.query<MagentoCustomAttributeMetadataResponse>({\n\t\t\t\t\t\tquery: MagentoGetCustomAttributeMetadata,\n\t\t\t\t\t\tvariables: { \n\t\t\t\t\t\t\tattributes: aggregationResult.data.products.aggregations\n\t\t\t\t\t\t\t\t.filter(aggregate => aggregate.attribute_code !== 'category_id')\n\t\t\t\t\t\t\t\t.map(aggregate => buildCustomMetadataAttribute(aggregate))\n\t\t\t\t\t\t}\n\t\t\t\t\t}).pipe(\n\t\t\t\t\t\tmap(response => addMetadataTypesToAggregates(response.data, aggregationResult.data))\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t),\n      this.apollo.query<MagentoGetProductsResponse>({\n\t\t\t\tquery: MagentoGetProductsQuery,\n\t\t\t\tvariables: this.getProductsQueryVariables(categoryRequest)\n\t\t\t})\n    ]).pipe(\n      map((result): MagentoCompleteCategoryResponse => this.buildCompleteCategoryResponse(result[0].data, result[1], result[2].data)),\n\t\t\tmap((finalResult: MagentoCompleteCategoryResponse) => this.magentoCategoryResponseTransformer.transform(finalResult))\n\t\t);\n\t}\n\t\n\tprivate getProductsQueryVariables(request: DaffCategoryRequest): MagentoGetProductsByCategoriesRequest {\n\t\tconst queryVariables = {\n\t\t\tfilter: this.magentoAppliedFiltersTransformer.transform(request.id, request.filter_requests)\n\t\t};\n\t\tif(request.page_size) queryVariables['pageSize'] = request.page_size;\n\t\tif(request.current_page) queryVariables['currentPage'] = request.current_page;\n\t\tif(request.applied_sort_option && request.applied_sort_direction) {\n\t\t\tqueryVariables['sort'] = this.magentoAppliedSortTransformer.transform(request.applied_sort_option, request.applied_sort_direction);\n\t\t}\n\n\t\treturn queryVariables;\n\t}\n\n\tprivate buildCompleteCategoryResponse(\n\t\tcategoryResponse: MagentoGetACategoryResponse, \n\t\taggregationsAndSortsResponse: MagentoGetCategoryAggregationsResponse,\n\t\tproductsResponse: MagentoGetProductsResponse\n\t): MagentoCompleteCategoryResponse {\n\t\treturn {\n\t\t\tcategory: categoryResponse.categoryList[0],\n\t\t\tproducts: productsResponse.products.items,\n\t\t\taggregates: aggregationsAndSortsResponse.products.aggregations,\n\t\t\tsort_fields: aggregationsAndSortsResponse.products.sort_fields,\n\t\t\ttotal_count: productsResponse.products.total_count,\n\t\t\tpage_info: productsResponse.products.page_info\n\t\t};\n\t}\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DaffMagentoCategoryService } from './category.service';\nimport { DaffMagentoCategoryResponseTransformService } from './transformers/category-response-transform.service';\nimport { DaffMagentoCategoryTransformerService } from './transformers/category-transformer.service';\nimport { DaffMagentoCategoryPageConfigTransformerService } from './transformers/category-page-config-transformer.service';\nimport { DaffCategoryDriver } from '../injection-tokens/category-driver.token';\nimport { DaffMagentoAppliedSortOptionTransformService } from './transformers/applied-sort-option-transformer.service';\nimport { DaffMagentoAppliedFiltersTransformService } from './transformers/applied-filter-transformer.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ]\n})\nexport class DaffCategoryMagentoDriverModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: DaffCategoryMagentoDriverModule,\n      providers: [\n\t\t\t\t{\n\t\t\t\t\tprovide: DaffCategoryDriver,\n\t\t\t\t\tuseExisting: DaffMagentoCategoryService\n\t\t\t\t},\n\t\t\t\tDaffMagentoCategoryPageConfigTransformerService,\n\t\t\t\tDaffMagentoCategoryResponseTransformService,\n\t\t\t\tDaffMagentoCategoryTransformerService,\n\t\t\t\tDaffMagentoAppliedFiltersTransformService,\n\t\t\t\tDaffMagentoAppliedSortOptionTransformService\n      ]\n    };\n  }\n}\n","import { DaffCategoryFilterBase } from './category-filter-base';\n\nexport interface DaffCategoryAppliedFilter extends DaffCategoryFilterBase {\n\toptions: DaffCategoryAppliedFilterOption[];\n}\n\nexport interface DaffCategoryAppliedFilterOption {\n\tlabel: string;\n\tvalue: string;\n}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}