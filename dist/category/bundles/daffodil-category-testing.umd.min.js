!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("faker/locale/en_US"),require("@daffodil/core/testing"),require("@daffodil/category"),require("angular-in-memory-web-api"),require("@daffodil/product/testing"),require("@daffodil/core"),require("rxjs"),require("@angular/common/http"),require("@angular/common")):"function"==typeof define&&define.amd?define("@daffodil/category/testing",["exports","@angular/core","faker/locale/en_US","@daffodil/core/testing","@daffodil/category","angular-in-memory-web-api","@daffodil/product/testing","@daffodil/core","rxjs","@angular/common/http","@angular/common"],t):t(((e=e||self).daffodil=e.daffodil||{},e.daffodil.category=e.daffodil.category||{},e.daffodil.category.testing={}),e.ng.core,e.en_US,e.testing,e.daffodil.category,e.angularInMemoryWebApi,e.testing$1,e.core$1,e.rxjs,e.ng.common.http,e.ng.common)}(this,function(e,t,r,o,n,a,i,c,u,s,g){"use strict";var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function f(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function d(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}var l=function(){this.id=r.random.number({min:1,max:1e4}).toString(),this.name=r.commerce.productMaterial(),this.description=r.random.words(Math.floor(20*Math.random())),this.breadcrumbs=[{categoryId:r.random.number({min:1,max:100}),categoryName:r.commerce.productMaterial(),categoryLevel:r.random.number({min:1,max:5}),categoryUrlKey:r.commerce.productMaterial()}],this.children_count=r.random.number({min:1,max:10}),this.total_products=1,this.product_ids=[r.random.number({min:1,max:100}).toString()]};var y=function(e){function r(){return e.call(this,l)||this}return f(r,e),r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}(o.DaffModelFactory),m=function(){this.id=String(r.random.number({min:1,max:100})),this.page_size=20,this.current_page=1,this.filters=[{label:"Category",name:"cat",type:n.DaffCategoryFilterType.Equal,options:[{label:"Gear",value:"3",count:34},{label:"Training",value:"9",count:6}]}],this.sort_options=[{label:"Position",value:"position"},{label:"Name",value:"name"},{label:"Price",value:"price"}],this.total_pages=r.random.number({min:1,max:4}),this.filter_requests=[],this.applied_sort_option=null,this.applied_sort_direction=null,this.total_products=r.random.number({min:1,max:3}),this.product_ids=[r.random.number({min:1,max:100}).toString()]};var h=function(e){function r(){return e.call(this,m)||this}return f(r,e),r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r}(o.DaffModelFactory),v=function(){function e(e,t,r){this.categoryFactory=e,this.categoryPageConfigurationFactory=t,this.productInMemoryBackendService=r}return e.prototype.parseRequestUrl=function(e,t){return t.parseRequestUrl(e)},e.prototype.createDb=function(){return{}},e.prototype.get=function(e){var t=this,r=this.generateProductIdSubset(this.productInMemoryBackendService.products);return this.categoryPageConfigurationState=this.categoryPageConfigurationFactory.create({id:e.id,page_size:this.generatePageSize(e),current_page:this.getCurrentPageParam(e),total_pages:this.getTotalPages(r,this.generatePageSize(e)),product_ids:this.trimProductIdsToSinglePage(r,this.getCurrentPageParam(e),this.generatePageSize(e))}),this.category=this.categoryFactory.create({id:e.id,total_products:r.length,page_size:this.generatePageSize(e)}),e.utils.createResponse$(function(){return{body:{category:t.category,categoryPageConfigurationState:t.categoryPageConfigurationState,products:t.productInMemoryBackendService.products},status:a.STATUS.OK}})},e.prototype.getTotalPages=function(e,t){return Math.ceil(e.length/t)},e.prototype.trimProductIdsToSinglePage=function(e,t,r){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}(e);return o.splice(0,(t-1)*r),o.splice(r,o.length-r),o},e.prototype.generateProductIdSubset=function(e){return c.randomSubset(e).map(function(e){return e.id})},e.prototype.generatePageSize=function(e){return e.req.params.map&&e.req.params.map.get("page_size")&&e.req.params.map.get("page_size")[0]?parseInt(e.req.params.map.get("page_size")[0],10):10},e.prototype.getCurrentPageParam=function(e){return e.req.params.map&&e.req.params.map.get("current_page")&&e.req.params.map.get("current_page")[0]?parseInt(e.req.params.map.get("current_page")[0],10):1},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:y},{type:h},{type:i.DaffInMemoryBackendProductService}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(y),t.ɵɵinject(h),t.ɵɵinject(i.DaffInMemoryBackendProductService))},token:e,providedIn:"root"}),e}();var b=function(){function e(e,t,r){this.categoryFactory=e,this.categoryPageConfigurationStateFactory=t,this.productFactory=r}return e.prototype.get=function(e){return u.of({category:this.categoryFactory.create(),categoryPageConfigurationState:this.categoryPageConfigurationStateFactory.create(),products:this.productFactory.createMany(3)})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:y},{type:h},{type:i.DaffProductFactory}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(y),t.ɵɵinject(h),t.ɵɵinject(i.DaffProductFactory))},token:e,providedIn:"root"}),e}();var S=function(){function e(e){this.http=e,this.url="/api/category/"}return e.prototype.get=function(e){var t=(new s.HttpParams).set("page_size",e.page_size?e.page_size.toString():null).set("current_page",e.current_page?e.current_page.toString():null);return this.http.get(this.url+e.id,{params:t})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e}();var j=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:n.DaffCategoryDriver,useExisting:S}]}},e.decorators=[{type:t.NgModule,args:[{imports:[g.CommonModule]}]}],e}(),P=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:n.DaffCategoryDriver,useExisting:b}]}},e.decorators=[{type:t.NgModule,args:[{imports:[g.CommonModule]}]}],e}(),I=function(){function e(){this.category$=new u.BehaviorSubject(null),this.pageConfigurationState$=new u.BehaviorSubject(null),this.currentPage$=new u.BehaviorSubject(null),this.totalPages$=new u.BehaviorSubject(null),this.totalProducts$=new u.BehaviorSubject(null),this.pageSize$=new u.BehaviorSubject(null),this.filters$=new u.BehaviorSubject([]),this.sortOptions$=new u.BehaviorSubject([]),this.appliedFilters$=new u.BehaviorSubject([]),this.appliedSortOption$=new u.BehaviorSubject(null),this.appliedSortDirection$=new u.BehaviorSubject(null),this.products$=new u.BehaviorSubject([]),this.categoryLoading$=new u.BehaviorSubject(!1),this.productsLoading$=new u.BehaviorSubject(!1),this.errors$=new u.BehaviorSubject([]),this.isCategoryEmpty$=new u.BehaviorSubject(!0)}return e.prototype.getCategoryById=function(e){return new u.BehaviorSubject(null)},e.prototype.getProductsByCategory=function(e){return new u.BehaviorSubject([])},e.prototype.getTotalProductsByCategory=function(e){return new u.BehaviorSubject(null)},e.prototype.dispatch=function(e){},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var _=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{providers:[{provide:n.DaffCategoryFacade,useExisting:I}]}]}],e}();e.DaffCategoryFactory=y,e.DaffCategoryInMemoryDriverModule=j,e.DaffCategoryPageConfigurationStateFactory=h,e.DaffCategoryTestingDriverModule=P,e.DaffCategoryTestingModule=_,e.DaffInMemoryBackendCategoryService=v,e.DaffInMemoryCategoryService=S,e.DaffTestingCategoryService=b,e.MockDaffCategoryFacade=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=daffodil-category-testing.umd.min.js.map