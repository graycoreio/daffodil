// Formula Constants
$radius: 46; //This must be the same as the radius of the circle in the svg
$pi: 3.14159265359;
$maxPercentageFill: 3.5/10;

//P = 2Ï€r
$perimeter: 2 * $pi * $radius;
$maxStrokeLength: $perimeter * $maxPercentageFill;

//The angle "back" that we have to calculate to ensure the animation
//starts and stops at the top of the circle
$angle: 270 - $maxPercentageFill * 360;

:host {
	display: block;
	margin: 0 auto;
	padding: 40px 0;
}

circle {
	animation: rotation linear, circle-animation linear;
	animation-duration: 1000ms;
	animation-iteration-count: infinite;
	fill: transparent;
	stroke-dasharray: $maxStrokeLength 400;
	stroke-linecap: round;
	stroke-width: 5px;
	transform-origin: center;
}

@keyframes circle-animation {
	0% {
		stroke-dasharray: $maxStrokeLength 400;
		stroke-dashoffset: $maxStrokeLength;
	}

	50% {
		stroke-dasharray: $maxStrokeLength 400;
		stroke-dashoffset: $maxStrokeLength - $perimeter * 0.25;
	}

	75% {
		stroke-dasharray: $maxStrokeLength 400;
		stroke-dashoffset: 0;
	}

	100% {
		stroke-dasharray: 0 400;
		stroke-dashoffset: -$maxStrokeLength;
	}
}

@keyframes rotation {
	0% {
		transform: rotate(-90deg);
	}

	50% {
		transform: rotate(0deg);
	}

	50.5% {
		transform: rotate(0deg);
	}

	75% {
		transform: rotate(90deg);
	}

	75.5% {
		transform: rotate(90deg);
	}

	99% {
		transform: rotate(#{$angle}deg);
	}

	100% {
		transform: rotate(#{$angle}deg);
	}
}
