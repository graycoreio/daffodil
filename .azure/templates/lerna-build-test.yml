parameters:
- name: incremental
  type: string

steps:
  - script: npx lerna run build --stream --since origin/$(System.PullRequest.TargetBranch) --include-dependents --concurrency=1
    displayName: Incremental Build
    condition: |
        and(
          succeeded(),
          ${{ parameters.incremental }}
        )

  - script: npx lerna run build --concurrency=1
    displayName: Full Build
    condition: |
        and(
          succeeded(),
          not(${{ parameters.incremental }})
        )
